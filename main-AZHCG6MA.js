var xC=Object.defineProperty,OC=Object.defineProperties;var kC=Object.getOwnPropertyDescriptors;var xa=Object.getOwnPropertySymbols,PC=Object.getPrototypeOf,Vm=Object.prototype.hasOwnProperty,Um=Object.prototype.propertyIsEnumerable,FC=Reflect.get;var jm=(t,e,n)=>e in t?xC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w=(t,e)=>{for(var n in e||={})Vm.call(e,n)&&jm(t,n,e[n]);if(xa)for(var n of xa(e))Um.call(e,n)&&jm(t,n,e[n]);return t},z=(t,e)=>OC(t,kC(e));var Bm=(t,e)=>{var n={};for(var r in t)Vm.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&xa)for(var r of xa(t))e.indexOf(r)<0&&Um.call(t,r)&&(n[r]=t[r]);return n};var Xe=(t,e,n)=>FC(PC(t),n,e);var h=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var We=null,Oa=!1,bd=1,LC=null,et=Symbol("SIGNAL");function P(t){let e=We;return We=t,e}function Pa(){return We}var Bo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $o(t){if(Oa)throw new Error("");if(We===null)return;We.consumerOnSignalRead(t);let e=We.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=We.recomputing;if(r&&(n=e!==void 0?e.nextProducer:We.producers,n!==void 0&&n.producer===t)){We.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===We&&(!r||VC(i,We)))return;let o=Ai(We),s={producer:t,consumer:We,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};We.producersTail=s,e!==void 0?e.nextProducer=s:We.producers=s,o&&Gm(t,s)}function $m(){bd++}function Dd(t){if(!(Ai(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===bd)){if(!t.producerMustRecompute(t)&&!La(t)){Ed(t);return}t.producerRecomputeValue(t),Ed(t)}}function Cd(t){if(t.consumers===void 0)return;let e=Oa;Oa=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||jC(r)}}finally{Oa=e}}function Sd(){return We?.consumerAllowSignalWrites!==!1}function jC(t){t.dirty=!0,Cd(t),t.consumerMarkedDirty?.(t)}function Ed(t){t.dirty=!1,t.lastCleanEpoch=bd}function Ho(t){return t&&Hm(t),P(t)}function Hm(t){t.producersTail=void 0,t.recomputing=!0}function Fa(t,e){P(e),t&&zm(t)}function zm(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Ai(t))do n=Id(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function La(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Dd(n),r!==n.version))return!0}return!1}function zo(t){if(Ai(t)){let e=t.producers;for(;e!==void 0;)e=Id(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function Gm(t,e){let n=t.consumersTail,r=Ai(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)Gm(i.producer,i)}function Id(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ai(e)){let o=e.producers;for(;o!==void 0;)o=Id(o)}return n}function Ai(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Td(t){LC?.(t)}function VC(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Ad(t,e){return Object.is(t,e)}function ja(t,e){let n=Object.create(UC);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Dd(n),$o(n),n.value===ka)throw n.error;return n.value};return r[et]=n,Td(n),r}var _d=Symbol("UNSET"),wd=Symbol("COMPUTING"),ka=Symbol("ERRORED"),UC=z(w({},Bo),{value:_d,dirty:!0,error:null,equal:Ad,kind:"computed",producerMustRecompute(t){return t.value===_d||t.value===wd},producerRecomputeValue(t){if(t.value===wd)throw new Error("");let e=t.value;t.value=wd;let n=Ho(t),r,i=!1;try{r=t.computation(),P(null),i=e!==_d&&e!==ka&&r!==ka&&t.equal(e,r)}catch(o){r=ka,t.error=o}finally{Fa(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function BC(){throw new Error}var qm=BC;function Wm(t){qm(t)}function Md(t){qm=t}var $C=null;function Rd(t,e){let n=Object.create(Va);n.value=t,e!==void 0&&(n.equal=e);let r=()=>Km(n);return r[et]=n,Td(n),[r,s=>Go(n,s),s=>Qm(n,s)]}function Km(t){return $o(t),t.value}function Go(t,e){Sd()||Wm(t),t.equal(t.value,e)||(t.value=e,HC(t))}function Qm(t,e){Sd()||Wm(t),Go(t,e(t.value))}var Va=z(w({},Bo),{equal:Ad,value:void 0,kind:"signal"});function HC(t){t.version++,$m(),Cd(t),$C?.(t)}function Nd(t){let e=P(null);try{return t()}finally{P(e)}}function U(t){return typeof t=="function"}function Mi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ua=Mi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function qo(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Te=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(U(r))try{r()}catch(o){e=o instanceof Ua?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Ym(o)}catch(s){e=e??[],s instanceof Ua?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ua(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Ym(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&qo(n,e)}remove(e){let{_finalizers:n}=this;n&&qo(n,e),e instanceof t&&e._removeParent(this)}};Te.EMPTY=(()=>{let t=new Te;return t.closed=!0,t})();var xd=Te.EMPTY;function Ba(t){return t instanceof Te||t&&"closed"in t&&U(t.remove)&&U(t.add)&&U(t.unsubscribe)}function Ym(t){U(t)?t():t.unsubscribe()}var Ft={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ri={setTimeout(t,e,...n){let{delegate:r}=Ri;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ri;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function $a(t){Ri.setTimeout(()=>{let{onUnhandledError:e}=Ft;if(e)e(t);else throw t})}function Wo(){}var Zm=Od("C",void 0,void 0);function Jm(t){return Od("E",void 0,t)}function Xm(t){return Od("N",t,void 0)}function Od(t,e,n){return{kind:t,value:e,error:n}}var Ar=null;function Ni(t){if(Ft.useDeprecatedSynchronousErrorHandling){let e=!Ar;if(e&&(Ar={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ar;if(Ar=null,n)throw r}}else t()}function ey(t){Ft.useDeprecatedSynchronousErrorHandling&&Ar&&(Ar.errorThrown=!0,Ar.error=t)}var Mr=class extends Te{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ba(e)&&e.add(this)):this.destination=qC}static create(e,n,r){return new xi(e,n,r)}next(e){this.isStopped?Pd(Xm(e),this):this._next(e)}error(e){this.isStopped?Pd(Jm(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Pd(Zm,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},zC=Function.prototype.bind;function kd(t,e){return zC.call(t,e)}var Fd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ha(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ha(r)}else Ha(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ha(n)}}},xi=class extends Mr{constructor(e,n,r){super();let i;if(U(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Ft.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&kd(e.next,o),error:e.error&&kd(e.error,o),complete:e.complete&&kd(e.complete,o)}):i=e}this.destination=new Fd(i)}};function Ha(t){Ft.useDeprecatedSynchronousErrorHandling?ey(t):$a(t)}function GC(t){throw t}function Pd(t,e){let{onStoppedNotification:n}=Ft;n&&Ri.setTimeout(()=>n(t,e))}var qC={closed:!0,next:Wo,error:GC,complete:Wo};var Oi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Lt(t){return t}function Ld(...t){return jd(t)}function jd(t){return t.length===0?Lt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Q=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=KC(n)?n:new xi(n,r,i);return Ni(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ty(r),new r((i,o)=>{let s=new xi({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Oi](){return this}pipe(...n){return jd(n)(this)}toPromise(n){return n=ty(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function ty(t){var e;return(e=t??Ft.Promise)!==null&&e!==void 0?e:Promise}function WC(t){return t&&U(t.next)&&U(t.error)&&U(t.complete)}function KC(t){return t&&t instanceof Mr||WC(t)&&Ba(t)}function QC(t){return U(t?.lift)}function X(t){return e=>{if(QC(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ee(t,e,n,r,i){return new Vd(t,e,n,r,i)}var Vd=class extends Mr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var ny=Mi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=(()=>{class t extends Q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new za(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ny}next(n){Ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?xd:(this.currentObservers=null,o.push(n),new Te(()=>{this.currentObservers=null,qo(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Q;return n.source=this,n}}return t.create=(e,n)=>new za(e,n),t})(),za=class extends le{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:xd}};var Ae=class extends le{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Le=new Q(t=>t.complete());function ry(t){return t&&U(t.schedule)}function iy(t){return t[t.length-1]}function Ga(t){return U(iy(t))?t.pop():void 0}function Wn(t){return ry(iy(t))?t.pop():void 0}function Nr(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function qa(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function oy(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rr(t){return this instanceof Rr?(this.v=t,this):new Rr(t)}function sy(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(g){return Promise.resolve(g).then(f,d)}}function a(f,g){r[f]&&(i[f]=function(m){return new Promise(function(y,v){o.push([f,m,y,v])>1||c(f,m)})},g&&(i[f]=g(i[f])))}function c(f,g){try{l(r[f](g))}catch(m){p(o[0][3],m)}}function l(f){f.value instanceof Rr?Promise.resolve(f.value.v).then(u,d):p(o[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function p(f,g){f(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function ay(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof oy=="function"?oy(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Wa=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ka(t){return U(t?.then)}function Qa(t){return U(t[Oi])}function Ya(t){return Symbol.asyncIterator&&U(t?.[Symbol.asyncIterator])}function Za(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function YC(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ja=YC();function Xa(t){return U(t?.[Ja])}function ec(t){return sy(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Rr(n.read());if(i)return yield Rr(void 0);yield yield Rr(r)}}finally{n.releaseLock()}})}function tc(t){return U(t?.getReader)}function Ie(t){if(t instanceof Q)return t;if(t!=null){if(Qa(t))return ZC(t);if(Wa(t))return JC(t);if(Ka(t))return XC(t);if(Ya(t))return cy(t);if(Xa(t))return eS(t);if(tc(t))return tS(t)}throw Za(t)}function ZC(t){return new Q(e=>{let n=t[Oi]();if(U(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function JC(t){return new Q(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function XC(t){return new Q(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,$a)})}function eS(t){return new Q(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function cy(t){return new Q(e=>{nS(t,e).catch(n=>e.error(n))})}function tS(t){return cy(ec(t))}function nS(t,e){var n,r,i,o;return qa(this,void 0,void 0,function*(){try{for(n=ay(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function tt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function nc(t,e=0){return X((n,r)=>{n.subscribe(ee(r,i=>tt(r,t,()=>r.next(i),e),()=>tt(r,t,()=>r.complete(),e),i=>tt(r,t,()=>r.error(i),e)))})}function rc(t,e=0){return X((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function ly(t,e){return Ie(t).pipe(rc(e),nc(e))}function uy(t,e){return Ie(t).pipe(rc(e),nc(e))}function dy(t,e){return new Q(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function fy(t,e){return new Q(n=>{let r;return tt(n,e,()=>{r=t[Ja](),tt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>U(r?.return)&&r.return()})}function ic(t,e){if(!t)throw new Error("Iterable cannot be null");return new Q(n=>{tt(n,e,()=>{let r=t[Symbol.asyncIterator]();tt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function hy(t,e){return ic(ec(t),e)}function py(t,e){if(t!=null){if(Qa(t))return ly(t,e);if(Wa(t))return dy(t,e);if(Ka(t))return uy(t,e);if(Ya(t))return ic(t,e);if(Xa(t))return fy(t,e);if(tc(t))return hy(t,e)}throw Za(t)}function se(t,e){return e?py(t,e):Ie(t)}function B(...t){let e=Wn(t);return se(t,e)}function Ko(t,e){let n=U(t)?t:()=>t,r=i=>i.error(n());return new Q(e?i=>e.schedule(r,0,i):r)}function oc(t){return!!t&&(t instanceof Q||U(t.lift)&&U(t.subscribe))}var xr=Mi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(t,e){return X((n,r)=>{let i=0;n.subscribe(ee(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:rS}=Array;function iS(t,e){return rS(e)?t(...e):t(e)}function sc(t){return ie(e=>iS(t,e))}var{isArray:oS}=Array,{getPrototypeOf:sS,prototype:aS,keys:cS}=Object;function ac(t){if(t.length===1){let e=t[0];if(oS(e))return{args:e,keys:null};if(lS(e)){let n=cS(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function lS(t){return t&&typeof t=="object"&&sS(t)===aS}function cc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function lc(...t){let e=Wn(t),n=Ga(t),{args:r,keys:i}=ac(t);if(r.length===0)return se([],e);let o=new Q(uS(r,e,i?s=>cc(i,s):Lt));return n?o.pipe(sc(n)):o}function uS(t,e,n=Lt){return r=>{gy(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)gy(e,()=>{let l=se(t[c],e),u=!1;l.subscribe(ee(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function gy(t,e,n){t?tt(n,t,e):e()}function my(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,p=()=>{d&&!c.length&&!l&&e.complete()},f=m=>l<r?g(m):c.push(m),g=m=>{o&&e.next(m),l++;let y=!1;Ie(n(m,u++)).subscribe(ee(e,v=>{i?.(v),o?f(v):e.next(v)},()=>{y=!0},void 0,()=>{if(y)try{for(l--;c.length&&l<r;){let v=c.shift();s?tt(e,s,()=>g(v)):g(v)}p()}catch(v){e.error(v)}}))};return t.subscribe(ee(e,f,()=>{d=!0,p()})),()=>{a?.()}}function je(t,e,n=1/0){return U(e)?je((r,i)=>ie((o,s)=>e(r,o,i,s))(Ie(t(r,i))),n):(typeof e=="number"&&(n=e),X((r,i)=>my(r,i,t,n)))}function Kn(t=1/0){return je(Lt,t)}function yy(){return Kn(1)}function ki(...t){return yy()(se(t,Wn(t)))}function Qo(t){return new Q(e=>{Ie(t()).subscribe(e)})}function Ud(...t){let e=Ga(t),{args:n,keys:r}=ac(t),i=new Q(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Ie(n[u]).subscribe(ee(o,p=>{d||(d=!0,l--),a[u]=p},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?cc(r,a):a),o.complete())}))}});return e?i.pipe(sc(e)):i}function jt(t,e){return X((n,r)=>{let i=0;n.subscribe(ee(r,o=>t.call(e,o,i++)&&r.next(o)))})}function En(t){return X((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ee(n,void 0,void 0,s=>{o=Ie(t(s,En(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Pi(t,e){return U(e)?je(t,e,1):je(t,1)}function vy(t){return X((e,n)=>{let r=!1;e.subscribe(ee(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function bn(t){return t<=0?()=>Le:X((e,n)=>{let r=0;e.subscribe(ee(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function _y(t=dS){return X((e,n)=>{let r=!1;e.subscribe(ee(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function dS(){return new xr}function Bd(t){return X((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Dn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?jt((i,o)=>t(i,o,r)):Lt,bn(1),n?vy(e):_y(()=>new xr))}function uc(t){return t<=0?()=>Le:X((e,n)=>{let r=[];e.subscribe(ee(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function $d(...t){let e=Wn(t);return X((n,r)=>{(e?ki(t,n,e):ki(t,n)).subscribe(r)})}function tn(t,e){return X((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ee(r,c=>{i?.unsubscribe();let l=0,u=o++;Ie(t(c,u)).subscribe(i=ee(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Qn(t){return X((e,n)=>{Ie(t).subscribe(ee(n,()=>n.complete(),Wo)),!n.closed&&e.subscribe(n)})}function nn(t,e,n){let r=U(t)||e||n?{next:t,error:e,complete:n}:t;return r?X((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ee(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Lt}var Hd;function dc(){return Hd}function rn(t){let e=Hd;return Hd=t,e}var wy=Symbol("NotFound");function Fi(t){return t===wy||t?.name==="\u0275NotFound"}var mc="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",E=class extends Error{code;constructor(e,n){super(Xn(e,n)),this.code=e}};function pS(t){return`NG0${Math.abs(t)}`}function Xn(t,e){return`${pS(t)}${e?": "+e:""}`}var ts=globalThis;function te(t){for(let e in t)if(t[e]===te)return e;throw Error("")}function Sy(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Sn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Sn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function of(t,e){return t?e?`${t} ${e}`:t:e||""}var gS=te({__forward_ref__:te});function In(t){return t.__forward_ref__=In,t.toString=function(){return Sn(this())},t}function Ve(t){return sf(t)?t():t}function sf(t){return typeof t=="function"&&t.hasOwnProperty(gS)&&t.__forward_ref__===In}function C(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function bt(t){return{providers:t.providers||[],imports:t.imports||[]}}function ns(t){return mS(t,yc)}function af(t){return ns(t)!==null}function mS(t,e){return t.hasOwnProperty(e)&&t[e]||null}function yS(t){let e=t?.[yc]??null;return e||null}function Gd(t){return t&&t.hasOwnProperty(hc)?t[hc]:null}var yc=te({\u0275prov:te}),hc=te({\u0275inj:te}),I=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=C({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cf(t){return t&&!!t.\u0275providers}var lf=te({\u0275cmp:te}),uf=te({\u0275dir:te}),df=te({\u0275pipe:te}),ff=te({\u0275mod:te}),Zo=te({\u0275fac:te}),Lr=te({__NG_ELEMENT_ID__:te}),Ey=te({__NG_ENV_ID__:te});function hf(t){return vc(t,"@NgModule"),t[ff]||null}function Tn(t){return vc(t,"@Component"),t[lf]||null}function pf(t){return vc(t,"@Directive"),t[uf]||null}function Iy(t){return vc(t,"@Pipe"),t[df]||null}function vc(t,e){if(t==null)throw new E(-919,!1)}function rs(t){return typeof t=="string"?t:t==null?"":String(t)}function Ty(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():rs(t)}var Ay=te({ngErrorCode:te}),vS=te({ngErrorMessage:te}),_S=te({ngTokenPath:te});function gf(t,e){return My("",-200,e)}function _c(t,e){throw new E(-201,!1)}function My(t,e,n){let r=new E(e,t);return r[Ay]=e,r[vS]=t,n&&(r[_S]=n),r}function wS(t){return t[Ay]}var qd;function Ry(){return qd}function Ye(t){let e=qd;return qd=t,e}function mf(t,e,n){let r=ns(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;_c(t,"")}var ES={},Or=ES,bS="__NG_DI_FLAG__",Wd=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=kr(n)||0;try{return this.injector.get(e,r&8?null:Or,r)}catch(i){if(Fi(i))return i;throw i}}};function DS(t,e=0){let n=dc();if(n===void 0)throw new E(-203,!1);if(n===null)return mf(t,void 0,e);{let r=CS(e),i=n.retrieve(t,r);if(Fi(i)){if(r.optional)return null;throw i}return i}}function N(t,e=0){return(Ry()||DS)(Ve(t),e)}function _(t,e){return N(t,kr(e))}function kr(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function CS(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Kd(t){let e=[];for(let n=0;n<t.length;n++){let r=Ve(t[n]);if(Array.isArray(r)){if(r.length===0)throw new E(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=SS(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(N(i,o))}else e.push(N(r))}return e}function SS(t){return t[bS]}function Yn(t,e){let n=t.hasOwnProperty(Zo);return n?t[Zo]:null}function Ny(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function xy(t){return t.flat(Number.POSITIVE_INFINITY)}function wc(t,e){t.forEach(n=>Array.isArray(n)?wc(n,e):e(n))}function yf(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function is(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Oy(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function ky(t,e,n){let r=ji(t,e);return r>=0?t[r|1]=n:(r=~r,Oy(t,r,e,n)),r}function Ec(t,e){let n=ji(t,e);if(n>=0)return t[n|1]}function ji(t,e){return IS(t,e,1)}function IS(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var er={},lt=[],tr=new I(""),vf=new I("",-1),_f=new I(""),Jo=class{get(e,n=Or){if(n===Or){let i=My("",-201);throw i.name="\u0275NotFound",i}return n}};function Vi(t){return{\u0275providers:t}}function Py(...t){return{\u0275providers:wf(!0,t),\u0275fromNgModule:!0}}function wf(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return wc(e,s=>{let a=s;pc(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Fy(i,o),n}function Fy(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ef(i,o=>{e(o,r)})}}function pc(t,e,n,r){if(t=Ve(t),!t)return!1;let i=null,o=Gd(t),s=!o&&Tn(t);if(!o&&!s){let c=t.ngModule;if(o=Gd(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)pc(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;wc(o.imports,u=>{pc(u,e,n,r)&&(l||=[],l.push(u))}),l!==void 0&&Fy(l,e)}if(!a){let l=Yn(i)||(()=>new i);e({provide:i,useFactory:l,deps:lt},i),e({provide:_f,useValue:i,multi:!0},i),e({provide:tr,useValue:()=>N(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;Ef(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Ef(t,e){for(let n of t)cf(n)&&(n=n.\u0275providers),Array.isArray(n)?Ef(n,e):e(n)}var TS=te({provide:String,useValue:te});function Ly(t){return t!==null&&typeof t=="object"&&TS in t}function AS(t){return!!(t&&t.useExisting)}function MS(t){return!!(t&&t.useFactory)}function Pr(t){return typeof t=="function"}function jy(t){return!!t.useClass}var os=new I(""),fc={},by={},zd;function ss(){return zd===void 0&&(zd=new Jo),zd}var Ce=class{},Fr=class extends Ce{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Yd(e,s=>this.processProvider(s)),this.records.set(vf,Li(void 0,this)),i.has("environment")&&this.records.set(Ce,Li(void 0,this));let o=this.records.get(os);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(_f,lt,{self:!0}))}retrieve(e,n){let r=kr(n)||0;try{return this.get(e,Or,r)}catch(i){if(Fi(i))return i;throw i}}destroy(){Yo(this),this._destroyed=!0;let e=P(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),P(e)}}onDestroy(e){return Yo(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Yo(this);let n=rn(this),r=Ye(void 0),i;try{return e()}finally{rn(n),Ye(r)}}get(e,n=Or,r){if(Yo(this),e.hasOwnProperty(Ey))return e[Ey](this);let i=kr(r),o,s=rn(this),a=Ye(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=kS(e)&&ns(e);u&&this.injectableDefInScope(u)?l=Li(Qd(e),fc):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?ss():this.parent;return n=i&8&&n===Or?null:n,c.get(e,n)}catch(c){let l=wS(c);throw l===-200||l===-201?new E(l,null):c}finally{Ye(a),rn(s)}}resolveInjectorInitializers(){let e=P(null),n=rn(this),r=Ye(void 0),i;try{let o=this.get(tr,lt,{self:!0});for(let s of o)s()}finally{rn(n),Ye(r),P(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Sn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ve(e);let n=Pr(e)?e:Ve(e&&e.provide),r=NS(e);if(!Pr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Li(void 0,fc,!0),i.factory=()=>Kd(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=P(null);try{if(n.value===by)throw gf(Sn(e));return n.value===fc&&(n.value=by,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&OS(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{P(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ve(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Qd(t){let e=ns(t),n=e!==null?e.factory:Yn(t);if(n!==null)return n;if(t instanceof I)throw new E(204,!1);if(t instanceof Function)return RS(t);throw new E(204,!1)}function RS(t){if(t.length>0)throw new E(204,!1);let n=yS(t);return n!==null?()=>n.factory(t):()=>new t}function NS(t){if(Ly(t))return Li(void 0,t.useValue);{let e=bf(t);return Li(e,fc)}}function bf(t,e,n){let r;if(Pr(t)){let i=Ve(t);return Yn(i)||Qd(i)}else if(Ly(t))r=()=>Ve(t.useValue);else if(MS(t))r=()=>t.useFactory(...Kd(t.deps||[]));else if(AS(t))r=(i,o)=>N(Ve(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ve(t&&(t.useClass||t.provide));if(xS(t))r=()=>new i(...Kd(t.deps));else return Yn(i)||Qd(i)}return r}function Yo(t){if(t.destroyed)throw new E(205,!1)}function Li(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function xS(t){return!!t.deps}function OS(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function kS(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Yd(t,e){for(let n of t)Array.isArray(n)?Yd(n,e):n&&cf(n)?Yd(n.\u0275providers,e):e(n)}function Ue(t,e){let n;t instanceof Fr?(Yo(t),n=t):n=new Wd(t);let r,i=rn(n),o=Ye(void 0);try{return e()}finally{rn(i),Ye(o)}}function Vy(){return Ry()!==void 0||dc()!=null}var Vt=0,x=1,L=2,Me=3,Dt=4,Ct=5,Ui=6,Bi=7,Se=8,An=9,sn=10,ve=11,$i=12,Df=13,jr=14,ut=15,nr=16,Vr=17,an=18,Mn=19,Cf=20,Cn=21,bc=22,as=23,dt=24,Ur=25,Br=26,Re=27,Uy=1,Sf=6,rr=7,cs=8,$r=9,_e=10;function cn(t){return Array.isArray(t)&&typeof t[Uy]=="object"}function Ut(t){return Array.isArray(t)&&t[Uy]===!0}function If(t){return(t.flags&4)!==0}function ir(t){return t.componentOffset>-1}function Dc(t){return(t.flags&1)===1}function ln(t){return!!t.template}function Hi(t){return(t[L]&512)!==0}function Hr(t){return(t[L]&256)===256}var Tf="svg",By="math";function St(t){for(;Array.isArray(t);)t=t[Vt];return t}function Af(t,e){return St(e[t])}function Bt(t,e){return St(e[t.index])}function ls(t,e){return t.data[e]}function $y(t,e){return t[e]}function Mf(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function It(t,e){let n=e[t];return cn(n)?n:n[Vt]}function Hy(t){return(t[L]&4)===4}function Cc(t){return(t[L]&128)===128}function zy(t){return Ut(t[Me])}function un(t,e){return e==null?null:t[e]}function Rf(t){t[Vr]=0}function Nf(t){t[L]&1024||(t[L]|=1024,Cc(t)&&zi(t))}function Gy(t,e){for(;t>0;)e=e[jr],t--;return e}function us(t){return!!(t[L]&9216||t[dt]?.dirty)}function Sc(t){t[sn].changeDetectionScheduler?.notify(8),t[L]&64&&(t[L]|=1024),us(t)&&zi(t)}function zi(t){t[sn].changeDetectionScheduler?.notify(0);let e=Zn(t);for(;e!==null&&!(e[L]&8192||(e[L]|=8192,!Cc(e)));)e=Zn(e)}function xf(t,e){if(Hr(t))throw new E(911,!1);t[Cn]===null&&(t[Cn]=[]),t[Cn].push(e)}function qy(t,e){if(t[Cn]===null)return;let n=t[Cn].indexOf(e);n!==-1&&t[Cn].splice(n,1)}function Zn(t){let e=t[Me];return Ut(e)?e[Me]:e}function Of(t){return t[Bi]??=[]}function kf(t){return t.cleanup??=[]}function Wy(t,e,n,r){let i=Of(e);i.push(n),t.firstCreatePass&&kf(t).push(r,i.length-1)}var $={lFrame:av(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Zd=!1;function Ky(){return $.lFrame.elementDepthCount}function Qy(){$.lFrame.elementDepthCount++}function Pf(){$.lFrame.elementDepthCount--}function Yy(){return $.bindingsEnabled}function Zy(){return $.skipHydrationRootTNode!==null}function Ff(t){return $.skipHydrationRootTNode===t}function Lf(){$.skipHydrationRootTNode=null}function H(){return $.lFrame.lView}function Be(){return $.lFrame.tView}function or(t){return $.lFrame.contextLView=t,t[Se]}function sr(t){return $.lFrame.contextLView=null,t}function $e(){let t=jf();for(;t!==null&&t.type===64;)t=t.parent;return t}function jf(){return $.lFrame.currentTNode}function Jy(){let t=$.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Gi(t,e){let n=$.lFrame;n.currentTNode=t,n.isParent=e}function Vf(){return $.lFrame.isParent}function Xy(){$.lFrame.isParent=!1}function Uf(){return Zd}function Bf(t){let e=Zd;return Zd=t,e}function $f(){let t=$.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ev(t){return $.lFrame.bindingIndex=t}function qi(){return $.lFrame.bindingIndex++}function tv(t){let e=$.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function nv(){return $.lFrame.inI18n}function rv(t,e){let n=$.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ic(e)}function iv(){return $.lFrame.currentDirectiveIndex}function Ic(t){$.lFrame.currentDirectiveIndex=t}function ov(t){let e=$.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Hf(){return $.lFrame.currentQueryIndex}function Tc(t){$.lFrame.currentQueryIndex=t}function PS(t){let e=t[x];return e.type===2?e.declTNode:e.type===1?t[Ct]:null}function zf(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=PS(o),i===null||(o=o[jr],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=$.lFrame=sv();return r.currentTNode=e,r.lView=t,!0}function Ac(t){let e=sv(),n=t[x];$.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function sv(){let t=$.lFrame,e=t===null?null:t.child;return e===null?av(t):e}function av(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function cv(){let t=$.lFrame;return $.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Gf=cv;function Mc(){let t=cv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function lv(t){return($.lFrame.contextLView=Gy(t,$.lFrame.contextLView))[Se]}function ar(){return $.lFrame.selectedIndex}function cr(t){$.lFrame.selectedIndex=t}function qf(){let t=$.lFrame;return ls(t.tView,t.selectedIndex)}function Wi(){$.lFrame.currentNamespace=Tf}function Rc(){FS()}function FS(){$.lFrame.currentNamespace=null}function uv(){return $.lFrame.currentNamespace}var dv=!0;function Nc(){return dv}function xc(t){dv=t}function Jd(t,e=null,n=null,r){let i=Wf(t,e,n,r);return i.resolveInjectorInitializers(),i}function Wf(t,e=null,n=null,r,i=new Set){let o=[n||lt,Py(t)];return r=r||(typeof t=="object"?void 0:Sn(t)),new Fr(o,e||ss(),r||null,i)}var nt=class t{static THROW_IF_NOT_FOUND=Or;static NULL=new Jo;static create(e,n){if(Array.isArray(e))return Jd({name:""},n,e,"");{let r=e.name??"";return Jd({name:r},e.parent,e.providers,r)}}static \u0275prov=C({token:t,providedIn:"any",factory:()=>N(vf)});static __NG_ELEMENT_ID__=-1},fe=new I(""),dn=(()=>{class t{static __NG_ELEMENT_ID__=LS;static __NG_ENV_ID__=n=>n}return t})(),Xd=class extends dn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Hr(this._lView)}onDestroy(e){let n=this._lView;return xf(n,e),()=>qy(n,e)}};function LS(){return new Xd(H())}var Kf=!1,fv=new I(""),Rn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ae(!1);debugTaskTracker=_(fv,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Q(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),this.debugTaskTracker?.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.debugTaskTracker?.remove(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=C({token:t,providedIn:"root",factory:()=>new t})}return t})(),ef=class extends le{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Vy()&&(this.destroyRef=_(dn,{optional:!0})??void 0,this.pendingTasks=_(Rn,{optional:!0})??void 0)}emit(e){let n=P(null);try{super.next(e)}finally{P(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Te&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ae=ef;function gc(...t){}function Qf(t){let e,n;function r(){t=gc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function hv(t){return queueMicrotask(()=>t()),()=>{t=gc}}var Yf="isAngularZone",Xo=Yf+"_ID",jS=0,ue=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ae(!1);onMicrotaskEmpty=new ae(!1);onStable=new ae(!1);onError=new ae(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Kf}=e;if(typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,BS(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Yf)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new E(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,VS,gc,gc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},VS={};function Zf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function US(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Qf(()=>{t.callbackScheduled=!1,tf(t),t.isCheckStableRunning=!0,Zf(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),tf(t)}function BS(t){let e=()=>{US(t)},n=jS++;t._inner=t._inner.fork({name:"angular",properties:{[Yf]:!0,[Xo]:n,[Xo+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if($S(c))return r.invokeTask(o,s,a,c);try{return Dy(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Cy(t)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return Dy(t),r.invoke(o,s,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!HS(c)&&e(),Cy(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,tf(t),Zf(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function tf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Dy(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Cy(t){t._nesting--,Zf(t)}var es=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ae;onMicrotaskEmpty=new ae;onStable=new ae;onError=new ae;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function $S(t){return pv(t,"__ignore_ng_zone__")}function HS(t){return pv(t,"__scheduler_tick__")}function pv(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var on=class{_console=console;handleError(e){this._console.error("ERROR",e)}},ft=new I("",{factory:()=>{let t=_(ue),e=_(Ce),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(on),n.handleError(r))})}}}),gv={provide:tr,useValue:()=>{let t=_(on,{optional:!0})},multi:!0};function rt(t,e){let[n,r,i]=Rd(t,e?.equal),o=n,s=o[et];return o.set=r,o.update=i,o.asReadonly=mv.bind(o),o}function mv(){let t=this[et];if(t.readonlyFn===void 0){let e=()=>this();e[et]=t,t.readonlyFn=e}return t.readonlyFn}var Oc=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=zS}return t})();function zS(){return new Oc(H(),$e())}var Jn=class{},Ki=new I("",{factory:()=>!0});var kc=new I("");var Jf=(()=>{class t{static \u0275prov=C({token:t,providedIn:"root",factory:()=>new nf})}return t})(),nf=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},rf=class{[et];constructor(e){this[et]=e}destroy(){this[et].destroy()}};function we(t){return Nd(t)}function _s(t){return{toString:t}.toString()}function ZS(t){return typeof t=="function"}function Gv(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var $c=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Tt=(()=>{let t=()=>qv;return t.ngInherit=!0,t})();function qv(t){return t.type.prototype.ngOnChanges&&(t.setInput=XS),JS}function JS(){let t=Kv(this),e=t?.current;if(e){let n=t.previous;if(n===er)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function XS(t,e,n,r,i){let o=this.declaredInputs[r],s=Kv(t)||e0(t,{previous:er,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new $c(l&&l.currentValue,n,c===er),Gv(t,e,i,n)}var Wv="__ngSimpleChanges__";function Kv(t){return t[Wv]||null}function e0(t,e){return t[Wv]=e}var yv=[];var ne=function(t,e=null,n){for(let r=0;r<yv.length;r++){let i=yv[r];i(t,e,n)}},Y=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(Y||{});function t0(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=qv(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function n0(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Lc(t,e,n){Qv(t,e,3,n)}function jc(t,e,n,r){(t[L]&3)===n&&Qv(t,e,n,r)}function Xf(t,e){let n=t[L];(n&3)===e&&(n&=16383,n+=1,t[L]=n)}function Qv(t,e,n,r){let i=r!==void 0?t[Vr]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Vr]+=65536),(a<o||o==-1)&&(r0(t,n,e,c),t[Vr]=(t[Vr]&4294901760)+c+2),c++}function vv(t,e){ne(Y.LifecycleHookStart,t,e);let n=P(null);try{e.call(t)}finally{P(n),ne(Y.LifecycleHookEnd,t,e)}}function r0(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[L]>>14<t[Vr]>>16&&(t[L]&3)===e&&(t[L]+=16384,vv(a,o)):vv(a,o)}var Yi=-1,Gr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function i0(t){return(t.flags&8)!==0}function o0(t){return(t.flags&16)!==0}function s0(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];a0(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function Yv(t){return t===3||t===4||t===6}function a0(t){return t.charCodeAt(0)===64}function Zi(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?_v(t,n,i,null,e[++r]):_v(t,n,i,null,null))}}return t}function _v(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function Zv(t){return t!==Yi}function Hc(t){return t&32767}function c0(t){return t>>16}function zc(t,e){let n=c0(t),r=e;for(;n>0;)r=r[jr],n--;return r}var lh=!0;function Gc(t){let e=lh;return lh=t,e}var l0=256,Jv=l0-1,Xv=5,u0=0,fn={};function d0(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Lr)&&(r=n[Lr]),r==null&&(r=n[Lr]=u0++);let i=r&Jv,o=1<<i;e.data[t+(i>>Xv)]|=o}function qc(t,e){let n=e_(t,e);if(n!==-1)return n;let r=e[x];r.firstCreatePass&&(t.injectorIndex=e.length,eh(r.data,t),eh(e,null),eh(r.blueprint,null));let i=Fh(t,e),o=t.injectorIndex;if(Zv(i)){let s=Hc(i),a=zc(i,e),c=a[x].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function eh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function e_(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Fh(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=o_(i),r===null)return Yi;if(n++,i=i[jr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Yi}function uh(t,e,n){d0(t,e,n)}function f0(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(Yv(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function t_(t,e,n){if(n&8||t!==void 0)return t;_c(e,"NodeInjector")}function n_(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[An],o=Ye(void 0);try{return i?i.get(e,r,n&8):mf(e,r,n&8)}finally{Ye(o)}}return t_(r,e,n)}function r_(t,e,n,r=0,i){if(t!==null){if(e[L]&2048&&!(r&2)){let s=m0(t,e,n,r,fn);if(s!==fn)return s}let o=i_(t,e,n,r,fn);if(o!==fn)return o}return n_(e,n,r,i)}function i_(t,e,n,r,i){let o=p0(n);if(typeof o=="function"){if(!zf(e,t,r))return r&1?t_(i,n,r):n_(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))_c(n);else return s}finally{Gf()}}else if(typeof o=="number"){let s=null,a=e_(t,e),c=Yi,l=r&1?e[ut][Ct]:null;for((a===-1||r&4)&&(c=a===-1?Fh(t,e):e[a+8],c===Yi||!Ev(r,!1)?a=-1:(s=e[x],a=Hc(c),e=zc(c,e)));a!==-1;){let u=e[x];if(wv(o,a,u.data)){let d=h0(a,e,n,s,r,l);if(d!==fn)return d}c=e[a+8],c!==Yi&&Ev(r,e[x].data[a+8]===l)&&wv(o,a,e)?(s=u,a=Hc(c),e=zc(c,e)):a=-1}}return i}function h0(t,e,n,r,i,o){let s=e[x],a=s.data[t+8],c=r==null?ir(a)&&lh:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=Vc(a,s,n,c,l);return u!==null?hs(e,s,u,a,i):fn}function Vc(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,p=i?a+u:l;for(let f=d;f<p;f++){let g=s[f];if(f<c&&n===g||f>=c&&g.type===n)return f}if(i){let f=s[c];if(f&&ln(f)&&f.type===n)return c}return null}function hs(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Gr){let a=o;if(a.resolving){let f=Ty(s[n]);throw gf(f)}let c=Gc(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],u,d=a.injectImpl?Ye(a.injectImpl):null,p=zf(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&t0(n,s[n],e)}finally{d!==null&&Ye(d),Gc(c),a.resolving=!1,Gf()}}return o}function p0(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Lr)?t[Lr]:void 0;return typeof e=="number"?e>=0?e&Jv:g0:e}function wv(t,e,n){let r=1<<t;return!!(n[e+(t>>Xv)]&r)}function Ev(t,e){return!(t&2)&&!(t&1&&e)}var zr=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return r_(this._tNode,this._lView,e,kr(r),n)}};function g0(){return new zr($e(),H())}function ur(t){return _s(()=>{let e=t.prototype.constructor,n=e[Zo]||dh(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Zo]||dh(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function dh(t){return sf(t)?()=>{let e=dh(Ve(t));return e&&e()}:Yn(t)}function m0(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[L]&2048&&!Hi(s);){let a=i_(o,s,n,r|2,fn);if(a!==fn)return a;let c=o.parent;if(!c){let l=s[Cf];if(l){let u=l.get(n,fn,r);if(u!==fn)return u}c=o_(s),s=s[jr]}o=c}return i}function o_(t){let e=t[x],n=e.type;return n===2?e.declTNode:n===1?t[Ct]:null}function ws(t){return f0($e(),t)}function y0(){return to($e(),H())}function to(t,e){return new Ze(Bt(t,e))}var Ze=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=y0}return t})();function v0(t){return t instanceof Ze?t.nativeElement:t}function _0(){return this._results[Symbol.iterator]()}var Wc=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new le}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=xy(e);(this._changesDetected=!Ny(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=_0};function s_(t){return(t.flags&128)===128}var Lh=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Lh||{}),a_=new Map,w0=0;function E0(){return w0++}function b0(t){a_.set(t[Mn],t)}function fh(t){a_.delete(t[Mn])}var bv="__ngContext__";function Ji(t,e){cn(e)?(t[bv]=e[Mn],b0(e)):t[bv]=e}function c_(t){return u_(t[$i])}function l_(t){return u_(t[Dt])}function u_(t){for(;t!==null&&!Ut(t);)t=t[Dt];return t}var D0;function jh(t){D0=t}var al=new I("",{factory:()=>C0}),C0="ng";var cl=new I(""),Es=new I("",{providedIn:"platform",factory:()=>"unknown"}),ll=new I(""),ul=new I("",{factory:()=>_(fe).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var d_="r";var f_="di";var h_=!1,p_=new I("",{factory:()=>h_});var Vh=new I("");var S0=(t,e,n,r)=>{};function I0(t,e,n,r){S0(t,e,n,r)}function Uh(t){return(t.flags&32)===32}var T0=()=>null;function g_(t,e,n=!1){return T0(t,e,n)}function m_(t,e){let n=t.contentQueries;if(n!==null){let r=P(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Tc(o),a.contentQueries(2,e[s],s)}}}finally{P(r)}}}function hh(t,e,n){Tc(0);let r=P(null);try{e(t,n)}finally{P(r)}}function y_(t,e,n){if(If(e)){let r=P(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{P(r)}}}var Ht=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Ht||{});var Pc;function A0(){if(Pc===void 0&&(Pc=null,ts.trustedTypes))try{Pc=ts.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Pc}function Dv(t){return A0()?.createScriptURL(t)||t}var Kc=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${mc})`}};function bs(t){return t instanceof Kc?t.changingThisBreaksApplicationSecurity:t}function Bh(t,e){let n=v_(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${mc})`)}return n===e}function v_(t){return t instanceof Kc&&t.getTypeName()||null}var M0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function __(t){return t=String(t),t.match(M0)?t:"unsafe:"+t}function R0(t,e){return t.createText(e)}function N0(t,e,n){t.setValue(e,n)}function w_(t,e,n){return t.createElement(e,n)}function Qc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function E_(t,e,n){t.appendChild(e,n)}function Cv(t,e,n,r,i){r!==null?Qc(t,e,n,r,i):E_(t,e,n)}function b_(t,e,n,r){t.removeChild(null,e,n,r)}function x0(t,e,n){t.setAttribute(e,"style",n)}function O0(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function D_(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&s0(t,e,r),i!==null&&O0(t,e,i),o!==null&&x0(t,e,o)}var dl=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(dl||{});function C_(t){let e=I_();return e?e.sanitize(dl.URL,t)||"":Bh(t,"URL")?bs(t):__(rs(t))}function S_(t){let e=I_();if(e)return Dv(e.sanitize(dl.RESOURCE_URL,t)||"");if(Bh(t,"ResourceURL"))return Dv(bs(t));throw new E(904,!1)}var k0=new Set(["embed","frame","iframe","media","script"]),P0=new Set(["base","link","script"]);function F0(t,e){return e==="src"&&k0.has(t)||e==="href"&&P0.has(t)||e==="xlink:href"&&t==="script"?S_:C_}function $h(t,e,n){return F0(e,n)(t)}function I_(){let t=H();return t&&t[sn].sanitizer}function T_(t){return t instanceof Function?t():t}function L0(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var A_="ng-template";function j0(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&L0(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Hh(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Hh(t){return t.type===4&&t.value!==A_}function V0(t,e,n){let r=t.type===4&&!n?A_:t.value;return e===r}function U0(t,e,n){let r=4,i=t.attrs,o=i!==null?H0(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!$t(r)&&!$t(c))return!1;if(s&&$t(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!V0(t,c,n)||c===""&&e.length===1){if($t(r))return!1;s=!0}}else if(r&8){if(i===null||!j0(t,i,c,n)){if($t(r))return!1;s=!0}}else{let l=e[++a],u=B0(c,i,Hh(t),n);if(u===-1){if($t(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if($t(r))return!1;s=!0}}}}return $t(r)||s}function $t(t){return(t&1)===0}function B0(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return z0(e,t)}function $0(t,e,n=!1){for(let r=0;r<e.length;r++)if(U0(t,e[r],n))return!0;return!1}function H0(t){for(let e=0;e<t.length;e++){let n=t[e];if(Yv(n))return e}return t.length}function z0(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Sv(t,e){return t?":not("+e.trim()+")":e}function G0(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!$t(s)&&(e+=Sv(o,i),i=""),r=s,o=o||!$t(r);n++}return i!==""&&(e+=Sv(o,i)),e}function q0(t){return t.map(G0).join(",")}function W0(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!$t(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var zt={};function zh(t,e,n,r,i,o,s,a,c,l,u){let d=Re+r,p=d+i,f=K0(d,p),g=typeof l=="function"?l():l;return f[x]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function K0(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:zt);return n}function Q0(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=zh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Gh(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Vt]=i,d[L]=r|4|128|8|64|1024,(l!==null||t&&t[L]&2048)&&(d[L]|=2048),Rf(d),d[Me]=d[jr]=t,d[Se]=n,d[sn]=s||t&&t[sn],d[ve]=a||t&&t[ve],d[An]=c||t&&t[An]||null,d[Ct]=o,d[Mn]=E0(),d[Ui]=u,d[Cf]=l,d[ut]=e.type==2?t[ut]:d,d}function Y0(t,e,n){let r=Bt(e,t),i=Q0(n),o=t[sn].rendererFactory,s=qh(t,Gh(t,i,null,M_(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function M_(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function R_(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function qh(t,e){return t[$i]?t[Df][Dt]=e:t[$i]=e,t[Df]=e,e}function Z(t=1){N_(Be(),H(),ar()+t,!1)}function N_(t,e,n,r){if(!r)if((e[L]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Lc(e,o,n)}else{let o=t.preOrderHooks;o!==null&&jc(e,o,0,n)}cr(n)}var fl=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(fl||{});function ph(t,e,n,r){let i=P(null);try{let[o,s,a]=t.inputs[n],c=null;(s&fl.SignalBased)!==0&&(c=e[o][et]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,c,r,n,o):Gv(e,c,o,r)}finally{P(i)}}var hn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(hn||{}),Z0;function Wh(t,e){return Z0(t,e)}var qr=new Set,hl=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(hl||{}),Yr=new I(""),Iv=new Set;function ht(t){Iv.has(t)||(Iv.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Kh=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=C({token:t,providedIn:"root",factory:()=>new t})}return t})(),x_=[0,1,2,3],O_=(()=>{class t{ngZone=_(ue);scheduler=_(Jn);errorHandler=_(on,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){_(Yr,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ne(Y.AfterRenderHooksStart),this.executing=!0;for(let r of x_)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ne(Y.AfterRenderHooksEnd)}register(n){let{view:r}=n;r!==void 0?((r[Ur]??=[]).push(n),zi(r),r[L]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(hl.AFTER_NEXT_RENDER,n):n()}static \u0275prov=C({token:t,providedIn:"root",factory:()=>new t})}return t})(),Yc=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ur];e&&(this.view[Ur]=e.filter(n=>n!==this))}};function Ds(t,e){let n=e?.injector??_(nt);return ht("NgAfterNextRender"),X0(t,n,e,!0)}function J0(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function X0(t,e,n,r){let i=e.get(Kh);i.impl??=e.get(O_);let o=e.get(Yr,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(dn):null,a=e.get(Oc,null,{optional:!0}),c=new Yc(i.impl,J0(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var k_=new I("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:_(Ce)})});function P_(t,e,n){let r=t.get(k_);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function eI(t,e){let n=t.get(k_);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function tI(t,e){for(let[n,r]of e)P_(t,r.animateFns)}function Tv(t,e,n,r){let i=t?.[Br]?.enter;e!==null&&i&&i.has(n.index)&&tI(r,i)}function Qi(t,e,n,r,i,o,s,a){if(i!=null){let c,l=!1;Ut(i)?c=i:cn(i)&&(l=!0,i=i[Vt]);let u=St(i);t===0&&r!==null?(Tv(a,r,o,n),s==null?E_(e,r,u):Qc(e,r,u,s||null,!0)):t===1&&r!==null?(Tv(a,r,o,n),Qc(e,r,u,s||null,!0)):t===2?Av(a,o,n,d=>{b_(e,u,l,d)}):t===3&&Av(a,o,n,()=>{e.destroyNode(u)}),c!=null&&pI(e,t,n,c,o,r,s)}}function nI(t,e){F_(t,e),e[Vt]=null,e[Ct]=null}function rI(t,e,n,r,i,o){r[Vt]=i,r[Ct]=e,gl(t,r,n,1,i,o)}function F_(t,e){e[sn].changeDetectionScheduler?.notify(9),gl(t,e,e[ve],2,null,null)}function iI(t){let e=t[$i];if(!e)return th(t[x],t);for(;e;){let n=null;if(cn(e))n=e[$i];else{let r=e[_e];r&&(n=r)}if(!n){for(;e&&!e[Dt]&&e!==t;)cn(e)&&th(e[x],e),e=e[Me];e===null&&(e=t),cn(e)&&th(e[x],e),n=e&&e[Dt]}e=n}}function Qh(t,e){let n=t[$r],r=n.indexOf(e);n.splice(r,1)}function pl(t,e){if(Hr(e))return;let n=e[ve];n.destroyNode&&gl(t,e,n,3,null,null),iI(e)}function th(t,e){if(Hr(e))return;let n=P(null);try{e[L]&=-129,e[L]|=256,e[dt]&&zo(e[dt]),aI(t,e),sI(t,e),e[x].type===1&&e[ve].destroy();let r=e[nr];if(r!==null&&Ut(e[Me])){r!==e[Me]&&Qh(r,e);let i=e[an];i!==null&&i.detachView(t)}fh(e)}finally{P(n)}}function Av(t,e,n,r){let i=t?.[Br];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&qr.add(t[Mn]),P_(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),oI(t,r)}else t&&qr.delete(t[Mn]),r(!1)},i)}function oI(t,e){let n=t[Br]?.running;if(n){n.then(()=>{t[Br].running=void 0,qr.delete(t[Mn]),e(!0)});return}e(!1)}function sI(t,e){let n=t.cleanup,r=e[Bi];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Bi]=null);let i=e[Cn];if(i!==null){e[Cn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[as];if(o!==null){e[as]=null;for(let s of o)s.destroy()}}function aI(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Gr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ne(Y.LifecycleHookStart,a,c);try{c.call(a)}finally{ne(Y.LifecycleHookEnd,a,c)}}else{ne(Y.LifecycleHookStart,i,o);try{o.call(i)}finally{ne(Y.LifecycleHookEnd,i,o)}}}}}function cI(t,e,n){return lI(t,e.parent,n)}function lI(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Vt];if(ir(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Ht.None||i===Ht.Emulated)return null}return Bt(r,n)}function uI(t,e,n){return fI(t,e,n)}function dI(t,e,n){return t.type&40?Bt(t,n):null}var fI=dI,Mv;function Yh(t,e,n,r){let i=cI(t,r,e),o=e[ve],s=r.parent||e[Ct],a=uI(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Cv(o,i,n[c],a,!1);else Cv(o,i,n,a,!1);Mv!==void 0&&Mv(o,r,e,n,i)}function ds(t,e){if(e!==null){let n=e.type;if(n&3)return Bt(e,t);if(n&4)return gh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ds(t,r);{let i=t[e.index];return Ut(i)?gh(-1,i):St(i)}}else{if(n&128)return ds(t,e.next);if(n&32)return Wh(e,t)()||St(t[e.index]);{let r=L_(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Zn(t[ut]);return ds(i,r)}else return ds(t,e.next)}}}return null}function L_(t,e){if(e!==null){let r=t[ut][Ct],i=e.projection;return r.projection[i]}return null}function gh(t,e){let n=_e+t+1;if(n<e.length){let r=e[n],i=r[x].firstChild;if(i!==null)return ds(r,i)}return e[rr]}function Zh(t,e,n,r,i,o,s){for(;n!=null;){let a=r[An];if(n.type===128){n=n.next;continue}let c=r[n.index],l=n.type;if(s&&e===0&&(c&&Ji(St(c),r),n.flags|=2),!Uh(n))if(l&8)Zh(t,e,n.child,r,i,o,!1),Qi(e,t,a,i,c,n,o,r);else if(l&32){let u=Wh(n,r),d;for(;d=u();)Qi(e,t,a,i,d,n,o,r);Qi(e,t,a,i,c,n,o,r)}else l&16?hI(t,e,r,n,i,o):Qi(e,t,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function gl(t,e,n,r,i,o){Zh(n,r,t.firstChild,e,i,o,!1)}function hI(t,e,n,r,i,o){let s=n[ut],c=s[Ct].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Qi(e,t,n[An],i,u,r,o,n)}else{let l=c,u=s[Me];s_(r)&&(l.flags|=128),Zh(t,e,l,u,i,o,!0)}}function pI(t,e,n,r,i,o,s){let a=r[rr],c=St(r);a!==c&&Qi(e,t,n,o,a,i,s);for(let l=_e;l<r.length;l++){let u=r[l];gl(u[x],u,t,e,o,a)}}function gI(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:hn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=hn.Important),t.setStyle(n,r,i,o))}}function j_(t,e,n,r,i){let o=ar(),s=r&2;try{cr(-1),s&&e.length>Re&&N_(t,e,Re,!1);let a=s?Y.TemplateUpdateStart:Y.TemplateCreateStart;ne(a,i,n),n(r,i)}finally{cr(o);let a=s?Y.TemplateUpdateEnd:Y.TemplateCreateEnd;ne(a,i,n)}}function V_(t,e,n){DI(t,e,n),(n.flags&64)===64&&CI(t,e,n)}function Jh(t,e,n=Bt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function mI(t,e,n,r){let o=r.get(p_,h_)||n===Ht.ShadowDom||n===Ht.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return yI(s),s}function yI(t){vI(t)}var vI=()=>null;function _I(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function wI(t,e,n,r,i,o){let s=e[x];if(Xh(t,s,e,n,r)){ir(t)&&bI(e,t.index);return}t.type&3&&(n=_I(n)),EI(t,e,n,r,i,o)}function EI(t,e,n,r,i,o){if(t.type&3){let s=Bt(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function bI(t,e){let n=It(e,t);n[L]&16||(n[L]|=64)}function DI(t,e,n){let r=n.directiveStart,i=n.directiveEnd;ir(n)&&Y0(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||qc(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],c=hs(e,t,s,n);if(Ji(c,e),o!==null&&MI(e,s-r,c,a,n,o),ln(a)){let l=It(n.index,e);l[Se]=hs(e,t,s,n)}}}function CI(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=iv();try{cr(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Ic(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&SI(c,l)}}finally{cr(-1),Ic(s)}}function SI(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function II(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];$0(e,o.selectors,!1)&&(r??=[],ln(o)?r.unshift(o):r.push(o))}return r}function TI(t,e,n,r,i,o){let s=Bt(t,e);AI(e[ve],s,o,t.value,n,r,i)}function AI(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?rs(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function MI(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];ph(r,n,c,l)}}function U_(t,e,n,r,i){let o=Re+n,s=e[x],a=i(s,e,t,r,n);e[o]=a,Gi(t,!0);let c=t.type===2;return c?(D_(e[ve],a,t),(Ky()===0||Dc(t))&&Ji(a,e),Qy()):Ji(a,e),Nc()&&(!c||!Uh(t))&&Yh(s,e,a,t),t}function B_(t){let e=t;return Vf()?Xy():(e=e.parent,Gi(e,!1)),e}function RI(t,e){let n=t[An];if(!n)return;let r;try{r=n.get(ft,null)}catch{r=null}r?.(e)}function Xh(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=e.data[l];ph(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=e.data[c];ph(u,l,r,i),a=!0}return a}function NI(t,e){let n=It(e,t),r=n[x];xI(r,n);let i=n[Vt];i!==null&&n[Ui]===null&&(n[Ui]=g_(i,n[An])),ne(Y.ComponentStart);try{ep(r,n,n[Se])}finally{ne(Y.ComponentEnd,n[Se])}}function xI(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ep(t,e,n){Ac(e);try{let r=t.viewQuery;r!==null&&hh(1,r,n);let i=t.template;i!==null&&j_(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[an]?.finishViewCreation(t),t.staticContentQueries&&m_(t,e),t.staticViewQueries&&hh(2,t.viewQuery,n);let o=t.components;o!==null&&OI(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[L]&=-5,Mc()}}function OI(t,e){for(let n=0;n<e.length;n++)NI(t,e[n])}function ml(t,e,n,r){let i=P(null);try{let o=e.tView,a=t[L]&4096?4096:16,c=Gh(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[nr]=l;let u=t[an];return u!==null&&(c[an]=u.createEmbeddedView(o)),ep(o,c,n),c}finally{P(i)}}function ps(t,e){return!e||e.firstChild===null||s_(t)}function gs(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(St(o)),Ut(o)&&$_(o,r);let s=n.type;if(s&8)gs(t,e,n.child,r);else if(s&32){let a=Wh(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=L_(e,n);if(Array.isArray(a))r.push(...a);else{let c=Zn(e[ut]);gs(c[x],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function $_(t,e){for(let n=_e;n<t.length;n++){let r=t[n],i=r[x].firstChild;i!==null&&gs(r[x],r,i,e)}t[rr]!==t[Vt]&&e.push(t[rr])}function H_(t){if(t[Ur]!==null){for(let e of t[Ur])e.impl.addSequence(e);t[Ur].length=0}}var z_=[];function kI(t){return t[dt]??PI(t)}function PI(t){let e=z_.pop()??Object.create(LI);return e.lView=t,e}function FI(t){t.lView[dt]!==t&&(t.lView=null,z_.push(t))}var LI=z(w({},Bo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{zi(t.lView)},consumerOnSignalRead(){this.lView[dt]=this}});function jI(t){let e=t[dt]??Object.create(VI);return e.lView=t,e}var VI=z(w({},Bo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Zn(t.lView);for(;e&&!G_(e[x]);)e=Zn(e);e&&Nf(e)},consumerOnSignalRead(){this.lView[dt]=this}});function G_(t){return t.type!==2}function q_(t){if(t[as]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[as])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[L]&8192)}}var UI=100;function W_(t,e=0){let r=t[sn].rendererFactory,i=!1;i||r.begin?.();try{BI(t,e)}finally{i||r.end?.()}}function BI(t,e){let n=Uf();try{Bf(!0),mh(t,e);let r=0;for(;us(t);){if(r===UI)throw new E(103,!1);r++,mh(t,1)}}finally{Bf(n)}}function $I(t,e,n,r){if(Hr(e))return;let i=e[L],o=!1,s=!1;Ac(e);let a=!0,c=null,l=null;o||(G_(t)?(l=kI(e),c=Ho(l)):Pa()===null?(a=!1,l=jI(e),c=Ho(l)):e[dt]&&(zo(e[dt]),e[dt]=null));try{Rf(e),ev(t.bindingStartIndex),n!==null&&j_(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let f=t.preOrderCheckHooks;f!==null&&Lc(e,f,null)}else{let f=t.preOrderHooks;f!==null&&jc(e,f,0,null),Xf(e,0)}if(s||HI(e),q_(e),K_(e,0),t.contentQueries!==null&&m_(t,e),!o)if(u){let f=t.contentCheckHooks;f!==null&&Lc(e,f)}else{let f=t.contentHooks;f!==null&&jc(e,f,1),Xf(e,1)}GI(t,e);let d=t.components;d!==null&&Y_(e,d,0);let p=t.viewQuery;if(p!==null&&hh(2,p,r),!o)if(u){let f=t.viewCheckHooks;f!==null&&Lc(e,f)}else{let f=t.viewHooks;f!==null&&jc(e,f,2),Xf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[bc]){for(let f of e[bc])f();e[bc]=null}o||(H_(e),e[L]&=-73)}catch(u){throw o||zi(e),u}finally{l!==null&&(Fa(l,c),a&&FI(l)),Mc()}}function K_(t,e){for(let n=c_(t);n!==null;n=l_(n))for(let r=_e;r<n.length;r++){let i=n[r];Q_(i,e)}}function HI(t){for(let e=c_(t);e!==null;e=l_(e)){if(!(e[L]&2))continue;let n=e[$r];for(let r=0;r<n.length;r++){let i=n[r];Nf(i)}}}function zI(t,e,n){ne(Y.ComponentStart);let r=It(e,t);try{Q_(r,n)}finally{ne(Y.ComponentEnd,r[Se])}}function Q_(t,e){Cc(t)&&mh(t,e)}function mh(t,e){let r=t[x],i=t[L],o=t[dt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&La(o)),s||=!1,o&&(o.dirty=!1),t[L]&=-9217,s)$I(r,t,r.template,t[Se]);else if(i&8192){let a=P(null);try{q_(t),K_(t,1);let c=r.components;c!==null&&Y_(t,c,1),H_(t)}finally{P(a)}}}function Y_(t,e,n){for(let r=0;r<e.length;r++)zI(t,e[r],n)}function GI(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)cr(~i);else{let o=i,s=n[++r],a=n[++r];rv(s,o);let c=e[o];ne(Y.HostBindingsUpdateStart,c);try{a(2,c)}finally{ne(Y.HostBindingsUpdateEnd,c)}}}}finally{cr(-1)}}function tp(t,e){let n=Uf()?64:1088;for(t[sn].changeDetectionScheduler?.notify(e);t;){t[L]|=n;let r=Zn(t);if(Hi(t)&&!r)return t;t=r}return null}function Z_(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function J_(t,e){let n=_e+e;if(n<t.length)return t[n]}function yl(t,e,n,r=!0){let i=e[x];if(qI(i,e,t,n),r){let s=gh(n,t),a=e[ve],c=a.parentNode(t[rr]);c!==null&&rI(i,t[Ct],a,e,c,s)}let o=e[Ui];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function X_(t,e){let n=ms(t,e);return n!==void 0&&pl(n[x],n),n}function ms(t,e){if(t.length<=_e)return;let n=_e+e,r=t[n];if(r){let i=r[nr];i!==null&&i!==t&&Qh(i,r),e>0&&(t[n-1][Dt]=r[Dt]);let o=is(t,_e+e);nI(r[x],r);let s=o[an];s!==null&&s.detachView(o[x]),r[Me]=null,r[Dt]=null,r[L]&=-129}return r}function qI(t,e,n,r){let i=_e+r,o=n.length;r>0&&(n[i-1][Dt]=e),r<o-_e?(e[Dt]=n[i],yf(n,_e+r,e)):(n.push(e),e[Dt]=null),e[Me]=n;let s=e[nr];s!==null&&n!==s&&ew(s,e);let a=e[an];a!==null&&a.insertView(t),Sc(e),e[L]|=128}function ew(t,e){let n=t[$r],r=e[Me];if(cn(r))t[L]|=2;else{let i=r[Me][ut];e[ut]!==i&&(t[L]|=2)}n===null?t[$r]=[e]:n.push(e)}var lr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[x];return gs(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Se]}set context(e){this._lView[Se]=e}get destroyed(){return Hr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Me];if(Ut(e)){let n=e[cs],r=n?n.indexOf(this):-1;r>-1&&(ms(e,r),is(n,r))}this._attachedToViewContainer=!1}pl(this._lView[x],this._lView)}onDestroy(e){xf(this._lView,e)}markForCheck(){tp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[L]&=-129}reattach(){Sc(this._lView),this._lView[L]|=128}detectChanges(){this._lView[L]|=1024,W_(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Hi(this._lView),n=this._lView[nr];n!==null&&!e&&Qh(n,this._lView),F_(this._lView[x],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=e;let n=Hi(this._lView),r=this._lView[nr];r!==null&&!n&&ew(r,this._lView),Sc(this._lView)}};var Xi=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=WI;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=ml(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new lr(o)}}return t})();function WI(){return np($e(),H())}function np(t,e){return t.type&4?new Xi(e,t,to(t,e)):null}function vl(t,e,n,r,i){let o=t.data[e];if(o===null)o=KI(t,e,n,r,i),nv()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Jy();o.injectorIndex=s===null?-1:s.injectorIndex}return Gi(o,!0),o}function KI(t,e,n,r,i){let o=jf(),s=Vf(),a=s?o:o&&o.parent,c=t.data[e]=YI(t,a,n,e,r,i);return QI(t,c,o,s),c}function QI(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function YI(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Zy()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ZI(t){let e=t[Sf]??[],r=t[Me][ve],i=[];for(let o of e)o.data[f_]!==void 0?i.push(o):JI(o,r);t[Sf]=i}function JI(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[d_];for(;n<i;){let o=r.nextSibling;b_(e,r,!1),r=o,n++}}}var XI=()=>null,eT=()=>null;function yh(t,e){return XI(t,e)}function tw(t,e,n){return eT(t,e,n)}var nw=class{},_l=class{},vh=class{resolveComponentFactory(e){throw new E(917,!1)}},Cs=class{static NULL=new vh},Nn=class{},Gt=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>tT()}return t})();function tT(){let t=H(),e=$e(),n=It(e.index,t);return(cn(n)?n:t)[ve]}var rw=(()=>{class t{static \u0275prov=C({token:t,providedIn:"root",factory:()=>null})}return t})();var Uc={},_h=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Uc,r);return i!==Uc||n===Uc?i:this.parentInjector.get(e,n,r)}};function Zc(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=of(i,a);else if(o==2){let c=a,l=e[++s];r=of(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function W(t,e=0){let n=H();if(n===null)return N(t,e);let r=$e();return r_(r,n,Ve(t),e)}function rp(){let t="invalid";throw new Error(t)}function nT(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}oT(t,e,n,a,o,c,l)}o!==null&&r!==null&&rT(n,r,o)}function rT(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new E(-301,!1);r.push(e[i],o)}}function iT(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function oT(t,e,n,r,i,o,s){let a=r.length,c=null;for(let p=0;p<a;p++){let f=r[p];c===null&&ln(f)&&(c=f,iT(t,n,p)),uh(qc(n,e),t,f.type)}dT(n,t.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let p=0;p<a;p++){let f=r[p];f.providersResolver&&f.providersResolver(f)}let l=!1,u=!1,d=R_(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let p=0;p<a;p++){let f=r[p];if(n.mergedAttrs=Zi(n.mergedAttrs,f.hostAttrs),aT(t,n,e,d,f),uT(d,f,i),s!==null&&s.has(f)){let[m,y]=s.get(f);n.directiveToIndex.set(f.type,[d,m+n.directiveStart,y+n.directiveStart])}else(o===null||!o.has(f))&&n.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let g=f.type.prototype;!l&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!u&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}sT(t,n,o)}function sT(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))Rv(0,e,i,r),Rv(1,e,i,r),xv(e,r,!1);else{let o=n.get(i);Nv(0,e,o,r),Nv(1,e,o,r),xv(e,r,!0)}}}function Rv(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),iw(e,o)}}function Nv(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),iw(e,s)}}function iw(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function xv(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Hh(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function aT(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Yn(i.type,!0)),s=new Gr(o,ln(i),W,null);t.blueprint[r]=s,n[r]=s,cT(t,e,r,R_(t,n,i.hostVars,zt),i)}function cT(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;lT(s)!=a&&s.push(a),s.push(n,r,o)}}function lT(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function uT(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ln(e)&&(n[""]=t)}}function dT(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ow(t,e,n,r,i,o,s,a){let c=e[x],l=c.consts,u=un(l,s),d=vl(c,t,n,r,u);return o&&nT(c,e,d,un(l,a),i),d.mergedAttrs=Zi(d.mergedAttrs,d.attrs),d.attrs!==null&&Zc(d,d.attrs,!1),d.mergedAttrs!==null&&Zc(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function sw(t,e){n0(t,e),If(e)&&t.queries.elementEnd(e)}function fT(t,e,n,r,i,o){let s=e.consts,a=un(s,i),c=vl(e,t,n,r,a);if(c.mergedAttrs=Zi(c.mergedAttrs,c.attrs),o!=null){let l=un(s,o);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&Zc(c,c.attrs,!1),c.mergedAttrs!==null&&Zc(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function aw(t,e,n){return t[e]=n}function hT(t,e){return t[e]}function Zr(t,e,n){if(n===zt)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Bc(t,e,n){return function r(i){let o=ir(t)?It(t.index,e):e;tp(o,5);let s=e[Se],a=Ov(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=Ov(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Ov(t,e,n,r){let i=P(null);try{return ne(Y.OutputStart,e,n),n(r)!==!1}catch(o){return RI(t,o),!1}finally{ne(Y.OutputEnd,e,n),P(i)}}function cw(t,e,n,r,i,o,s,a){let c=Dc(t),l=!1,u=null;if(!r&&c&&(u=gT(e,n,o,t.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=Bt(t,n),p=r?r(d):d;I0(n,p,o,a);let f=i.listen(p,o,a);if(!pT(o)){let g=r?m=>r(St(m[t.index])):t.index;lw(g,e,n,o,a,f,!1)}}return l}function pT(t){return t.startsWith("animation")||t.startsWith("transition")}function gT(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Bi],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function lw(t,e,n,r,i,o,s){let a=e.firstCreatePass?kf(e):null,c=Of(n),l=c.length;c.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function kv(t,e,n,r,i,o){let s=e[n],a=e[x],l=a.data[n].outputs[r],d=s[l].subscribe(o);lw(t.index,a,e,i,o,d,!0)}var wh=Symbol("BINDING");var Jc=class extends Cs{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Tn(e);return new Wr(n,this.ngModule)}};function mT(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&fl.SignalBased)!==0};return i&&(o.transform=i),o})}function yT(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function vT(t,e,n){let r=e instanceof Ce?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new _h(n,r):n}function _T(t){let e=t.get(Nn,null);if(e===null)throw new E(407,!1);let n=t.get(rw,null),r=t.get(Jn,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function wT(t,e){let n=uw(t);return w_(e,n,n==="svg"?Tf:n==="math"?By:null)}function uw(t){return(t.selectors[0][0]||"div").toLowerCase()}var Wr=class extends _l{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=mT(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=yT(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=q0(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){ne(Y.DynamicComponentStart);let a=P(null);try{let c=this.componentDef,l=ET(r,c,s,o),u=vT(c,i||this.ngModule,e),d=_T(u),p=d.rendererFactory.createRenderer(null,c),f=r?mI(p,r,c.encapsulation,u):wT(c,p),g=s?.some(Pv)||o?.some(v=>typeof v!="function"&&v.bindings.some(Pv)),m=Gh(null,l,null,512|M_(c),null,null,d,p,u,null,g_(f,u,!0));m[Re]=f,Ac(m);let y=null;try{let v=ow(Re,m,2,"#host",()=>l.directiveRegistry,!0,0);D_(p,f,v),Ji(f,m),V_(l,m,v),y_(l,v,m),sw(l,v),n!==void 0&&DT(v,this.ngContentSelectors,n),y=It(v.index,m),m[Se]=y[Se],ep(l,m,null)}catch(v){throw y!==null&&fh(y),fh(m),v}finally{ne(Y.DynamicComponentEnd),Mc()}return new Xc(this.componentType,m,!!g)}finally{P(a)}}};function ET(t,e,n,r){let i=t?["ng-version","21.1.0"]:W0(e.selectors[0]),o=null,s=null,a=0;if(n)for(let u of n)a+=u[wh].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let p of d.bindings){a+=p[wh].requiredVars;let f=u+1;p.create&&(p.targetIdx=f,(o??=[]).push(p)),p.update&&(p.targetIdx=f,(s??=[]).push(p))}}let c=[e];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,p=pf(d);c.push(p)}return zh(0,null,bT(o,s),1,a,c,null,null,null,[i],null)}function bT(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function Pv(t){let e=t[wh].kind;return e==="input"||e==="twoWay"}var Xc=class extends nw{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ls(n[x],Re),this.location=to(this._tNode,n),this.instance=It(this._tNode.index,n)[Se],this.hostView=this.changeDetectorRef=new lr(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Xh(r,i[x],i,e,n);this.previousInputValues.set(e,n);let s=It(r.index,i);tp(s,1)}get injector(){return new zr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function DT(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Jr=(()=>{class t{static __NG_ELEMENT_ID__=CT}return t})();function CT(){let t=$e();return fw(t,H())}var ST=Jr,dw=class extends ST{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return to(this._hostTNode,this._hostLView)}get injector(){return new zr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Fh(this._hostTNode,this._hostLView);if(Zv(e)){let n=zc(e,this._hostLView),r=Hc(e),i=n[x].data[r+8];return new zr(i,n)}else return new zr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Fv(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-_e}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=yh(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,ps(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let c=e&&!ZS(e),l;if(c)l=n;else{let y=n||{};l=y.index,r=y.injector,i=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef,s=y.directives,a=y.bindings}let u=c?e:new Wr(Tn(e)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let v=(c?d:this.parentInjector).get(Ce,null);v&&(o=v)}let p=Tn(u.componentType??{}),f=yh(this._lContainer,p?.id??null),g=f?.firstChild??null,m=u.create(d,i,g,o,s,a);return this.insertImpl(m.hostView,l,ps(this._hostTNode,f)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(zy(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Me],l=new dw(c,c[Ct],c[Me]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return yl(s,i,o,r),e.attachToViewContainerRef(),yf(nh(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Fv(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ms(this._lContainer,n);r&&(is(nh(this._lContainer),n),pl(r[x],r))}detach(e){let n=this._adjustIndex(e,-1),r=ms(this._lContainer,n);return r&&is(nh(this._lContainer),n)!=null?new lr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Fv(t){return t[cs]}function nh(t){return t[cs]||(t[cs]=[])}function fw(t,e){let n,r=e[t.index];return Ut(r)?n=r:(n=Z_(r,e,null,t),e[t.index]=n,qh(e,n)),TT(n,e,t,r),new dw(n,t,e)}function IT(t,e){let n=t[ve],r=n.createComment(""),i=Bt(e,t),o=n.parentNode(i);return Qc(n,o,r,n.nextSibling(i),!1),r}var TT=RT,AT=()=>!1;function MT(t,e,n){return AT(t,e,n)}function RT(t,e,n,r){if(t[rr])return;let i;n.type&8?i=St(r):i=IT(e,n),t[rr]=i}var Eh=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},bh=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)ip(e,n).matches!==null&&this.queries[n].setDirty()}},Dh=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=jT(e):this.predicate=e}},Ch=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Sh=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,NT(n,o)),this.matchTNodeWithReadOption(e,n,Vc(n,e,o,!1,!1))}else r===Xi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Vc(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ze||i===Jr||i===Xi&&n.type&4)this.addMatch(n.index,-2);else{let o=Vc(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function NT(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function xT(t,e){return t.type&11?to(t,e):t.type&4?np(t,e):null}function OT(t,e,n,r){return n===-1?xT(e,t):n===-2?kT(t,e,r):hs(t,t[x],n,e)}function kT(t,e,n){if(n===Ze)return to(e,t);if(n===Xi)return np(e,t);if(n===Jr)return fw(e,t)}function hw(t,e,n,r){let i=e[an].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(OT(e,u,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Ih(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=hw(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let d=_e;d<u.length;d++){let p=u[d];p[nr]===p[Me]&&Ih(p[x],p,l,r)}if(u[$r]!==null){let d=u[$r];for(let p=0;p<d.length;p++){let f=d[p];Ih(f[x],f,l,r)}}}}}return r}function PT(t,e){return t[an].queries[e].queryList}function FT(t,e,n){let r=new Wc((n&4)===4);return Wy(t,e,r,r.destroy),(e[an]??=new bh).queries.push(new Eh(r))-1}function LT(t,e,n,r){let i=Be();if(i.firstCreatePass){let o=$e();VT(i,new Dh(e,n,r),o.index),UT(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return FT(i,H(),n)}function jT(t){return t.split(",").map(e=>e.trim())}function VT(t,e,n){t.queries===null&&(t.queries=new Ch),t.queries.track(new Sh(e,n))}function UT(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function ip(t,e){return t.queries.getByIndex(e)}function BT(t,e){let n=t[x],r=ip(n,e);return r.crossesNgTemplate?Ih(n,t,e,[]):hw(n,t,r,e)}var Kr=class{},wl=class{};var el=class extends Kr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Jc(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=hf(e);this._bootstrapComponents=T_(o.bootstrap),this._r3Injector=Wf(e,n,[{provide:Kr,useValue:this},{provide:Cs,useValue:this.componentFactoryResolver},...r],Sn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},tl=class extends wl{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new el(this.moduleType,e,[])}};var ys=class extends Kr{injector;componentFactoryResolver=new Jc(this);instance=null;constructor(e){super();let n=new Fr([...e.providers,{provide:Kr,useValue:this},{provide:Cs,useValue:this.componentFactoryResolver}],e.parent||ss(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function no(t,e,n=null){return new ys({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var $T=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=wf(!1,n.type),i=r.length>0?no([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=C({token:t,providedIn:"environment",factory:()=>new t(N(Ce))})}return t})();function Je(t){return _s(()=>{let e=pw(t),n=z(w({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Lh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get($T).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ht.Emulated,styles:t.styles||lt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&ht("NgStandalone"),gw(n);let r=t.dependencies;return n.directiveDefs=Lv(r,HT),n.pipeDefs=Lv(r,Iy),n.id=qT(n),n})}function HT(t){return Tn(t)||pf(t)}function qt(t){return _s(()=>({type:t.type,bootstrap:t.bootstrap||lt,declarations:t.declarations||lt,imports:t.imports||lt,exports:t.exports||lt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function zT(t,e){if(t==null)return er;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=fl.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function GT(t){if(t==null)return er;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Ke(t){return _s(()=>{let e=pw(t);return gw(e),e})}function El(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function pw(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||er,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||lt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:zT(t.inputs,e),outputs:GT(t.outputs),debugInfo:null}}function gw(t){t.features?.forEach(e=>e(t))}function Lv(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function qT(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function WT(t){return Object.getPrototypeOf(t.prototype).constructor}function xn(t){let e=WT(t.type),n=!0,r=[t];for(;e;){let i;if(ln(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new E(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=rh(t.inputs),s.declaredInputs=rh(t.declaredInputs),s.outputs=rh(t.outputs);let a=i.hostBindings;a&&JT(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&YT(t,c),l&&ZT(t,l),KT(t,i),Sy(t.outputs,i.outputs),ln(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===xn&&(n=!1)}}e=Object.getPrototypeOf(e)}QT(r)}function KT(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function QT(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Zi(i.hostAttrs,n=Zi(n,i.hostAttrs))}}function rh(t){return t===er?{}:t===lt?[]:t}function YT(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function ZT(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function JT(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function XT(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Zi(t.mergedAttrs,t.attrs);let u=t.tView=zh(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),u.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Gi(t,!1);let c=eA(n,e,t,r);Nc()&&Yh(n,e,c,t),Ji(c,e);let l=Z_(c,e,c,t);e[r+Re]=l,qh(e,l),MT(l,t,e)}function nl(t,e,n,r,i,o,s,a,c,l,u){let d=n+Re,p;if(e.firstCreatePass){if(p=vl(e,d,4,s||null,a||null),l!=null){let f=un(e.consts,l);p.localNames=[];for(let g=0;g<f.length;g+=2)p.localNames.push(f[g],-1)}}else p=e.data[d];return XT(p,t,e,n,r,i,o,c),l!=null&&Jh(t,p,u),p}var eA=tA;function tA(t,e,n,r){return xc(!0),e[ve].createComment("")}var op=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var sp=new I("");function On(t){return!!t&&typeof t.then=="function"}function bl(t){return!!t&&typeof t.subscribe=="function"}var ap=new I("");function Dl(t){return Vi([{provide:ap,multi:!0,useValue:t}])}var cp=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=_(ap,{optional:!0})??[];injector=_(nt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Ue(this.injector,i);if(On(o))n.push(o);else if(bl(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ss=new I("");function mw(){Md(()=>{let t="";throw new E(600,t)})}function yw(t){return t.isBoundToModule}var nA=10;var dr=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=_(ft);afterRenderManager=_(Kh);zonelessEnabled=_(Ki);rootEffectScheduler=_(Jf);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new le;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=_(Rn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ie(n=>!n))}constructor(){_(Yr,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=_(Ce);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=nt.NULL){return this._injector.get(ue).run(()=>{ne(Y.BootstrapComponentStart);let s=n instanceof _l;if(!this._injector.get(cp).done){let g="";throw new E(405,g)}let c;s?c=n:c=this._injector.get(Cs).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=yw(c)?void 0:this._injector.get(Kr),u=r||c.selector,d=c.create(i,[],u,l),p=d.location.nativeElement,f=d.injector.get(sp,null);return f?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),fs(this.components,d),f?.unregisterApplication(p)}),this._loadComponent(d),ne(Y.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ne(Y.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(hl.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ne(Y.ChangeDetectionEnd),new E(101,!1);let n=P(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,P(n),this.afterTick.next(),ne(Y.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Nn,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<nA;){ne(Y.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ne(Y.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!us(i))continue;let o=r&&!this.zonelessEnabled?0:1;W_(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>us(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;fs(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Ss,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>fs(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new E(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fs(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function kn(t,e,n,r){let i=H(),o=qi();if(Zr(i,o,e)){let s=Be(),a=qf();TI(a,i,t,e,n,r)}return kn}var zU=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Th=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function ih(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function rA(t,e,n,r){let i,o,s=0,a=t.length-1,c=void 0;if(Array.isArray(e)){P(r);let l=e.length-1;for(P(null);s<=a&&s<=l;){let u=t.at(s),d=e[s],p=ih(s,u,s,d,n);if(p!==0){p<0&&t.updateValue(s,d),s++;continue}let f=t.at(a),g=e[l],m=ih(a,f,l,g,n);if(m!==0){m<0&&t.updateValue(a,g),a--,l--;continue}let y=n(s,u),v=n(a,f),A=n(s,d);if(Object.is(A,v)){let b=n(l,g);Object.is(b,y)?(t.swap(s,a),t.updateValue(a,g),l--,a--):t.move(a,s),t.updateValue(s,d),s++;continue}if(i??=new rl,o??=Vv(t,s,a,n),Ah(t,i,s,A))t.updateValue(s,d),s++,a++;else if(o.has(A))i.set(y,t.detach(s)),a--;else{let b=t.create(s,e[s]);t.attach(s,b),s++,a++}}for(;s<=l;)jv(t,i,n,s,e[s]),s++}else if(e!=null){P(r);let l=e[Symbol.iterator]();P(null);let u=l.next();for(;!u.done&&s<=a;){let d=t.at(s),p=u.value,f=ih(s,d,s,p,n);if(f!==0)f<0&&t.updateValue(s,p),s++,u=l.next();else{i??=new rl,o??=Vv(t,s,a,n);let g=n(s,p);if(Ah(t,i,s,g))t.updateValue(s,p),s++,a++,u=l.next();else if(!o.has(g))t.attach(s,t.create(s,p)),s++,a++,u=l.next();else{let m=n(s,d);i.set(m,t.detach(s)),a--}}}for(;!u.done;)jv(t,i,n,t.length,u.value),u=l.next()}for(;s<=a;)t.destroy(t.detach(a--));i?.forEach(l=>{t.destroy(l)})}function Ah(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function jv(t,e,n,r,i){if(Ah(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function Vv(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var rl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Pn(t,e,n,r,i,o,s,a){ht("NgControlFlow");let c=H(),l=Be(),u=un(l.consts,o);return nl(c,l,t,e,n,r,i,u,256,s,a),lp}function lp(t,e,n,r,i,o,s,a){ht("NgControlFlow");let c=H(),l=Be(),u=un(l.consts,o);return nl(c,l,t,e,n,r,i,u,512,s,a),lp}function Fn(t,e){ht("NgControlFlow");let n=H(),r=qi(),i=n[r]!==zt?n[r]:-1,o=i!==-1?il(n,Re+i):void 0,s=0;if(Zr(n,r,t)){let a=P(null);try{if(o!==void 0&&X_(o,s),t!==-1){let c=Re+t,l=il(n,c),u=xh(n[x],c),d=tw(l,u,n),p=ml(n,u,e,{dehydratedView:d});yl(l,p,s,ps(u,d))}}finally{P(a)}}else if(o!==void 0){let a=J_(o,s);a!==void 0&&(a[Se]=e)}}var Mh=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-_e}};function Is(t){return t}function up(t,e){return e}var Rh=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Ln(t,e,n,r,i,o,s,a,c,l,u,d,p){ht("NgControlFlow");let f=H(),g=Be(),m=c!==void 0,y=H(),v=a?s.bind(y[ut][Se]):s,A=new Rh(m,v);y[Re+t]=A,nl(f,g,t+1,e,n,r,i,un(g.consts,o),256),m&&nl(f,g,t+2,c,l,u,d,un(g.consts,p),512)}var Nh=class extends Th{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-_e}at(e){return this.getLView(e)[Se].$implicit}attach(e,n){let r=n[Ui];this.needsIndexUpdate||=e!==this.length,yl(this.lContainer,n,e,ps(this.templateTNode,r)),iA(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,oA(this.lContainer,e),sA(this.lContainer,e)}create(e,n){let r=yh(this.lContainer,this.templateTNode.tView.ssrId);return ml(this.hostLView,this.templateTNode,new Mh(this.lContainer,n,e),{dehydratedView:r})}destroy(e){pl(e[x],e)}updateValue(e,n){this.getLView(e)[Se].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Se].$index=e}getLView(e){return aA(this.lContainer,e)}};function jn(t){let e=P(null),n=ar();try{let r=H(),i=r[x],o=r[n],s=n+1,a=il(r,s);if(o.liveCollection===void 0){let l=xh(i,s);o.liveCollection=new Nh(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(rA(c,t,o.trackByFn,e),c.updateIndexes(),o.hasEmptyBlock){let l=qi(),u=c.length===0;if(Zr(r,l,u)){let d=n+2,p=il(r,d);if(u){let f=xh(i,d),g=tw(p,f,r),m=ml(r,f,void 0,{dehydratedView:g});yl(p,m,0,ps(f,g))}else i.firstUpdatePass&&ZI(p),X_(p,0)}}}finally{P(e)}}function il(t,e){return t[e]}function iA(t,e){if(t.length<=_e)return;let n=_e+e,r=t[n],i=r?r[Br]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[An];eI(o,i),qr.delete(r[Mn]),i.detachedLeaveAnimationFns=void 0}}function oA(t,e){if(t.length<=_e)return;let n=_e+e,r=t[n],i=r?r[Br]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function sA(t,e){return ms(t,e)}function aA(t,e){return J_(t,e)}function xh(t,e){return ls(t,e)}function it(t,e,n){let r=H(),i=qi();if(Zr(r,i,e)){let o=Be(),s=qf();wI(s,r,t,e,r[ve],n)}return it}function Uv(t,e,n,r,i){Xh(e,t,n,i?"class":"style",r)}function he(t,e,n,r){let i=H(),o=i[x],s=t+Re,a=o.firstCreatePass?ow(s,i,2,e,II,Yy(),n,r):o.data[s];if(U_(a,i,t,e,vw),Dc(a)){let c=i[x];V_(c,i,a),y_(c,a,i)}return r!=null&&Jh(i,a),he}function pe(){let t=Be(),e=$e(),n=B_(e);return t.firstCreatePass&&sw(t,n),Ff(n)&&Lf(),Pf(),n.classesWithoutHost!=null&&i0(n)&&Uv(t,n,H(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&o0(n)&&Uv(t,n,H(),n.stylesWithoutHost,!1),pe}function ot(t,e,n,r){return he(t,e,n,r),pe(),ot}function ge(t,e,n,r){let i=H(),o=i[x],s=t+Re,a=o.firstCreatePass?fT(s,o,2,e,n,r):o.data[s];return U_(a,i,t,e,vw),r!=null&&Jh(i,a),ge}function Ee(){let t=$e(),e=B_(t);return Ff(e)&&Lf(),Pf(),Ee}function fr(t,e,n,r){return ge(t,e,n,r),Ee(),fr}var vw=(t,e,n,r,i)=>(xc(!0),w_(e[ve],r,uv()));function ro(){return H()}var Ts="en-US";var cA=Ts;function _w(t){typeof t=="string"&&(cA=t.toLowerCase().replace(/_/g,"-"))}function be(t,e,n){let r=H(),i=Be(),o=$e();return lA(i,r,r[ve],o,t,e,n),be}function Xr(t,e,n){let r=H(),i=Be(),o=$e();return(o.type&3||n)&&cw(o,i,r,n,r[ve],t,e,Bc(o,r,e)),Xr}function lA(t,e,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Bc(r,e,o),cw(r,t,e,s,n,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let p=u[d],f=u[d+1];c??=Bc(r,e,o),kv(r,e,p,f,i,c)}if(l&&l.length)for(let d of l)c??=Bc(r,e,o),kv(r,e,d,i,i,c)}}function pt(t=1){return lv(t)}function Cl(t,e,n,r){return LT(t,e,n,r),Cl}function dp(t){let e=H(),n=Be(),r=Hf();Tc(r+1);let i=ip(n,r);if(t.dirty&&Hy(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=BT(e,r);t.reset(o,v0),t.notifyOnChanges()}return!0}return!1}function fp(){return PT(H(),Hf())}function Fc(t,e){return t<<17|e<<2}function Qr(t){return t>>17&32767}function uA(t){return(t&2)==2}function dA(t,e){return t&131071|e<<17}function Oh(t){return t|2}function eo(t){return(t&131068)>>2}function oh(t,e){return t&-131069|e<<2}function fA(t){return(t&1)===1}function kh(t){return t|1}function hA(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Qr(s),c=eo(s);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||ji(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let p=Qr(t[a+1]);t[r+1]=Fc(p,a),p!==0&&(t[p+1]=oh(t[p+1],r)),t[a+1]=dA(t[a+1],r)}else t[r+1]=Fc(a,0),a!==0&&(t[a+1]=oh(t[a+1],r)),a=r;else t[r+1]=Fc(c,0),a===0?a=r:t[c+1]=oh(t[c+1],r),c=r;l&&(t[r+1]=Oh(t[r+1])),Bv(t,u,r,!0),Bv(t,u,r,!1),pA(e,u,t,r,o),s=Fc(a,c),o?e.classBindings=s:e.styleBindings=s}function pA(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ji(o,e)>=0&&(n[r+1]=kh(n[r+1]))}function Bv(t,e,n,r){let i=t[n+1],o=e===null,s=r?Qr(i):eo(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];gA(c,e)&&(a=!0,t[s+1]=r?kh(l):Oh(l)),s=r?Qr(l):eo(l)}a&&(t[n+1]=r?Oh(i):kh(i))}function gA(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ji(t,e)>=0:!1}function Sl(t,e,n){return ww(t,e,n,!1),Sl}function io(t,e){return ww(t,e,null,!0),io}function ww(t,e,n,r){let i=H(),o=Be(),s=tv(2);if(o.firstUpdatePass&&yA(o,t,s,r),e!==zt&&Zr(i,s,e)){let a=o.data[ar()];bA(o,a,i,i[ve],t,i[s+1]=DA(e,n),r,s)}}function mA(t,e){return e>=t.expandoStartIndex}function yA(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[ar()],s=mA(t,n);CA(o,r)&&e===null&&!s&&(e=!1),e=vA(i,o,e,r),hA(i,o,e,n,s,r)}}function vA(t,e,n,r){let i=ov(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=sh(null,t,e,n,r),n=vs(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=sh(i,t,e,n,r),o===null){let c=_A(t,e,r);c!==void 0&&Array.isArray(c)&&(c=sh(null,t,e,c[1],r),c=vs(c,e.attrs,r),wA(t,e,r,c))}else o=EA(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function _A(t,e,n){let r=n?e.classBindings:e.styleBindings;if(eo(r)!==0)return t[Qr(r)]}function wA(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Qr(i)]=r}function EA(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=vs(r,s,n)}return vs(r,e.attrs,n)}function sh(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=vs(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function vs(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),ky(t,s,n?!0:e[++o]))}return t===void 0?null:t}function bA(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=fA(l)?$v(c,e,n,i,eo(l),s):void 0;if(!ol(u)){ol(o)||uA(l)&&(o=$v(c,null,n,i,a,s));let d=Af(ar(),n);gI(r,s,d,i,o)}}function $v(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,p=n[i+1];p===zt&&(p=d?lt:void 0);let f=d?Ec(p,r):u===r?p:void 0;if(l&&!ol(f)&&(f=Ec(c,r)),ol(f)&&(a=f,s))return a;let g=t[i+1];i=s?Qr(g):eo(g)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Ec(c,r))}return a}function ol(t){return t!==void 0}function DA(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Sn(bs(t)))),t}function CA(t,e){return(t.flags&(e?8:16))!==0}function re(t,e=""){let n=H(),r=Be(),i=t+Re,o=r.firstCreatePass?vl(r,i,1,e,null):r.data[i],s=SA(r,n,o,e,t);n[i]=s,Nc()&&Yh(r,n,s,o),Gi(o,!1)}var SA=(t,e,n,r,i)=>(xc(!0),R0(e[ve],r));function IA(t,e,n,r=""){return Zr(t,qi(),n)?e+rs(n)+r:zt}function Vn(t){return hr("",t),Vn}function hr(t,e,n){let r=H(),i=IA(r,t,e,n);return i!==zt&&TA(r,ar(),i),hr}function TA(t,e,n){let r=Af(e,t);N0(t[ve],r,n)}function Hv(t,e,n){let r=Be();r.firstCreatePass&&Ew(e,r.data,r.blueprint,ln(t),n)}function Ew(t,e,n,r,i){if(t=Ve(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ew(t[o],e,n,r,i);else{let o=Be(),s=H(),a=$e(),c=Pr(t)?t:Ve(t.provide),l=bf(t),u=a.providerIndexes&1048575,d=a.directiveStart,p=a.providerIndexes>>20;if(Pr(t)||!t.multi){let f=new Gr(l,i,W,null),g=ch(c,e,i?u:u+p,d);g===-1?(uh(qc(a,s),o,c),ah(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[g]=f,s[g]=f)}else{let f=ch(c,e,u+p,d),g=ch(c,e,u,u+p),m=f>=0&&n[f],y=g>=0&&n[g];if(i&&!y||!i&&!m){uh(qc(a,s),o,c);let v=RA(i?MA:AA,n.length,i,r,l,t);!i&&y&&(n[g].providerFactory=v),ah(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),s.push(v)}else{let v=bw(n[i?g:f],l,!i&&r);ah(o,t,f>-1?f:g,v)}!i&&r&&y&&n[g].componentProviders++}}}function ah(t,e,n,r){let i=Pr(e),o=jy(e);if(i||o){let c=(o?Ve(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function bw(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ch(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function AA(t,e,n,r,i){return Ph(this.multi,[])}function MA(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=hs(r,r[x],this.providerFactory.index,i);s=c.slice(0,a),Ph(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Ph(o,s);return s}function Ph(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function RA(t,e,n,r,i,o){let s=new Gr(t,n,W,null);return s.multi=[],s.index=e,s.componentProviders=0,bw(s,i,r&&!n),s}function oo(t,e){return n=>{n.providersResolver=(r,i)=>Hv(r,i?i(t):t,!1),e&&(n.viewProvidersResolver=(r,i)=>Hv(r,i?i(e):e,!0))}}function Il(t,e){let n=$f()+t,r=H();return r[n]===zt?aw(r,n,e()):hT(r,n)}function NA(t,e){let n=t[e];return n===zt?void 0:n}function xA(t,e,n,r,i,o){let s=e+n;return Zr(t,s,i)?aw(t,s+1,o?r.call(o,i):r(i)):NA(t,s+1)}function As(t,e){let n=Be(),r,i=t+Re;n.firstCreatePass?(r=OA(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Yn(r.type,!0)),s,a=Ye(W);try{let c=Gc(!1),l=o();return Gc(c),Mf(n,H(),i,l),l}finally{Ye(a)}}function OA(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Ms(t,e,n){let r=t+Re,i=H(),o=$y(i,r);return kA(i,r)?xA(i,$f(),e,o.transform,n,o):o.transform(n)}function kA(t,e){return t[x].data[e].pure}var sl=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},hp=(()=>{class t{compileModuleSync(n){return new tl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=hf(n),o=T_(i.declarations).reduce((s,a)=>{let c=Tn(a);return c&&s.push(new Wr(c)),s},[]);return new sl(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Dw=(()=>{class t{applicationErrorHandler=_(ft);appRef=_(dr);taskService=_(Rn);ngZone=_(ue);zonelessEnabled=_(Ki);tracing=_(Yr,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Te;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Xo):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(_(kc,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let n=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(n);return}this.switchToMicrotaskScheduler(),this.taskService.remove(n)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let n=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})})}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?hv:Qf;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Xo+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(n),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Cw(){return[{provide:Jn,useExisting:Dw},{provide:ue,useClass:es},{provide:Ki,useValue:!0}]}function PA(){return typeof $localize<"u"&&$localize.locale||Ts}var Tl=new I("",{factory:()=>_(Tl,{optional:!0,skipSelf:!0})||PA()});function ei(t,e){return ja(t,e?.equal)}var Aw=Symbol("InputSignalNode#UNSET"),YA=z(w({},Va),{transformFn:void 0,applyValueToInputSignal(t,e){Go(t,e)}});function Mw(t,e){let n=Object.create(YA);n.value=t,n.transformFn=e?.transform;function r(){if($o(n),n.value===Aw){let i=null;throw new E(-950,i)}return n.value}return r[et]=n,r}var Ml=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>ws(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function Sw(t,e){return Mw(t,e)}function ZA(t){return Mw(Aw,t)}var Rw=(Sw.required=ZA,Sw);var JA=(()=>{class t{zone=_(ue);changeDetectionScheduler=_(Jn);applicationRef=_(dr);applicationErrorHandler=_(ft);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),XA=new I("",{factory:()=>!1});function eM({ngZoneFactory:t,scheduleInRootZone:e}){return t??=()=>new ue(z(w({},xw()),{scheduleInRootZone:e})),[{provide:Ki,useValue:!1},{provide:ue,useFactory:t},{provide:tr,multi:!0,useFactory:()=>{let n=_(JA,{optional:!0});return()=>n.initialize()}},{provide:tr,multi:!0,useFactory:()=>{let n=_(tM);return()=>{n.initialize()}}},{provide:kc,useValue:e??Kf}]}function Nw(t){let e=t?.scheduleInRootZone,n=eM({ngZoneFactory:()=>{let r=xw(t);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&ht("NgZone_CoalesceEvent"),new ue(r)},scheduleInRootZone:e});return Vi([{provide:XA,useValue:!0},n])}function xw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var tM=(()=>{class t{subscription=new Te;initialized=!1;zone=_(ue);pendingTasks=_(Rn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ue.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ue.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var pp=new I(""),nM=new I("");function Rs(t){return!t.moduleRef}function rM(t){let e=Rs(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ue);return n.run(()=>{Rs(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(ft),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Rs(t)){let o=()=>e.destroy(),s=t.platformInjector.get(pp);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(pp);s.add(o),t.moduleRef.onDestroy(()=>{fs(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return oM(r,n,()=>{let o=e.get(Rn),s=o.add(),a=e.get(cp);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Tl,Ts);if(_w(c||Ts),!e.get(nM,!0))return Rs(t)?e.get(dr):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Rs(t)){let u=e.get(dr);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return iM?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>{o.remove(s)})})})}var iM;function oM(t,e,n){try{let r=n();return On(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Al=null;function sM(t=[],e){return nt.create({name:e,providers:[{provide:os,useValue:"platform"},{provide:pp,useValue:new Set([()=>Al=null])},...t]})}function aM(t=[]){if(Al)return Al;let e=sM(t);return Al=e,mw(),cM(e),e}function cM(t){let e=t.get(cl,null);Ue(t,()=>{e?.forEach(n=>n())})}var lM=1e4;var lq=lM-1e3;var At=(()=>{class t{static __NG_ELEMENT_ID__=uM}return t})();function uM(t){return dM($e(),H(),(t&16)===16)}function dM(t,e,n){if(ir(t)&&!n){let r=It(t.index,e);return new lr(r,r)}else if(t.type&175){let r=e[ut];return new lr(r,e)}return null}function Ow(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;ne(Y.BootstrapApplicationStart);try{let o=i?.injector??aM(r),s=[Cw(),gv,...n||[]],a=new ys({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return rM({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ne(Y.BootstrapApplicationEnd)}}function ao(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function kw(t){let e=Tn(t);if(!e)return null;let n=new Wr(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Pw=null;function Mt(){return Pw}function gp(t){Pw??=t}var Ns=class{},ti=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:()=>_(Fw),providedIn:"platform"})}return t})(),mp=new I(""),Fw=(()=>{class t extends ti{_location;_history;_doc=_(fe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Mt().getBaseHref(this._doc)}onPopState(n){let r=Mt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Mt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Rl(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function Lw(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Wt(t){return t&&t[0]!=="?"?`?${t}`:t}var Kt=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:()=>_(xl),providedIn:"root"})}return t})(),Nl=new I(""),xl=(()=>{class t extends Kt{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??_(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Rl(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Wt(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Wt(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Wt(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(N(ti),N(Nl,8))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),pr=(()=>{class t{_subject=new le;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=pM(Lw(jw(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Wt(r))}normalize(n){return t.stripTrailingSlash(hM(this._basePath,jw(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Wt(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Wt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Wt;static joinWithSlash=Rl;static stripTrailingSlash=Lw;static \u0275fac=function(r){return new(r||t)(N(Kt))};static \u0275prov=C({token:t,factory:()=>fM(),providedIn:"root"})}return t})();function fM(){return new pr(N(Kt))}function hM(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function jw(t){return t.replace(/\/index.html$/,"")}function pM(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var _p=(()=>{class t extends Kt{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Rl(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Wt(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Wt(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(N(ti),N(Nl,8))};static \u0275prov=C({token:t,factory:t.\u0275fac})}return t})();function Vw(t,e){return new E(2100,!1)}var yp=class{createSubscription(e,n,r){return we(()=>e.subscribe({next:n,error:r}))}dispose(e){we(()=>e.unsubscribe())}},vp=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},gM=new vp,mM=new yp,wp=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=_(ft);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(On(n))return gM;if(bl(n))return mM;throw Vw(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(W(At,16))};static \u0275pipe=El({name:"async",type:t,pure:!1})}return t})();var yM=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Ep=(()=>{class t{transform(n){if(n==null)return null;if(typeof n!="string")throw Vw(t,n);return n.replace(yM,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=El({name:"titlecase",type:t,pure:!0})}return t})();var gr=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=qt({type:t});static \u0275inj=bt({})}return t})();function bp(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var xs=class{};var Uw="browser";var Cp=(()=>{class t{static \u0275prov=C({token:t,providedIn:"root",factory:()=>new Dp(_(fe),window)})}return t})(),Dp=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,n){this.window.scrollTo(z(w({},n),{left:e[0],top:e[1]}))}scrollToAnchor(e,n){let r=_M(this.document,e);r&&(this.scrollToElement(r,n),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Xn(2400,!1))}}scrollToElement(e,n){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(z(w({},n),{left:i-s[0],top:o-s[1]}))}};function _M(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Os=class{_doc;constructor(e){this._doc=e}manager},Ol=(()=>{class t extends Os{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(N(fe))};static \u0275prov=C({token:t,factory:t.\u0275fac})}return t})(),Fl=new I(""),Mp=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Ol));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Ol);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new E(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(N(Fl),N(ue))};static \u0275prov=C({token:t,factory:t.\u0275fac})}return t})(),Ip="ng-app-id";function Bw(t){for(let e of t)e.remove()}function $w(t,e){let n=e.createElement("style");return n.textContent=t,n}function wM(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Ip}="${e}"],link[${Ip}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Ip),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Ap(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Rp=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,wM(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,$w);r?.forEach(i=>this.addUsage(i,this.external,Ap))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(Bw(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Bw(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,$w(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Ap(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(N(fe),N(al),N(ul,8),N(Es))};static \u0275prov=C({token:t,factory:t.\u0275fac})}return t})(),Tp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Np=/%COMP%/g;var zw="%COMP%",EM=`_nghost-${zw}`,bM=`_ngcontent-${zw}`,DM=!0,CM=new I("",{factory:()=>DM});function SM(t){return bM.replace(Np,t)}function IM(t){return EM.replace(Np,t)}function Gw(t,e){return e.map(n=>n.replace(Np,t))}var Fs=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,a,c=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.defaultRenderer=new ks(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Pl?i.applyToHost(n):i instanceof Ps&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.tracingService;switch(r.encapsulation){case Ht.Emulated:o=new Pl(c,l,r,this.appId,u,s,a,d);break;case Ht.ShadowDom:return new kl(c,n,r,s,a,this.nonce,d,l);case Ht.ExperimentalIsolatedShadowDom:return new kl(c,n,r,s,a,this.nonce,d);default:o=new Ps(c,l,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(N(Mp),N(Rp),N(al),N(CM),N(fe),N(ue),N(ul),N(Yr,8))};static \u0275prov=C({token:t,factory:t.\u0275fac})}return t})(),ks=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Tp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Hw(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Hw(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Tp[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Tp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(hn.DashCase|hn.Important)?e.style.setProperty(n,r,i&hn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&hn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Mt().getGlobalEventTarget(this.doc,e),!e))throw new E(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function Hw(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var kl=class extends ks{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,a,c){super(e,i,o,a),this.hostEl=n,this.sharedStylesHost=c,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=Gw(r.id,l);for(let d of l){let p=document.createElement("style");s&&p.setAttribute("nonce",s),p.textContent=d,this.shadowRoot.appendChild(p)}let u=r.getExternalStyles?.();if(u)for(let d of u){let p=Ap(d,i);s&&p.setAttribute("nonce",s),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Ps=class extends ks{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=c?Gw(c,l):l,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&qr.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Pl=class extends Ps{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=SM(l),this.hostAttr=IM(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Ll=class t extends Ns{supportsDOMEvents=!0;static makeCurrent(){gp(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=TM();return n==null?null:AM(n)}resetBaseElement(){Ls=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bp(document.cookie,e)}},Ls=null;function TM(){return Ls=Ls||document.head.querySelector("base"),Ls?Ls.getAttribute("href"):null}function AM(t){return new URL(t,document.baseURI).pathname}var MM=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac})}return t})(),qw=["alt","control","meta","shift"],RM={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NM={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Ww=(()=>{class t extends Os{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mt().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),qw.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=RM[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),qw.forEach(s=>{if(s!==i){let a=NM[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(N(fe))};static \u0275prov=C({token:t,factory:t.\u0275fac})}return t})();function xp(t,e,n){return h(this,null,function*(){let r=w({rootComponent:t},xM(e,n));return Ow(r)})}function xM(t,e){return{platformRef:e?.platformRef,appProviders:[...LM,...t?.providers??[]],platformProviders:FM}}function OM(){Ll.makeCurrent()}function kM(){return new on}function PM(){return jh(document),document}var FM=[{provide:Es,useValue:Uw},{provide:cl,useValue:OM,multi:!0},{provide:fe,useFactory:PM}];var LM=[{provide:os,useValue:"root"},{provide:on,useFactory:kM},{provide:Fl,useClass:Ol,multi:!0},{provide:Fl,useClass:Ww,multi:!0},Fs,Rp,Mp,{provide:Nn,useExisting:Fs},{provide:xs,useClass:MM},[]];var Kw=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(N(fe))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var j="primary",Ws=Symbol("RouteTitle"),Lp=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ii(t){return new Lp(t)}function Op(t,e,n){for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(i[0]===":")n[i.substring(1)]=o;else if(i!==o.path)return!1}return!0}function rE(t,e,n){let r=n.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let c={},l=t.slice(0,r.length);return Op(r,l,c)?{consumed:l,posParams:c}:null}if(i!==r.lastIndexOf("**"))return null;let o=r.slice(0,i),s=r.slice(i+1);if(o.length+s.length>t.length||n.pathMatch==="full"&&e.hasChildren()&&n.path!=="**")return null;let a={};return!Op(o,t.slice(0,o.length),a)||!Op(s,t.slice(t.length-s.length),a)?null:{consumed:t,posParams:a}}function Hl(t){return new Promise((e,n)=>{t.pipe(Dn()).subscribe({next:r=>e(r),error:r=>n(r)})})}function VM(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!pn(t[n],e[n]))return!1;return!0}function pn(t,e){let n=t?jp(t):void 0,r=e?jp(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!iE(t[i],e[i]))return!1;return!0}function jp(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function iE(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function UM(t){return t.length>0?t[t.length-1]:null}function si(t){return oc(t)?t:On(t)?se(Promise.resolve(t)):B(t)}function oE(t){return oc(t)?Hl(t):Promise.resolve(t)}var BM={exact:aE,subset:cE},sE={exact:$M,subset:HM,ignored:()=>!0};function Jp(t,e,n){let r=t instanceof mt?t:e.parseUrl(t);return ei(()=>Vp(e.lastSuccessfulNavigation()?.finalUrl??new mt,r,n))}function Vp(t,e,n){return BM[n.paths](t.root,e.root,n.matrixParams)&&sE[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function $M(t,e){return pn(t,e)}function aE(t,e,n){if(!ni(t.segments,e.segments)||!Ul(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!aE(t.children[r],e.children[r],n))return!1;return!0}function HM(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>iE(t[n],e[n]))}function cE(t,e,n){return lE(t,e,e.segments,n)}function lE(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ni(i,n)||e.hasChildren()||!Ul(i,n,r))}else if(t.segments.length===n.length){if(!ni(t.segments,n)||!Ul(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!cE(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ni(t.segments,i)||!Ul(t.segments,i,r)||!t.children[j]?!1:lE(t.children[j],e,o,r)}}function Ul(t,e,n){return e.every((r,i)=>sE[n](t[i].parameters,r.parameters))}var mt=class{root;queryParams;fragment;_queryParamMap;constructor(e=new J([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ii(this.queryParams),this._queryParamMap}toString(){return qM.serialize(this)}},J=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bl(this)}},mr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ii(this.parameters),this._parameterMap}toString(){return dE(this)}};function zM(t,e){return ni(t,e)&&t.every((n,r)=>pn(n.parameters,e[r].parameters))}function ni(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function GM(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===j&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==j&&(n=n.concat(e(i,r)))}),n}var ai=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:()=>new Bn,providedIn:"root"})}return t})(),Bn=class{parse(e){let n=new Bp(e);return new mt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${js(e.root,!0)}`,r=QM(e.queryParams),i=typeof e.fragment=="string"?`#${WM(e.fragment)}`:"";return`${n}${r}${i}`}},qM=new Bn;function Bl(t){return t.segments.map(e=>dE(e)).join("/")}function js(t,e){if(!t.hasChildren())return Bl(t);if(e){let n=t.children[j]?js(t.children[j],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==j&&r.push(`${i}:${js(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=GM(t,(r,i)=>i===j?[js(t.children[j],!1)]:[`${i}:${js(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[j]!=null?`${Bl(t)}/${n[0]}`:`${Bl(t)}/(${n.join("//")})`}}function uE(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jl(t){return uE(t).replace(/%3B/gi,";")}function WM(t){return encodeURI(t)}function Up(t){return uE(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $l(t){return decodeURIComponent(t)}function Qw(t){return $l(t.replace(/\+/g,"%20"))}function dE(t){return`${Up(t.path)}${KM(t.parameters)}`}function KM(t){return Object.entries(t).map(([e,n])=>`;${Up(e)}=${Up(n)}`).join("")}function QM(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${jl(n)}=${jl(i)}`).join("&"):`${jl(n)}=${jl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var YM=/^[^\/()?;#]+/;function kp(t){let e=t.match(YM);return e?e[0]:""}var ZM=/^[^\/()?;=#]+/;function JM(t){let e=t.match(ZM);return e?e[0]:""}var XM=/^[^=?&#]+/;function eR(t){let e=t.match(XM);return e?e[0]:""}var tR=/^[^&#]+/;function nR(t){let e=t.match(tR);return e?e[0]:""}var Bp=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new J([],{}):new J([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[j]=new J(e,n)),r}parseSegment(){let e=kp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new E(4009,!1);return this.capture(e),new mr($l(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=JM(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=kp(this.remaining);i&&(r=i,this.capture(r))}e[$l(n)]=$l(r)}parseQueryParam(e){let n=eR(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=nR(this.remaining);s&&(r=s,this.capture(r))}let i=Qw(n),o=Qw(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=kp(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new E(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=j);let s=this.parseChildren();n[o??j]=Object.keys(s).length===1&&s[j]?s[j]:new J([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new E(4011,!1)}};function fE(t){return t.segments.length>0?new J([],{[j]:t}):t}function hE(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=hE(i);if(r===j&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new J(t.segments,e);return rR(n)}function rR(t){if(t.numberOfChildren===1&&t.children[j]){let e=t.children[j];return new J(t.segments.concat(e.segments),e.children)}return t}function yr(t){return t instanceof mt}function pE(t,e,n=null,r=null,i=new Bn){let o=gE(t);return mE(o,e,n,r,i)}function gE(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new J(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=fE(r);return e??i}function mE(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return Pp(o,o,o,n,r,i);let s=iR(e);if(s.toRoot())return Pp(o,o,new J([],{}),n,r,i);let a=oR(s,o,t),c=a.processChildren?Us(a.segmentGroup,a.index,s.commands):vE(a.segmentGroup,a.index,s.commands);return Pp(o,a.segmentGroup,c,n,r,i)}function zl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function $s(t){return typeof t=="object"&&t!=null&&t.outlets}function Yw(t,e,n){t||="\u0275";let r=new mt;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function Pp(t,e,n,r,i,o){let s={};for(let[l,u]of Object.entries(r??{}))s[l]=Array.isArray(u)?u.map(d=>Yw(l,d,o)):Yw(l,u,o);let a;t===e?a=n:a=yE(t,e,n);let c=fE(hE(a));return new mt(c,s,i)}function yE(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=yE(o,e,n)}),new J(t.segments,r)}var Gl=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&zl(r[0]))throw new E(4003,!1);let i=r.find($s);if(i&&i!==UM(r))throw new E(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function iR(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Gl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Gl(n,e,r)}var lo=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function oR(t,e,n){if(t.isAbsolute)return new lo(e,!0,0);if(!n)return new lo(e,!1,NaN);if(n.parent===null)return new lo(n,!0,0);let r=zl(t.commands[0])?0:1,i=n.segments.length-1+r;return sR(n,i,t.numberOfDoubleDots)}function sR(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new E(4005,!1);i=r.segments.length}return new lo(r,!1,i-o)}function aR(t){return $s(t[0])?t[0].outlets:{[j]:t}}function vE(t,e,n){if(t??=new J([],{}),t.segments.length===0&&t.hasChildren())return Us(t,e,n);let r=cR(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new J(t.segments.slice(0,r.pathIndex),{});return o.children[j]=new J(t.segments.slice(r.pathIndex),t.children),Us(o,0,i)}else return r.match&&i.length===0?new J(t.segments,{}):r.match&&!t.hasChildren()?$p(t,e,n):r.match?Us(t,0,i):$p(t,e,n)}function Us(t,e,n){if(n.length===0)return new J(t.segments,{});{let r=aR(n),i={};if(Object.keys(r).some(o=>o!==j)&&t.children[j]&&t.numberOfChildren===1&&t.children[j].segments.length===0){let o=Us(t.children[j],e,n);return new J(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=vE(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new J(t.segments,i)}}function cR(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if($s(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Jw(c,l,s))return o;r+=2}else{if(!Jw(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function $p(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if($s(o)){let c=lR(o.outlets);return new J(r,c)}if(i===0&&zl(n[0])){let c=t.segments[e];r.push(new mr(c.path,Zw(n[0]))),i++;continue}let s=$s(o)?o.outlets[j]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&zl(a)?(r.push(new mr(s,Zw(a))),i+=2):(r.push(new mr(s,{})),i++)}return new J(r,{})}function lR(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=$p(new J([],{}),0,r))}),e}function Zw(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Jw(t,e,n){return t==n.path&&pn(e,n.parameters)}var uo="imperative",xe=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(xe||{}),yt=class{id;url;constructor(e,n){this.id=e,this.url=n}},vr=class extends yt{type=xe.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},vt=class extends yt{urlAfterRedirects;type=xe.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qe=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Qe||{}),ho=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(ho||{}),Rt=class extends yt{reason;code;type=xe.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function _E(t){return t instanceof Rt&&(t.code===Qe.Redirect||t.code===Qe.SupersededByNewNavigation)}var gn=class extends yt{reason;code;type=xe.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},oi=class extends yt{error;target;type=xe.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},po=class extends yt{urlAfterRedirects;state;type=xe.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ql=class extends yt{urlAfterRedirects;state;type=xe.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wl=class extends yt{urlAfterRedirects;state;shouldActivate;type=xe.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Kl=class extends yt{urlAfterRedirects;state;type=xe.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ql=class extends yt{urlAfterRedirects;state;type=xe.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yl=class{route;type=xe.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zl=class{route;type=xe.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Jl=class{snapshot;type=xe.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xl=class{snapshot;type=xe.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eu=class{snapshot;type=xe.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tu=class{snapshot;type=xe.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},go=class{routerEvent;position;anchor;scrollBehavior;type=xe.Scroll;constructor(e,n,r,i){this.routerEvent=e,this.position=n,this.anchor=r,this.scrollBehavior=i}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},mo=class{},yo=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function uR(t){return!(t instanceof mo)&&!(t instanceof yo)}var nu=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ci(this.rootInjector)}},ci=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new nu(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(N(Ce))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ru=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Hp(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Hp(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=zp(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return zp(e,this._root).map(n=>n.value)}};function Hp(t,e){if(t===e.value)return e;for(let n of e.children){let r=Hp(t,n);if(r)return r}return null}function zp(t,e){if(t===e.value)return[e];for(let n of e.children){let r=zp(t,n);if(r.length)return r.unshift(e),r}return[]}var gt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function co(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Hs=class extends ru{snapshot;constructor(e,n){super(e),this.snapshot=n,Xp(this,e)}toString(){return this.snapshot.toString()}};function wE(t,e){let n=dR(t,e),r=new Ae([new mr("",{})]),i=new Ae({}),o=new Ae({}),s=new Ae({}),a=new Ae(""),c=new mn(r,i,s,a,o,j,t,n.root);return c.snapshot=n.root,new Hs(new gt(c,[]),n)}function dR(t,e){let n={},r={},i={},s=new ri([],n,i,"",r,j,t,null,{},e);return new zs("",new gt(s,[]))}var mn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ie(l=>l[Ws]))??B(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>ii(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>ii(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function iu(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:w(w({},e.params),t.params),data:w(w({},e.data),t.data),resolve:w(w(w(w({},t.data),e.data),i?.data),t._resolvedData)}:r={params:w({},t.params),data:w({},t.data),resolve:w(w({},t.data),t._resolvedData??{})},i&&bE(i)&&(r.resolve[Ws]=i.title),r}var ri=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[Ws]}constructor(e,n,r,i,o,s,a,c,l,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l,this._environmentInjector=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ii(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ii(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},zs=class extends ru{url;constructor(e,n){super(n),this.url=e,Xp(this,n)}toString(){return EE(this._root)}};function Xp(t,e){e.value._routerState=t,e.children.forEach(n=>Xp(t,n))}function EE(t){let e=t.children.length>0?` { ${t.children.map(EE).join(", ")} } `:"";return`${t.value}${e}`}function Fp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,pn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),pn(e.params,n.params)||t.paramsSubject.next(n.params),VM(e.url,n.url)||t.urlSubject.next(n.url),pn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Gp(t,e){let n=pn(t.params,e.params)&&zM(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Gp(t.parent,e.parent))}function bE(t){return typeof t.title=="string"||t.title===null}var DE=new I(""),Ks=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=j;activateEvents=new ae;deactivateEvents=new ae;attachEvents=new ae;detachEvents=new ae;routerOutletData=Rw();parentContexts=_(ci);location=_(Jr);changeDetector=_(At);inputBinder=_(Qs,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new E(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new qp(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ke({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Tt]})}return t})(),qp=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===mn?this.route:e===ci?this.childContexts:e===DE?this.outletData:this.parent.get(e,n)}},Qs=new I(""),eg=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=lc([r.queryParams,r.params,r.data]).pipe(tn(([o,s,a],c)=>(a=w(w(w({},o),s),a),c===0?B(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let s=kw(r.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(n,i)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac})}return t})(),tg=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Je({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ot(0,"router-outlet")},dependencies:[Ks],encapsulation:2})}return t})();function ng(t){let e=t.children&&t.children.map(ng),n=e?z(w({},t),{children:e}):w({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==j&&(n.component=tg),n}function fR(t,e,n){let r=Gs(t,e._root,n?n._root:void 0);return new Hs(r,e)}function Gs(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=hR(t,e,n);return new gt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Gs(t,a)),s}}let r=pR(e.value),i=e.children.map(o=>Gs(t,o));return new gt(r,i)}}function hR(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Gs(t,r,i);return Gs(t,r)})}function pR(t){return new mn(new Ae(t.url),new Ae(t.params),new Ae(t.queryParams),new Ae(t.fragment),new Ae(t.data),t.outlet,t.component,t)}var vo=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},CE="ngNavigationCancelingError";function ou(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=yr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=SE(!1,Qe.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function SE(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[CE]=!0,n.cancellationCode=e,n}function gR(t){return IE(t)&&yr(t.url)}function IE(t){return!!t&&t[CE]}var Wp=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Fp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=co(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=co(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=co(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=co(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new tu(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Xl(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Fp(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Fp(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},su=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},fo=class{component;route;constructor(e,n){this.component=e,this.route=n}};function mR(t,e,n){let r=t._root,i=e?e._root:null;return Vs(r,i,n,[r.value])}function yR(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function wo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!af(t)?t:e.get(t):r}function Vs(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=co(e);return t.children.forEach(s=>{vR(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Bs(a,n.getContext(s),i)),i}function vR(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=_R(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new su(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Vs(t,e,a?a.children:null,r,i):Vs(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new fo(a.outlet.component,s))}else s&&Bs(e,a,i),i.canActivateChecks.push(new su(r)),o.component?Vs(t,null,a?a.children:null,r,i):Vs(t,null,n,r,i);return i}function _R(t,e,n){if(typeof n=="function")return Ue(e._environmentInjector,()=>n(t,e));switch(n){case"pathParamsChange":return!ni(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ni(t.url,e.url)||!pn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gp(t,e)||!pn(t.queryParams,e.queryParams);default:return!Gp(t,e)}}function Bs(t,e,n){let r=co(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Bs(s,e.children.getContext(o),n):Bs(s,null,n):Bs(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new fo(e.outlet.component,i)):n.canDeactivateChecks.push(new fo(null,i)):n.canDeactivateChecks.push(new fo(null,i))}function Ys(t){return typeof t=="function"}function wR(t){return typeof t=="boolean"}function ER(t){return t&&Ys(t.canLoad)}function bR(t){return t&&Ys(t.canActivate)}function DR(t){return t&&Ys(t.canActivateChild)}function CR(t){return t&&Ys(t.canDeactivate)}function SR(t){return t&&Ys(t.canMatch)}function TE(t){return t instanceof xr||t?.name==="EmptyError"}var Vl=Symbol("INITIAL_VALUE");function _o(){return tn(t=>lc(t.map(e=>e.pipe(bn(1),$d(Vl)))).pipe(ie(e=>{for(let n of e)if(n!==!0){if(n===Vl)return Vl;if(n===!1||IR(n))return n}return!0}),jt(e=>e!==Vl),bn(1)))}function IR(t){return yr(t)||t instanceof vo}function AE(t){return t.aborted?B(void 0).pipe(bn(1)):new Q(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function ME(t){return Qn(AE(t))}function TR(t){return je(e=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:o}}=e;return o.length===0&&i.length===0?B(z(w({},e),{guardsResult:!0})):AR(o,n,r).pipe(je(s=>s&&wR(s)?MR(n,i,t):B(s)),ie(s=>z(w({},e),{guardsResult:s})))})}function AR(t,e,n){return se(t).pipe(je(r=>kR(r.component,r.route,n,e)),Dn(r=>r!==!0,!0))}function MR(t,e,n){return se(e).pipe(Pi(r=>ki(NR(r.route.parent,n),RR(r.route,n),OR(t,r.path),xR(t,r.route))),Dn(r=>r!==!0,!0))}function RR(t,e){return t!==null&&e&&e(new eu(t)),B(!0)}function NR(t,e){return t!==null&&e&&e(new Jl(t)),B(!0)}function xR(t,e){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return B(!0);let r=n.map(i=>Qo(()=>{let o=e._environmentInjector,s=wo(i,o),a=bR(s)?s.canActivate(e,t):Ue(o,()=>s(e,t));return si(a).pipe(Dn())}));return B(r).pipe(_o())}function OR(t,e){let n=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>yR(o)).filter(o=>o!==null).map(o=>Qo(()=>{let s=o.guards.map(a=>{let c=o.node._environmentInjector,l=wo(a,c),u=DR(l)?l.canActivateChild(n,t):Ue(c,()=>l(n,t));return si(u).pipe(Dn())});return B(s).pipe(_o())}));return B(i).pipe(_o())}function kR(t,e,n,r){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return B(!0);let o=i.map(s=>{let a=e._environmentInjector,c=wo(s,a),l=CR(c)?c.canDeactivate(t,e,n,r):Ue(a,()=>c(t,e,n,r));return si(l).pipe(Dn())});return B(o).pipe(_o())}function PR(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return B(!0);let s=o.map(a=>{let c=wo(a,t),l=ER(c)?c.canLoad(e,n):Ue(t,()=>c(e,n)),u=si(l);return i?u.pipe(ME(i)):u});return B(s).pipe(_o(),RE(r))}function RE(t){return Ld(nn(e=>{if(typeof e!="boolean")throw ou(t,e)}),ie(e=>e===!0))}function FR(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return B(!0);let s=o.map(a=>{let c=wo(a,t),l=SR(c)?c.canMatch(e,n):Ue(t,()=>c(e,n));return si(l).pipe(ME(i))});return B(s).pipe(_o(),RE(r))}var Un=class t extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,t.prototype)}},qs=class t extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,t.prototype)}};function LR(t){throw new E(4e3,!1)}function jR(t){throw SE(!1,Qe.GuardRejected)}var Kp=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){return h(this,null,function*(){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[j])throw LR(`${e.redirectTo}`);i=i.children[j]}})}applyRedirectCommands(e,n,r,i,o){return h(this,null,function*(){let s=yield VR(n,i,o);if(s instanceof mt)throw new qs(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new qs(a);return a})}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new mt(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new J(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new E(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function VR(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d,paramMap:p,queryParamMap:f}=e;return Hl(si(Ue(n,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d,paramMap:p,queryParamMap:f}))))}function UR(t,e){return t.providers&&!t._injector&&(t._injector=no(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Qt(t){return t.outlet||j}function BR(t,e){let n=t.filter(r=>Qt(r)===e);return n.push(...t.filter(r=>Qt(r)!==e)),n}var Qp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $R(t,e,n,r,i,o){let s=NE(t,e,n);return s.matched?(r=UR(e,r),FR(r,e,n,i,o).pipe(ie(a=>a===!0?s:w({},Qp)))):B(s)}function NE(t,e,n){if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?w({},Qp):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||rE)(n,t,e);if(!i)return w({},Qp);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?w(w({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Xw(t,e,n,r){return n.length>0&&GR(t,n,r)?{segmentGroup:new J(e,zR(r,new J(n,t.children))),slicedSegments:[]}:n.length===0&&qR(t,n,r)?{segmentGroup:new J(t.segments,HR(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new J(t.segments,t.children),slicedSegments:n}}function HR(t,e,n,r){let i={};for(let o of n)if(cu(t,e,o)&&!r[Qt(o)]){let s=new J([],{});i[Qt(o)]=s}return w(w({},r),i)}function zR(t,e){let n={};n[j]=e;for(let r of t)if(r.path===""&&Qt(r)!==j){let i=new J([],{});n[Qt(r)]=i}return n}function GR(t,e,n){return n.some(r=>cu(t,e,r)&&Qt(r)!==j)}function qR(t,e,n){return n.some(r=>cu(t,e,r))}function cu(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function WR(t,e,n){return e.length===0&&!t.children[n]}var Yp=class{};function KR(t,e,n,r,i,o,s="emptyOnly",a){return h(this,null,function*(){return new Zp(t,e,n,r,i,s,o,a).recognize()})}var QR=31,Zp=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a,c){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new Kp(this.urlSerializer,this.urlTree)}noMatchError(e){return new E(4002,`'${e.segmentGroup}'`)}recognize(){return h(this,null,function*(){let e=Xw(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=yield this.match(e),i=new gt(r,n),o=new zs("",i),s=pE(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}})}match(e){return h(this,null,function*(){let n=new ri([],Object.freeze({}),Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),j,this.rootComponentType,null,{},this.injector);try{return{children:yield this.processSegmentGroup(this.injector,this.config,e,j,n),rootSnapshot:n}}catch(r){if(r instanceof qs)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Un?this.noMatchError(r):r}})}processSegmentGroup(e,n,r,i,o){return h(this,null,function*(){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=yield this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof gt?[s]:[]})}processChildren(e,n,r,i){return h(this,null,function*(){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let l=r.children[c],u=BR(n,c),d=yield this.processSegmentGroup(e,u,l,c,i);s.push(...d)}let a=xE(s);return YR(a),a})}processSegment(e,n,r,i,o,s,a){return h(this,null,function*(){for(let c of n)try{return yield this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a)}catch(l){if(l instanceof Un||TE(l))continue;throw l}if(WR(r,i,o))return new Yp;throw new Un(r)})}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return h(this,null,function*(){if(Qt(r)!==s&&(s===j||!cu(i,o,r)))throw new Un(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c);throw new Un(i)})}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){return h(this,null,function*(){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:p}=NE(n,i,o);if(!c)throw new Un(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>QR&&(this.allowRedirects=!1));let f=new ri(o,l,Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,eE(i),Qt(i),i.component??i._loadedComponent??null,i,tE(i),e),g=iu(f,a,this.paramsInheritanceStrategy);if(f.params=Object.freeze(g.params),f.data=Object.freeze(g.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let m=yield this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,e),y=yield this.applyRedirects.lineralizeSegments(i,m);return this.processSegment(e,r,n,y.concat(p),s,!1,a)})}matchSegmentAgainstRoute(e,n,r,i,o,s){return h(this,null,function*(){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=yield Hl($R(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new Un(n);e=r._injector??e;let{routes:c}=yield this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:u,consumedSegments:d,remainingSegments:p}=a,f=new ri(d,u,Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,eE(r),Qt(r),r.component??r._loadedComponent??null,r,tE(r),e),g=iu(f,s,this.paramsInheritanceStrategy);f.params=Object.freeze(g.params),f.data=Object.freeze(g.data);let{segmentGroup:m,slicedSegments:y}=Xw(n,d,p,c);if(y.length===0&&m.hasChildren()){let b=yield this.processChildren(l,c,m,f);return new gt(f,b)}if(c.length===0&&y.length===0)return new gt(f,[]);let v=Qt(r)===o,A=yield this.processSegment(l,c,m,y,v?j:o,!0,f);return new gt(f,A instanceof gt?[A]:[])})}getChildConfig(e,n,r){return h(this,null,function*(){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0){let o=n._loadedNgModuleFactory;return o&&!n._loadedInjector&&(n._loadedInjector=o.create(e).injector),{routes:n._loadedRoutes,injector:n._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(yield Hl(PR(e,n,r,this.urlSerializer,this.abortSignal))){let o=yield this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,n._loadedNgModuleFactory=o.factory,o}throw jR(n)}return{routes:[],injector:e}})}};function YR(t){t.sort((e,n)=>e.value.outlet===j?-1:n.value.outlet===j?1:e.value.outlet.localeCompare(n.value.outlet))}function ZR(t){let e=t.value.routeConfig;return e&&e.path===""}function xE(t){let e=[],n=new Set;for(let r of t){if(!ZR(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=xE(r.children);e.push(new gt(r.value,i))}return e.filter(r=>!n.has(r))}function eE(t){return t.data||{}}function tE(t){return t.resolve||{}}function JR(t,e,n,r,i,o,s){return je(a=>h(null,null,function*(){let{state:c,tree:l}=yield KR(t,e,n,r,a.extractedUrl,i,o,s);return z(w({},a),{targetSnapshot:c,urlAfterRedirects:l})}))}function XR(t){return je(e=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return B(e);let i=new Set(r.map(a=>a.route)),o=new Set;for(let a of i)if(!o.has(a))for(let c of OE(a))o.add(c);let s=0;return se(o).pipe(Pi(a=>i.has(a)?eN(a,n,t):(a.data=iu(a,a.parent,t).resolve,B(void 0))),nn(()=>s++),uc(1),je(a=>s===o.size?B(e):Le))})}function OE(t){let e=t.children.map(n=>OE(n)).flat();return[t,...e]}function eN(t,e,n){let r=t.routeConfig,i=t._resolve;return r?.title!==void 0&&!bE(r)&&(i[Ws]=r.title),Qo(()=>(t.data=iu(t,t.parent,n).resolve,tN(i,t,e).pipe(ie(o=>(t._resolvedData=o,t.data=w(w({},t.data),o),null)))))}function tN(t,e,n){let r=jp(t);if(r.length===0)return B({});let i={};return se(r).pipe(je(o=>nN(t[o],e,n).pipe(Dn(),nn(s=>{if(s instanceof vo)throw ou(new Bn,s);i[o]=s}))),uc(1),ie(()=>i),En(o=>TE(o)?Le:Ko(o)))}function nN(t,e,n){let r=e._environmentInjector,i=wo(t,r),o=i.resolve?i.resolve(e,n):Ue(r,()=>i(e,n));return si(o)}function nE(t){return tn(e=>{let n=t(e);return n?se(n).pipe(ie(()=>e)):B(e)})}var rg=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===j);return r}getResolvedTitleForRoute(n){return n.data[Ws]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:()=>_(kE),providedIn:"root"})}return t})(),kE=(()=>{class t extends rg{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(N(Kw))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_r=new I("",{factory:()=>({})}),li=new I(""),lu=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=_(hp);loadComponent(n,r){return h(this,null,function*(){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=h(this,null,function*(){try{let o=yield oE(Ue(n,()=>r.loadComponent())),s=yield LE(FE(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}});return this.componentLoaders.set(r,i),i})}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=h(this,null,function*(){try{let o=yield PE(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,r._loadedNgModuleFactory=o.factory,o}finally{this.childrenLoaders.delete(r)}});return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function PE(t,e,n,r){return h(this,null,function*(){let i=yield oE(Ue(n,()=>t.loadChildren())),o=yield LE(FE(i)),s;o instanceof wl||Array.isArray(o)?s=o:s=yield e.compileModuleAsync(o),r&&r(t);let a,c,l=!1,u;return Array.isArray(s)?(c=s,l=!0):(a=s.create(n).injector,u=s,c=a.get(li,[],{optional:!0,self:!0}).flat()),{routes:c.map(ng),injector:a,factory:u}})}function rN(t){return t&&typeof t=="object"&&"default"in t}function FE(t){return rN(t)?t.default:t}function LE(t){return h(this,null,function*(){return t})}var uu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:()=>_(iN),providedIn:"root"})}return t})(),iN=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ig=new I(""),og=new I("");function jE(t,e,n){let r=t.get(og),i=t.get(fe);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),oN(t)));a.updateCallbackDone.catch(l=>{}),a.ready.catch(l=>{}),a.finished.catch(l=>{});let{onViewTransitionCreated:c}=r;return c&&Ue(t,()=>c({transition:a,from:e,to:n})),s}function oN(t){return new Promise(e=>{Ds({read:()=>setTimeout(e)},{injector:t})})}var sN=()=>{},sg=new I(""),du=(()=>{class t{currentNavigation=rt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=rt(null);events=new le;transitionAbortWithErrorSubject=new le;configLoader=_(lu);environmentInjector=_(Ce);destroyRef=_(dn);urlSerializer=_(ai);rootContexts=_(ci);location=_(pr);inputBindingEnabled=_(Qs,{optional:!0})!==null;titleStrategy=_(rg);options=_(_r,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=_(uu);createViewTransition=_(ig,{optional:!0});navigationErrorHandler=_(sg,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>B(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Yl(i)),r=i=>this.events.next(new Zl(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;we(()=>{this.transitions?.next(z(w({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new Ae(null),this.transitions.pipe(jt(r=>r!==null),tn(r=>{let i=!1,o=new AbortController,s=()=>!i&&this.currentTransition?.id===r.id;return B(r).pipe(tn(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Qe.SupersededByNewNavigation),Le;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?z(w({},c),{previousNavigation:null}):null,abort:()=>o.abort()});let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=a.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&u!=="reload")return this.events.next(new gn(a.id,this.urlSerializer.serialize(a.rawUrl),"",ho.IgnoredSameUrlNavigation)),a.resolve(!1),Le;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return B(a).pipe(tn(d=>(this.events.next(new vr(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?Le:Promise.resolve(d))),JR(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),nn(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=d.urlAfterRedirects,f));let p=new po(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:d,extractedUrl:p,source:f,restoredState:g,extras:m}=a,y=new vr(d,this.urlSerializer.serialize(p),f,g);this.events.next(y);let v=wE(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=z(w({},a),{targetSnapshot:v,urlAfterRedirects:p,extras:z(w({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(A=>(A.finalUrl=p,A)),B(r)}else return this.events.next(new gn(a.id,this.urlSerializer.serialize(a.extractedUrl),"",ho.IgnoredByUrlHandlingStrategy)),a.resolve(!1),Le}),ie(a=>{let c=new ql(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(c),this.currentTransition=r=z(w({},a),{guards:mR(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r}),TR(a=>this.events.next(a)),tn(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw ou(this.urlSerializer,a.guardsResult);let c=new Wl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(c),!s())return Le;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",Qe.GuardRejected),Le;if(a.guards.canActivateChecks.length===0)return B(a);let l=new Kl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(l),!s())return Le;let u=!1;return B(a).pipe(XR(this.paramsInheritanceStrategy),nn({next:()=>{u=!0;let d=new Ql(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(d)},complete:()=>{u||this.cancelNavigationTransition(a,"",Qe.NoDataFromResolver)}}))}),nE(a=>{let c=u=>{let d=[];if(u.routeConfig?._loadedComponent)u.component=u.routeConfig?._loadedComponent;else if(u.routeConfig?.loadComponent){let p=u._environmentInjector;d.push(this.configLoader.loadComponent(p,u.routeConfig).then(f=>{u.component=f}))}for(let p of u.children)d.push(...c(p));return d},l=c(a.targetSnapshot.root);return l.length===0?B(a):se(Promise.all(l).then(()=>a))}),nE(()=>this.afterPreactivation()),tn(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,l=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return l?se(l).pipe(ie(()=>r)):B(r)}),bn(1),ie(a=>{let c=fR(n.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a=z(w({},a),{targetRouterState:c}),this.currentNavigation.update(l=>(l.targetRouterState=c,l)),this.events.next(new mo),s()&&(new Wp(n.routeReuseStrategy,r.targetRouterState,r.currentRouterState,l=>this.events.next(l),this.inputBindingEnabled).activate(this.rootContexts),s()&&(i=!0,this.currentNavigation.update(l=>(l.abort=sN,l)),this.lastSuccessfulNavigation.set(we(this.currentNavigation)),this.events.next(new vt(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),Qn(AE(o.signal).pipe(jt(()=>!i&&!r.targetRouterState),nn(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Qe.Aborted)}))),nn({complete:()=>{i=!0}}),Qn(this.transitionAbortWithErrorSubject.pipe(nn(a=>{throw a}))),Bd(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Qe.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),En(a=>{if(i=!0,this.destroyed)return r.resolve(!1),Le;if(IE(a))this.events.next(new Rt(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),gR(a)?this.events.next(new yo(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new oi(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let l=Ue(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(l instanceof vo){let{message:u,cancellationCode:d}=ou(this.urlSerializer,l);this.events.next(new Rt(r.id,this.urlSerializer.serialize(r.extractedUrl),u,d)),this.events.next(new yo(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return Le}))}))}cancelNavigationTransition(n,r,i){let o=new Rt(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=we(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function aN(t){return t!==uo}var VE=new I("");var UE=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:()=>_(cN),providedIn:"root"})}return t})(),au=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}shouldDestroyInjector(e){return!0}},cN=(()=>{class t extends au{static \u0275fac=(()=>{let n;return function(i){return(n||(n=ur(t)))(i||t)}})();static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ag=(()=>{class t{urlSerializer=_(ai);options=_(_r,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=_(pr);urlHandlingStrategy=_(uu);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new mt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof mt?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=wE(null,_(Ce));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:()=>_(lN),providedIn:"root"})}return t})(),lN=(()=>{class t extends ag{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof vr?this.updateStateMemento():n instanceof gn?this.commitTransition(r):n instanceof po?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof mo?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Rt&&!_E(n)?this.restoreHistory(r):n instanceof oi?this.restoreHistory(r,!0):n instanceof vt&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=w(w({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=w(w({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ur(t)))(i||t)}})();static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fu(t,e){t.events.pipe(jt(n=>n instanceof vt||n instanceof Rt||n instanceof oi||n instanceof gn),ie(n=>n instanceof vt||n instanceof gn?0:(n instanceof Rt?n.code===Qe.Redirect||n.code===Qe.SupersededByNewNavigation:!1)?2:1),jt(n=>n!==2),bn(1)).subscribe(()=>{e()})}var cg={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},yn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=_(op);stateManager=_(ag);options=_(_r,{optional:!0})||{};pendingTasks=_(Rn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=_(du);urlSerializer=_(ai);location=_(pr);urlHandlingStrategy=_(uu);injector=_(Ce);_events=new le;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=_(UE);injectorCleanup=_(VE,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=_(li,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!_(Qs,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new Te;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=we(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Rt&&r.code!==Qe.Redirect&&r.code!==Qe.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof vt)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof yo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=w({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||aN(i.source)},s);this.scheduleNavigation(a,uo,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}uR(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),uo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=w({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(ft)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return we(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(ng),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=w(w({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let p=i?i.snapshot:this.routerState.snapshot.root;d=gE(p)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return mE(d,n,u,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=yr(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,uo,null,r)}navigate(n,r={skipLocationChange:!1}){return uN(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Xn(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=w({},cg):r===!1?i=w({},lg):i=r,yr(n))return Vp(this.currentUrlTree,n,i);let o=this.parseUrl(n);return Vp(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,p)=>{a=d,c=p});let u=this.pendingTasks.add();return fu(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function uN(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new E(4008,!1)}var Eo=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=rt(null);get href(){return we(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new le;applicationErrorHandler=_(ft);options=_(_r,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(_(new Ml("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){this.subscription===void 0&&(this.subscription=this.router.events.subscribe(n=>{n instanceof vt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(yr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:yr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(W(yn),W(mn),ws("tabindex"),W(Gt),W(Ze),W(Kt))};static \u0275dir=Ke({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&be("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&kn("href",i.reactiveHref(),$h)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ao],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ao],replaceUrl:[2,"replaceUrl","replaceUrl",ao],routerLink:"routerLink"},features:[Tt]})}return t})(),dg=(()=>{class t{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new ae;link=_(Eo,{optional:!0});constructor(n,r,i,o){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=n.events.subscribe(s=>{s instanceof vt&&this.update()})}ngAfterContentInit(){B(this.links.changes,B(null)).pipe(Kn()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=se(n).pipe(Kn()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=dN(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact??!1?w({},cg):w({},lg);return i=>{let o=i.urlTree;return o?we(Jp(o,n,r)):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(W(yn),W(Ze),W(Gt),W(At))};static \u0275dir=Ke({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Cl(o,Eo,5),r&2){let s;dp(s=fp())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Tt]})}return t})();function dN(t){return!!t.paths}var Zs=class{};var BE=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,i,o){this.router=n,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(jt(n=>n instanceof vt),Pi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription?.unsubscribe()}processRoutes(n,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=no(o.providers,n,""));let s=o._injector??n;o._loadedNgModuleFactory&&!o._loadedInjector&&(o._loadedInjector=o._loadedNgModuleFactory.create(s).injector);let a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return se(i).pipe(Kn())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{if(n.destroyed)return B(null);let i;r.loadChildren&&r.canLoad===void 0?i=se(this.loader.loadChildren(n,r)):i=B(null);let o=i.pipe(je(s=>s===null?B(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,r._loadedNgModuleFactory=s.factory,this.processRoutes(s.injector??n,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(n,r);return se([o,s]).pipe(Kn())}else return o})}static \u0275fac=function(r){return new(r||t)(N(yn),N(Ce),N(Zs),N(lu))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$E=new I(""),fN=(()=>{class t{options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=uo;restoredId=0;store={};urlSerializer=_(ai);zone=_(ue);viewportScroller=_(Cp);transitions=_(du);constructor(n){this.options=n,this.options.scrollPositionRestoration||="disabled",this.options.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof vr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof vt?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof gn&&n.code===ho.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{if(!(n instanceof go)||n.scrollBehavior==="manual")return;let r={behavior:"instant"};n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position,r):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(n,r){let i=we(this.transitions.currentNavigation)?.extras.scroll;this.zone.runOutsideAngular(()=>h(this,null,function*(){yield new Promise(o=>{setTimeout(o),typeof requestAnimationFrame<"u"&&requestAnimationFrame(o)}),this.zone.run(()=>{this.transitions.events.next(new go(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){rp()};static \u0275prov=C({token:t,factory:t.\u0275fac})}return t})();function fg(t,...e){return Vi([{provide:li,multi:!0,useValue:t},[],{provide:mn,useFactory:HE},{provide:Ss,multi:!0,useFactory:zE},e.map(n=>n.\u0275providers)])}function HE(){return _(yn).routerState.root}function Js(t,e){return{\u0275kind:t,\u0275providers:e}}function zE(){let t=_(nt);return e=>{let n=t.get(dr);if(e!==n.components[0])return;let r=t.get(yn),i=t.get(GE);t.get(hg)===1&&r.initialNavigation(),t.get(KE,null,{optional:!0})?.setUpPreloading(),t.get($E,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var GE=new I("",{factory:()=>new le}),hg=new I("",{factory:()=>1});function qE(){let t=[{provide:Vh,useValue:!0},{provide:hg,useValue:0},Dl(()=>{let e=_(nt);return e.get(mp,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(yn),o=e.get(GE);fu(i,()=>{r(!0)}),e.get(du).afterPreactivation=()=>(r(!0),o.closed?B(void 0):o),i.initialNavigation()}))})];return Js(2,t)}function WE(){let t=[Dl(()=>{_(yn).setUpLocationChangeListener()}),{provide:hg,useValue:2}];return Js(3,t)}var KE=new I("");function QE(t){return Js(0,[{provide:KE,useExisting:BE},{provide:Zs,useExisting:t}])}function hu(){return Js(8,[eg,{provide:Qs,useExisting:eg}])}function YE(t){ht("NgRouterViewTransitions");let e=[{provide:ig,useValue:jE},{provide:og,useValue:w({skipNextTransition:!!t?.skipInitialTransition},t)}];return Js(9,e)}var ZE=[pr,{provide:ai,useClass:Bn},yn,ci,{provide:mn,useFactory:HE},lu,[]],pg=(()=>{class t{constructor(){}static forRoot(n,r){return{ngModule:t,providers:[ZE,[],{provide:li,multi:!0,useValue:n},[],r?.errorHandler?{provide:sg,useValue:r.errorHandler}:[],{provide:_r,useValue:r||{}},r?.useHash?pN():gN(),hN(),r?.preloadingStrategy?QE(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?mN(r):[],r?.bindToComponentInputs?hu().\u0275providers:[],r?.enableViewTransitions?YE().\u0275providers:[],yN()]}}static forChild(n){return{ngModule:t,providers:[{provide:li,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=qt({type:t});static \u0275inj=bt({})}return t})();function hN(){return{provide:$E,useFactory:()=>{let t=_(Cp),e=_(_r);return e.scrollOffset&&t.setOffset(e.scrollOffset),new fN(e)}}}function pN(){return{provide:Kt,useClass:_p}}function gN(){return{provide:Kt,useClass:xl}}function mN(t){return[t.initialNavigation==="disabled"?WE().\u0275providers:[],t.initialNavigation==="enabledBlocking"?qE().\u0275providers:[]]}var ug=new I("");function yN(){return[{provide:ug,useFactory:zE},{provide:Ss,multi:!0,useExisting:ug}]}var ib=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(W(Gt),W(Ze))};static \u0275dir=Ke({type:t})}return t})(),ob=(()=>{class t extends ib{static \u0275fac=(()=>{let n;return function(i){return(n||(n=ur(t)))(i||t)}})();static \u0275dir=Ke({type:t,features:[xn]})}return t})(),wg=new I("");var _N={provide:wg,useExisting:In(()=>_u),multi:!0};function wN(){let t=Mt()?Mt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var EN=new I(""),_u=(()=>{class t extends ib{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!wN())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(W(Gt),W(Ze),W(EN,8))};static \u0275dir=Ke({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&be("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[oo([_N]),xn]})}return t})();function Eg(t){return t==null||bg(t)===0}function bg(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var sb=new I(""),bN=new I(""),DN=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ra=class{static min(e){return ab(e)}static max(e){return CN(e)}static required(e){return SN(e)}static requiredTrue(e){return IN(e)}static email(e){return TN(e)}static minLength(e){return AN(e)}static maxLength(e){return MN(e)}static pattern(e){return RN(e)}static nullValidator(e){return gu()}static compose(e){return hb(e)}static composeAsync(e){return gb(e)}};function ab(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function CN(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function SN(t){return Eg(t.value)?{required:!0}:null}function IN(t){return t.value===!0?null:{required:!0}}function TN(t){return Eg(t.value)||DN.test(t.value)?null:{email:!0}}function AN(t){return e=>{let n=e.value?.length??bg(e.value);return n===null||n===0?null:n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}function MN(t){return e=>{let n=e.value?.length??bg(e.value);return n!==null&&n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}function RN(t){if(!t)return gu;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Eg(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function gu(t){return null}function cb(t){return t!=null}function lb(t){return On(t)?se(t):t}function ub(t){let e={};return t.forEach(n=>{e=n!=null?w(w({},e),n):e}),Object.keys(e).length===0?null:e}function db(t,e){return e.map(n=>n(t))}function NN(t){return!t.validate}function fb(t){return t.map(e=>NN(e)?e:n=>e.validate(n))}function hb(t){if(!t)return null;let e=t.filter(cb);return e.length==0?null:function(n){return ub(db(n,e))}}function pb(t){return t!=null?hb(fb(t)):null}function gb(t){if(!t)return null;let e=t.filter(cb);return e.length==0?null:function(n){let r=db(n,e).map(lb);return Ud(r).pipe(ie(ub))}}function mb(t){return t!=null?gb(fb(t)):null}function JE(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function yb(t){return t._rawValidators}function vb(t){return t._rawAsyncValidators}function gg(t){return t?Array.isArray(t)?t:[t]:[]}function mu(t,e){return Array.isArray(t)?t.includes(e):t===e}function XE(t,e){let n=gg(e);return gg(t).forEach(i=>{mu(n,i)||n.push(i)}),n}function eb(t,e){return gg(e).filter(n=>!mu(t,n))}var mg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=pb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}};var ia=class extends mg{_parent=null;name=null;valueAccessor=null},yg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var _b=(()=>{class t extends yg{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(W(ia,2))};static \u0275dir=Ke({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&io("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[xn]})}return t})();var Xs="VALID",pu="INVALID",bo="PENDING",ea="DISABLED",ui=class{},yu=class extends ui{value;source;constructor(e,n){super(),this.value=e,this.source=n}},ta=class extends ui{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},na=class extends ui{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Do=class extends ui{status;source;constructor(e,n){super(),this.status=e,this.source=n}};var vg=class extends ui{source;constructor(e){super(),this.source=e}};function xN(t){return(wu(t)?t.validators:t)||null}function ON(t){return Array.isArray(t)?pb(t):t||null}function kN(t,e){return(wu(e)?e.asyncValidators:t)||null}function PN(t){return Array.isArray(t)?mb(t):t||null}function wu(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var _g=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return we(this.statusReactive)}set status(e){we(()=>this.statusReactive.set(e))}_status=ei(()=>this.statusReactive());statusReactive=rt(void 0);get valid(){return this.status===Xs}get invalid(){return this.status===pu}get pending(){return this.status==bo}get disabled(){return this.status===ea}get enabled(){return this.status!==ea}errors;get pristine(){return we(this.pristineReactive)}set pristine(e){we(()=>this.pristineReactive.set(e))}_pristine=ei(()=>this.pristineReactive());pristineReactive=rt(!0);get dirty(){return!this.pristine}get touched(){return we(this.touchedReactive)}set touched(e){we(()=>this.touchedReactive.set(e))}_touched=ei(()=>this.touchedReactive());touchedReactive=rt(!1);get untouched(){return!this.touched}_events=new le;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(XE(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(XE(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(eb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(eb(e,this._rawAsyncValidators))}hasValidator(e){return mu(this._rawValidators,e)}hasAsyncValidator(e){return mu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(z(w({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new na(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new na(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(z(w({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ta(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new ta(!0,r))}markAsPending(e={}){this.status=bo;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Do(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(z(w({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ea,this.errors=null,this._forEachChild(i=>{i.disable(z(w({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new yu(this.value,r)),this._events.next(new Do(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(z(w({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Xs,this._forEachChild(r=>{r.enable(z(w({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(z(w({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xs||this.status===bo)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new yu(this.value,n)),this._events.next(new Do(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(z(w({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ea:Xs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=bo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=lb(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Do(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new ae,this.statusChanges=new ae}_calculateStatus(){return this._allControlsDisabled()?ea:this.errors?pu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bo)?bo:this._anyControlsHaveStatus(pu)?pu:Xs}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new ta(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new na(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){wu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=ON(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=PN(this._rawAsyncValidators)}};var wb=new I("",{factory:()=>Dg}),Dg="always";function FN(t,e,n=Dg){jN(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),UN(t,e),$N(t,e),BN(t,e),LN(t,e)}function tb(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),VN(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function vu(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function LN(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function jN(t,e){let n=yb(t);e.validator!==null?t.setValidators(JE(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=vb(t);e.asyncValidator!==null?t.setAsyncValidators(JE(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();vu(e._rawValidators,i),vu(e._rawAsyncValidators,i)}function VN(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=yb(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=vb(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return vu(e._rawValidators,r),vu(e._rawAsyncValidators,r),n}function UN(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Eb(t,e)})}function BN(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Eb(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Eb(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function $N(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function HN(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function zN(t){return Object.getPrototypeOf(t.constructor)===ob}function GN(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===_u?n=o:zN(o)?r=o:i=o}),i||r||n||null}function nb(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function rb(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Cg=class extends _g{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(xN(n),kN(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wu(n)&&(n.nonNullable||n.initialValueIsDefault)&&(rb(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new vg(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){nb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){nb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){rb(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var qN={provide:wg,useExisting:In(()=>Sg),multi:!0},Sg=(()=>{class t extends ob{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ur(t)))(i||t)}})();static \u0275dir=Ke({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&be("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[oo([qN]),xn]})}return t})();var bb=new I(""),WN={provide:ia,useExisting:In(()=>Ig)},Ig=(()=>{class t extends ia{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(n){}model;update=new ae;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=GN(this,i)}ngOnChanges(n){if(this._isControlChanged(n)){let r=n.form.previousValue;r&&tb(r,this,!1),FN(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}HN(n,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&tb(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_isControlChanged(n){return n.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||t)(W(sb,10),W(bN,10),W(wg,10),W(bb,8),W(wb,8))};static \u0275dir=Ke({type:t,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[oo([WN]),xn,Tt]})}return t})();function KN(t){return typeof t=="number"?t:parseFloat(t)}var QN=(()=>{class t{_validator=gu;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):gu,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ke({type:t,features:[Tt]})}return t})();var YN={provide:sb,useExisting:In(()=>Tg),multi:!0},Tg=(()=>{class t extends QN{min;inputName="min";normalizeInput=n=>KN(n);createValidator=n=>ab(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=ur(t)))(i||t)}})();static \u0275dir=Ke({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&kn("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[oo([YN]),xn]})}return t})();var ZN=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=qt({type:t});static \u0275inj=bt({})}return t})();var Db=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:bb,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:wb,useValue:n.callSetDisabledState??Dg}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=qt({type:t});static \u0275inj=bt({imports:[ZN]})}return t})();var Co={production:!0,supabaseUrl:"https://dbuncunaijfbdrrhnjmi.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRidW5jdW5haWpmYmRycmhuam1pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEzODMxMTQsImV4cCI6MjA1Njk1OTExNH0.VZ7jh7ARAe8i9y6F5bkuSlfdSyyKNPpIHdDwZXr2x9o",poolId:1};var Cb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);var So=class extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}},oa=class extends So{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Io=class extends So{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},To=class extends So{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},Eu=(function(t){return t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2",t})(Eu||{});var sa=class{constructor(e,{headers:n={},customFetch:r,region:i=Eu.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=Cb(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return qa(this,arguments,void 0,function*(n,r={}){var i;let o,s;try{let{headers:a,method:c,body:l,signal:u,timeout:d}=r,p={},{region:f}=r;f||(f=this.region);let g=new URL(`${this.url}/${n}`);f&&f!=="any"&&(p["x-region"]=f,g.searchParams.set("forceFunctionRegion",f));let m;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(p["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(p["Content-Type"]="application/json",m=JSON.stringify(l)):l&&typeof l!="string"&&!(typeof Blob<"u"&&l instanceof Blob)&&!(l instanceof ArrayBuffer)&&!(typeof FormData<"u"&&l instanceof FormData)?m=JSON.stringify(l):m=l;let y=u;d&&(s=new AbortController,o=setTimeout(()=>s.abort(),d),u?(y=s.signal,u.addEventListener("abort",()=>s.abort())):y=s.signal);let v=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),a),body:m,signal:y}).catch(G=>{throw new oa(G)}),A=v.headers.get("x-relay-error");if(A&&A==="true")throw new Io(v);if(!v.ok)throw new To(v);let b=((i=v.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),D;return b==="application/json"?D=yield v.json():b==="application/octet-stream"||b==="application/pdf"?D=yield v.blob():b==="text/event-stream"?D=v:b==="multipart/form-data"?D=yield v.formData():D=yield v.text(),{data:D,error:null,response:v}}catch(a){return{data:null,error:a,response:a instanceof To||a instanceof Io?a.context:void 0}}finally{o&&clearTimeout(o)}})}};var Ib=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},XN=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(o=>h(this,null,function*(){let s=null,a=null,c=null,l=o.status,u=o.statusText;if(o.ok){var d,p;if(n.method!=="HEAD"){var f;let v=yield o.text();v===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((f=n.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=v:a=JSON.parse(v))}let m=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),y=(p=o.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");m&&y&&y.length>1&&(c=parseInt(y[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(s={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,c=null,l=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var g;let m=yield o.text();try{s=JSON.parse(m),Array.isArray(s)&&o.status===404&&(a=[],s=null,l=200,u="OK")}catch{o.status===404&&m===""?(l=204,u="No Content"):s={message:m}}if(s&&n.isMaybeSingle&&(!(s==null||(g=s.details)===null||g===void 0)&&g.includes("0 rows"))&&(s=null,l=200,u="OK"),s&&n.shouldThrowOnError)throw new Ib(s)}return{error:s,data:a,count:c,status:l,statusText:u}}));return this.shouldThrowOnError||(i=i.catch(o=>{var s;let a="",c=o?.cause;if(c){var l,u,d,p;let g=(l=c?.message)!==null&&l!==void 0?l:"",m=(u=c?.code)!==null&&u!==void 0?u:"";a=`${(d=o?.name)!==null&&d!==void 0?d:"FetchError"}: ${o?.message}`,a+=`

Caused by: ${(p=c?.name)!==null&&p!==void 0?p:"Error"}: ${g}`,m&&(a+=` (${m})`),c?.stack&&(a+=`
${c.stack}`)}else{var f;a=(f=o?.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},ex=class extends XN{select(t){let e=!1,n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){let o=i?`${i}.order`:"order",s=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${s?`${s},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){let r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){let i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var s;let a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}},Sb=new RegExp("[,()]"),Ao=class extends ex{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){let n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Sb.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){let n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Sb.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");let o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){let r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},tx=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){let{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET",o=!1,s=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join(""),{url:a,headers:c}=this.cloneRequestState();return a.searchParams.set("select",s),r&&c.append("Prefer",`count=${r}`),new Ao({method:i,url:a,headers:c,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;let i="POST",{url:o,headers:s}=this.cloneRequestState();if(e&&s.append("Prefer",`count=${e}`),n||s.append("Prefer","missing=default"),Array.isArray(t)){let a=t.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(a.length>0){let c=[...new Set(a)].map(l=>`"${l}"`);o.searchParams.set("columns",c.join(","))}}return new Ao({method:i,url:o,headers:s,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;let s="POST",{url:a,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&a.searchParams.set("on_conflict",e),r&&c.append("Prefer",`count=${r}`),i||c.append("Prefer","missing=default"),Array.isArray(t)){let l=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){let u=[...new Set(l)].map(d=>`"${d}"`);a.searchParams.set("columns",u.join(","))}}return new Ao({method:s,url:a,headers:c,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var n;let r="PATCH",{url:i,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Ao({method:r,url:i,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;let n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Ao({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Tb=class Ab{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new tx(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ab(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){var s;let a,c=new URL(`${this.url}/rpc/${e}`),l,u=f=>f!==null&&typeof f=="object"&&(!Array.isArray(f)||f.some(u)),d=r&&Object.values(n).some(u);d?(a="POST",l=n):r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([f,g])=>g!==void 0).map(([f,g])=>[f,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([f,g])=>{c.searchParams.append(f,g)})):(a="POST",l=n);let p=new Headers(this.headers);return d?p.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&p.set("Prefer",`count=${o}`),new Ao({method:a,url:c,headers:p,schema:this.schemaName,body:l,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};var Ag=class{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let n=globalThis.process;if(n){let r=n.versions;if(r&&r.node){let i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){let r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}},Mg=Ag;var Mb="2.90.1";var Rb=`realtime-js/${Mb}`,Rg="1.0.0",Nb="2.0.0",Ng=Rg;var aa=1e4,xb=1e3,Ob=100,wr=(function(t){return t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed",t})(wr||{}),Oe=(function(t){return t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving",t})(Oe||{}),Nt=(function(t){return t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token",t})(Nt||{}),xg=(function(t){return t.websocket="websocket",t})(xg||{}),di=(function(t){return t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed",t})(di||{});var bu=class{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;let i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;let i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(e,n,r){var i,o;let s=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",c=(o=e.join_ref)!==null&&o!==void 0?o:"",l=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);let p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+l.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+p),g=new DataView(f),m=0;g.setUint8(m++,this.KINDS.userBroadcastPush),g.setUint8(m++,c.length),g.setUint8(m++,a.length),g.setUint8(m++,s.length),g.setUint8(m++,l.length),g.setUint8(m++,d.length),g.setUint8(m++,n),Array.from(c,v=>g.setUint8(m++,v.charCodeAt(0))),Array.from(a,v=>g.setUint8(m++,v.charCodeAt(0))),Array.from(s,v=>g.setUint8(m++,v.charCodeAt(0))),Array.from(l,v=>g.setUint8(m++,v.charCodeAt(0))),Array.from(d,v=>g.setUint8(m++,v.charCodeAt(0)));var y=new Uint8Array(f.byteLength+r.byteLength);return y.set(new Uint8Array(f),0),y.set(new Uint8Array(r),f.byteLength),y.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){let r=JSON.parse(e),[i,o,s,a,c]=r;return n({join_ref:i,ref:o,topic:s,event:a,payload:c})}return n({})}_binaryDecode(e){let n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,n,i)}_decodeUserBroadcast(e,n,r){let i=n.getUint8(1),o=n.getUint8(2),s=n.getUint8(3),a=n.getUint8(4),c=this.HEADER_LENGTH+4,l=r.decode(e.slice(c,c+i));c=c+i;let u=r.decode(e.slice(c,c+o));c=c+o;let d=r.decode(e.slice(c,c+s));c=c+s;let p=e.slice(c,e.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(p)):p,g={type:this.BROADCAST_EVENT,event:u,payload:f};return s>0&&(g.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}};var Mo=class{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ce=(function(t){return t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange",t})(ce||{}),kg=(t,e,n={})=>{var r;let i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,s)=>(o[s]=nx(s,t,e,i),o),{}):{}},nx=(t,e,n,r)=>{let i=e.find(a=>a.name===t),o=i?.type,s=n[t];return o&&!r.includes(o)?kb(o,s):Og(s)},kb=(t,e)=>{if(t.charAt(0)==="_"){let n=t.slice(1,t.length);return sx(e,n)}switch(t){case ce.bool:return rx(e);case ce.float4:case ce.float8:case ce.int2:case ce.int4:case ce.int8:case ce.numeric:case ce.oid:return ix(e);case ce.json:case ce.jsonb:return ox(e);case ce.timestamp:return ax(e);case ce.abstime:case ce.date:case ce.daterange:case ce.int4range:case ce.int8range:case ce.money:case ce.reltime:case ce.text:case ce.time:case ce.timestamptz:case ce.timetz:case ce.tsrange:case ce.tstzrange:return Og(e);default:return Og(e)}},Og=t=>t,rx=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ix=t=>{if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ox=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},sx=(t,e)=>{if(typeof t!="string")return t;let n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o,s=t.slice(1,n);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>kb(e,a))}return t},ax=t=>typeof t=="string"?t.replace(" ","T"):t,Du=t=>{let e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};var Ro=class{constructor(e,n,r={},i=aa){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var ca=class t{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=t.syncState(this.state,i,o,s),this.pendingDiffs.forEach(c=>{this.state=t.syncDiff(this.state,c,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=t.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){let o=this.cloneDeep(e),s=this.transformState(n),a={},c={};return this.map(o,(l,u)=>{s[l]||(c[l]=u)}),this.map(s,(l,u)=>{let d=o[l];if(d){let p=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),g=u.filter(y=>f.indexOf(y.presence_ref)<0),m=d.filter(y=>p.indexOf(y.presence_ref)<0);g.length>0&&(a[l]=g),m.length>0&&(c[l]=m)}else a[l]=u}),this.syncDiff(o,{joins:a,leaves:c},r,i)}static syncDiff(e,n,r,i){let{joins:o,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,c)=>{var l;let u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){let d=e[a].map(f=>f.presence_ref),p=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...p)}r(a,u,c)}),this.map(s,(a,c)=>{let l=e[a];if(!l)return;let u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,i(a,l,c),l.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{let i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var la=(function(t){return t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system",t})(la||{}),$n=(function(t){return t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR",t})($n||{});var ua=class t{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Oe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ro(this,Nt.join,this.params,this.timeout),this.rejoinTimer=new Mo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Oe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Oe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new ca(this),this.broadcastEndpointURL=Du(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Oe.closed){let{config:{broadcast:s,presence:a,private:c}}=this.params,l=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[la.PRESENCE]&&this.bindings[la.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},p={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e?.($n.CHANNEL_ERROR,f)),this._onClose(()=>e?.($n.CLOSED)),this.updateJoinPayload(Object.assign({config:p},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",g=>h(this,[g],function*({postgres_changes:f}){var m;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){e?.($n.SUBSCRIBED);return}else{let y=this.bindings.postgres_changes,v=(m=y?.length)!==null&&m!==void 0?m:0,A=[];for(let b=0;b<v;b++){let D=y[b],{filter:{event:G,schema:oe,table:F,filter:q}}=D,ze=f&&f[b];if(ze&&ze.event===G&&t.isFilterValueEqual(ze.schema,oe)&&t.isFilterValueEqual(ze.table,F)&&t.isFilterValueEqual(ze.filter,q))A.push(Object.assign(Object.assign({},D),{id:ze.id}));else{this.unsubscribe(),this.state=Oe.errored,e?.($n.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,e&&e($n.SUBSCRIBED);return}})).receive("error",f=>{this.state=Oe.errored,e?.($n.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e?.($n.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return h(this,arguments,function*(e,n={}){return yield this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)})}untrack(){return h(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,n,r){return this.state===Oe.joined&&e===la.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>h(this,null,function*(){return yield this.subscribe()}))),this._on(e,n,r)}httpSend(i,o){return h(this,arguments,function*(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");let a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);let c={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},l=yield this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{let d=yield l.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))})}send(r){return h(this,arguments,function*(e,n={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:s,payload:a}=e,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);let l={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{let u=yield this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return yield(o=u.body)===null||o===void 0?void 0:o.cancel(),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,c,l;let u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Oe.leaving;let n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Ro(this,Nt.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Oe.closed,this.bindings={}}_fetchWithTimeout(e,n,r){return h(this,null,function*(){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=yield this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),s})}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ro(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Ob){let n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;let s=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Nt;if(r&&[a,c,l,u].indexOf(s)>=0&&r!==this._joinRef())return;let p=this._onMessage(s,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var g,m,y;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(m=f.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===s}).map(f=>f.callback(p,r)):(o=this.bindings[s])===null||o===void 0||o.filter(f=>{var g,m,y,v,A,b,D,G;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in f){let oe=f.id,F=(g=f.filter)===null||g===void 0?void 0:g.event;return oe&&((m=n.ids)===null||m===void 0?void 0:m.includes(oe))&&(F==="*"||F?.toLocaleLowerCase()===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))&&(!(!((v=f.filter)===null||v===void 0)&&v.table)||f.filter.table===((A=n.data)===null||A===void 0?void 0:A.table))}else{let oe=(D=(b=f?.filter)===null||b===void 0?void 0:b.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return oe==="*"||oe===((G=n?.event)===null||G===void 0?void 0:G.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===s}).map(f=>{if(typeof p=="object"&&"ids"in p){let g=p.data,{schema:m,table:y,commit_timestamp:v,type:A,errors:b}=g;p=Object.assign(Object.assign({},{schema:m,table:y,commit_timestamp:v,eventType:A,new:{},old:{},errors:b}),this._getPayloadRecords(g))}f.callback(p,r)})}_isClosed(){return this.state===Oe.closed}_isJoined(){return this.state===Oe.joined}_isJoining(){return this.state===Oe.joining}_isLeaving(){return this.state===Oe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){let i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){let r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&t.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(let r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Nt.close,{},e)}_onError(e){this._on(Nt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Oe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=kg(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=kg(e.columns,e.old_record)),n}};var Pg=()=>{},Cu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},lx=[1e3,2e3,5e3,1e4],ux=1e4,dx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,da=class{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=aa,this.transport=null,this.heartbeatIntervalMs=Cu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Pg,this.ref=0,this.reconnectTimer=null,this.vsn=Ng,this.logger=Pg,this.conn=null,this.sendBuffer=[],this.serializer=new bu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${xg.websocket}`,this.httpEndpoint=Du(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Mg.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");let n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(e){return h(this,null,function*(){let n=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),n})}removeAllChannels(){return h(this,null,function*(){let e=yield Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e})}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case wr.connecting:return di.Connecting;case wr.open:return di.Open;case wr.closing:return di.Closing;default:return di.Closed}}isConnected(){return this.connectionState()===di.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){let r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{let o=new ua(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){let{topic:n,event:r,payload:i,ref:o}=e,s=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(e=null){return h(this,null,function*(){this._authPromise=this._performAuth(e);try{yield this._authPromise}finally{this._authPromise=null}})}_isManualToken(){return this._manuallySetToken}sendHeartbeat(){return h(this,null,function*(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(xb,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Cu.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")})}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){let l=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",l)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:r,event:i,payload:o,ref:s}=n,a=s?`(${s})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${a}`.trim(),o),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,o,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===wr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===wr.open||this.conn.readyState===wr.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Nt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;let r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{let r=new Blob([dx],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}_performAuth(e=null){return h(this,null,function*(){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=yield this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{let o={access_token:n,version:Rb};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Nt.access_token,{access_token:n})}))})}_waitForAuthIfNeeded(){return h(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Mo(()=>h(this,null,function*(){setTimeout(()=>h(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),Cu.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,s,a,c,l,u,d,p,f;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:aa,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Cu.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=e?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=e?.heartbeatCallback)!==null&&a!==void 0?a:Pg,this.vsn=(c=e?.vsn)!==null&&c!==void 0?c:Ng,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e?.reconnectAfterMs)!==null&&l!==void 0?l:g=>lx[g-1]||ux,this.vsn){case Rg:this.encode=(u=e?.encode)!==null&&u!==void 0?u:(g,m)=>m(JSON.stringify(g)),this.decode=(d=e?.decode)!==null&&d!==void 0?d:(g,m)=>m(JSON.parse(g));break;case Nb:this.encode=(p=e?.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(f=e?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}};var fa=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function fx(t,e,n){let r=new URL(e,t);if(n)for(let[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}function hx(t){return h(this,null,function*(){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?yield t.getHeaders():{}})}function px(t){let e=t.fetchImpl??globalThis.fetch;return{request(c){return h(this,arguments,function*({method:r,path:i,query:o,body:s,headers:a}){let l=fx(t.baseUrl,i,o),u=yield hx(t.auth),d=yield e(l,{method:r,headers:w(w(w({},s?{"Content-Type":"application/json"}:{}),u),a),body:s?JSON.stringify(s):void 0}),p=yield d.text(),f=(d.headers.get("content-type")||"").includes("application/json"),g=f&&p?JSON.parse(p):p;if(!d.ok){let m=f?g:void 0,y=m?.error;throw new fa(y?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:y?.type,icebergCode:y?.code,details:m})}return{status:d.status,headers:d.headers,data:g}})}}}function Su(t){return t.join("")}var gx=class{constructor(t,e=""){this.client=t,this.prefix=e}listNamespaces(t){return h(this,null,function*(){let e=t?{parent:Su(t.namespace)}:void 0;return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))})}createNamespace(t,e){return h(this,null,function*(){let n={namespace:t.namespace,properties:e?.properties};return(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data})}dropNamespace(t){return h(this,null,function*(){yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Su(t.namespace)}`})})}loadNamespaceMetadata(t){return h(this,null,function*(){return{properties:(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Su(t.namespace)}`})).data.properties}})}namespaceExists(t){return h(this,null,function*(){try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Su(t.namespace)}`}),!0}catch(e){if(e instanceof fa&&e.status===404)return!1;throw e}})}createNamespaceIfNotExists(t,e){return h(this,null,function*(){try{return yield this.createNamespace(t,e)}catch(n){if(n instanceof fa&&n.status===409)return;throw n}})}};function No(t){return t.join("")}var mx=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}listTables(t){return h(this,null,function*(){return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${No(t.namespace)}/tables`})).data.identifiers})}createTable(t,e){return h(this,null,function*(){let n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${No(t.namespace)}/tables`,body:e,headers:n})).data.metadata})}updateTable(t,e){return h(this,null,function*(){let n=yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${No(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}})}dropTable(t,e){return h(this,null,function*(){yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${No(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})})}loadTable(t){return h(this,null,function*(){let e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${No(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata})}tableExists(t){return h(this,null,function*(){let e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${No(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof fa&&n.status===404)return!1;throw n}})}createTableIfNotExists(t,e){return h(this,null,function*(){try{return yield this.createTable(t,e)}catch(n){if(n instanceof fa&&n.status===409)return yield this.loadTable({namespace:t.namespace,name:e.name});throw n}})}},Pb=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);let n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=px({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new gx(this.client,e),this.tableOps=new mx(this.client,e,this.accessDelegation)}listNamespaces(t){return h(this,null,function*(){return this.namespaceOps.listNamespaces(t)})}createNamespace(t,e){return h(this,null,function*(){return this.namespaceOps.createNamespace(t,e)})}dropNamespace(t){return h(this,null,function*(){yield this.namespaceOps.dropNamespace(t)})}loadNamespaceMetadata(t){return h(this,null,function*(){return this.namespaceOps.loadNamespaceMetadata(t)})}listTables(t){return h(this,null,function*(){return this.tableOps.listTables(t)})}createTable(t,e){return h(this,null,function*(){return this.tableOps.createTable(t,e)})}updateTable(t,e){return h(this,null,function*(){return this.tableOps.updateTable(t,e)})}dropTable(t,e){return h(this,null,function*(){yield this.tableOps.dropTable(t,e)})}loadTable(t){return h(this,null,function*(){return this.tableOps.loadTable(t)})}namespaceExists(t){return h(this,null,function*(){return this.namespaceOps.namespaceExists(t)})}tableExists(t){return h(this,null,function*(){return this.tableOps.tableExists(t)})}createNamespaceIfNotExists(t,e){return h(this,null,function*(){return this.namespaceOps.createNamespaceIfNotExists(t,e)})}createTableIfNotExists(t,e){return h(this,null,function*(){return this.tableOps.createTableIfNotExists(t,e)})}};var Iu=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function me(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var yx=class extends Iu{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},jg=class extends Iu{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}},Bg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),vx=()=>Response,Vg=t=>{if(Array.isArray(t))return t.map(n=>Vg(n));if(typeof t=="function"||t!==Object(t))return t;let e={};return Object.entries(t).forEach(([n,r])=>{let i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Vg(r)}),e},_x=t=>{if(typeof t!="object"||t===null)return!1;let e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},wx=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function ha(t){"@babel/helpers - typeof";return ha=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ha(t)}function Ex(t,e){if(ha(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ha(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bx(t){var e=Ex(t,"string");return ha(e)=="symbol"?e:e+""}function Dx(t,e,n){return(e=bx(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fb(Object(n),!0).forEach(function(r){Dx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Fg=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Cx=(t,e,n)=>h(null,null,function*(){t instanceof(yield vx())&&!n?.noResolveJson?t.json().then(r=>{let i=t.status||500,o=r?.statusCode||i+"";e(new yx(Fg(r),i,o))}).catch(r=>{e(new jg(Fg(r),r))}):e(new jg(Fg(t),t))}),Sx=(t,e,n,r)=>{let i={method:t,headers:e?.headers||{}};return t==="GET"||!r?i:(_x(r)?(i.headers=O({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),O(O({},i),n))};function ga(t,e,n,r,i,o){return h(this,null,function*(){return new Promise((s,a)=>{t(n,Sx(e,r,i,o)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>Cx(c,a,r))})})}function pa(t,e,n,r){return h(this,null,function*(){return ga(t,"GET",e,n,r)})}function Yt(t,e,n,r,i){return h(this,null,function*(){return ga(t,"POST",e,r,i,n)})}function Ug(t,e,n,r,i){return h(this,null,function*(){return ga(t,"PUT",e,r,i,n)})}function Ix(t,e,n,r){return h(this,null,function*(){return ga(t,"HEAD",e,O(O({},n),{},{noResolveJson:!0}),r)})}function $g(t,e,n,r,i){return h(this,null,function*(){return ga(t,"DELETE",e,r,i,n)})}var Tx=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}execute(){return h(this,null,function*(){var t=this;try{return{data:(yield t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(me(e))return{data:null,error:e};throw e}})}},Vb;Vb=Symbol.toStringTag;var Ax=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Vb]="BlobDownloadBuilder",this.promise=null}asStream(){return new Tx(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return h(this,null,function*(){var t=this;try{return{data:yield(yield t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(me(e))return{data:null,error:e};throw e}})}},Mx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Lb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Rx=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=Bg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,n,r){return h(this,null,function*(){var i=this;try{let o,s=O(O({},Lb),r),a=O(O({},i.headers),t==="POST"&&{"x-upsert":String(s.upsert)}),c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",i.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",s.cacheControl),c&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(c))):(o=n,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!s.duplex&&(s.duplex="half")),r?.headers&&(a=O(O({},a),r.headers));let l=i._removeEmptyFolders(e),u=i._getFinalPath(l),d=yield(t=="PUT"?Ug:Yt)(i.fetch,`${i.url}/object/${u}`,o,O({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(me(o))return{data:null,error:o};throw o}})}upload(t,e,n){return h(this,null,function*(){return this.uploadOrUpdate("POST",t,e,n)})}uploadToSignedUrl(t,e,n,r){return h(this,null,function*(){var i=this;let o=i._removeEmptyFolders(t),s=i._getFinalPath(o),a=new URL(i.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let c,l=O({upsert:Lb.upsert},r),u=O(O({},i.headers),{"x-upsert":String(l.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",l.cacheControl)):(c=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType),{data:{path:o,fullPath:(yield Ug(i.fetch,a.toString(),c,{headers:u})).Key},error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(me(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,e){return h(this,null,function*(){var n=this;try{let r=n._getFinalPath(t),i=O({},n.headers);e?.upsert&&(i["x-upsert"]="true");let o=yield Yt(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(n.url+o.url),a=s.searchParams.get("token");if(!a)throw new Iu("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(me(r))return{data:null,error:r};throw r}})}update(t,e,n){return h(this,null,function*(){return this.uploadOrUpdate("PUT",t,e,n)})}move(t,e,n){return h(this,null,function*(){var r=this;try{return{data:yield Yt(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(me(i))return{data:null,error:i};throw i}})}copy(t,e,n){return h(this,null,function*(){var r=this;try{return{data:{path:(yield Yt(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(me(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,n){return h(this,null,function*(){var r=this;try{let i=r._getFinalPath(t),o=yield Yt(r.fetch,`${r.url}/object/sign/${i}`,O({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:r.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${r.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(me(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,n){return h(this,null,function*(){var r=this;try{let i=yield Yt(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(s=>O(O({},s),{},{signedUrl:s.signedURL?encodeURI(`${r.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(me(i))return{data:null,error:i};throw i}})}download(t,e){let n=typeof e?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(e?.transform||{}),i=r?`?${r}`:"",o=this._getFinalPath(t),s=()=>pa(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new Ax(s,this.shouldThrowOnError)}info(t){return h(this,null,function*(){var e=this;let n=e._getFinalPath(t);try{return{data:Vg(yield pa(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(me(r))return{data:null,error:r};throw r}})}exists(t){return h(this,null,function*(){var e=this;let n=e._getFinalPath(t);try{return yield Ix(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(me(r)&&r instanceof jg){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let n=this._getFinalPath(t),r=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);let o=typeof e?.transform<"u"?"render/image":"object",s=this.transformOptsToQueryString(e?.transform||{});s!==""&&r.push(s);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${a}`)}}}remove(t){return h(this,null,function*(){var e=this;try{return{data:yield $g(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}list(t,e,n){return h(this,null,function*(){var r=this;try{let i=O(O(O({},Mx),e),{},{prefix:t||""});return{data:yield Yt(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(me(i))return{data:null,error:i};throw i}})}listV2(t,e){return h(this,null,function*(){var n=this;try{let r=O({},t);return{data:yield Yt(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(me(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}},Ub="2.90.1",Bb={"X-Client-Info":`storage-js/${Ub}`},Nx=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;let i=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=O(O({},Bb),e),this.fetch=Bg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return h(this,null,function*(){var e=this;try{let n=e.listBucketOptionsToQueryString(t);return{data:yield pa(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}getBucket(t){return h(this,null,function*(){var e=this;try{return{data:yield pa(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}createBucket(n){return h(this,arguments,function*(t,e={public:!1}){var r=this;try{return{data:yield Yt(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(me(i))return{data:null,error:i};throw i}})}updateBucket(t,e){return h(this,null,function*(){var n=this;try{return{data:yield Ug(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(me(r))return{data:null,error:r};throw r}})}emptyBucket(t){return h(this,null,function*(){var e=this;try{return{data:yield Yt(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}deleteBucket(t){return h(this,null,function*(){var e=this;try{return{data:yield $g(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){let e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},xx=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=O(O({},Bb),e),this.fetch=Bg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return h(this,null,function*(){var e=this;try{return{data:yield Yt(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}listBuckets(t){return h(this,null,function*(){var e=this;try{let n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);let r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:yield pa(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}deleteBucket(t){return h(this,null,function*(){var e=this;try{return{data:yield $g(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(me(n))return{data:null,error:n};throw n}})}from(t){var e=this;if(!wx(t))throw new Iu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let n=new Pb({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>h(this,null,function*(){return e.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){let s=i[o];return typeof s!="function"?s:(...a)=>h(null,null,function*(){try{return{data:yield s.apply(i,a),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}})}})}},Hg={"X-Client-Info":`storage-js/${Ub}`,"Content-Type":"application/json"},$b=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function _t(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Lg=class extends $b{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ox=class extends $b{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};var zg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);var kx=t=>{if(typeof t!="object"||t===null)return!1;let e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var jb=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Px=(t,e,n)=>h(null,null,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){let r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{let s=o?.statusCode||o?.code||r+"";e(new Lg(jb(o),r,s))}).catch(()=>{let o=r+"";e(new Lg(i.statusText||`HTTP ${r} error`,r,o))});else{let o=r+"";e(new Lg(i.statusText||`HTTP ${r} error`,r,o))}}else e(new Ox(jb(t),t))}),Fx=(t,e,n,r)=>{let i={method:t,headers:e?.headers||{}};return t==="GET"||!r?i:(kx(r)?(i.headers=O({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,O(O({},i),n))};function Lx(t,e,n,r,i,o){return h(this,null,function*(){return new Promise((s,a)=>{t(n,Fx(e,r,i,o)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;let l=c.headers.get("content-type");return!l||!l.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>Px(c,a,r))})})}function wt(t,e,n,r,i){return h(this,null,function*(){return Lx(t,"POST",e,r,i,n)})}var jx=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=O(O({},Hg),e),this.fetch=zg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return h(this,null,function*(){var e=this;try{return{data:(yield wt(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers}))||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}getIndex(t,e){return h(this,null,function*(){var n=this;try{return{data:yield wt(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(_t(r))return{data:null,error:r};throw r}})}listIndexes(t){return h(this,null,function*(){var e=this;try{return{data:yield wt(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}deleteIndex(t,e){return h(this,null,function*(){var n=this;try{return{data:(yield wt(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(_t(r))return{data:null,error:r};throw r}})}},Vx=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=O(O({},Hg),e),this.fetch=zg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return h(this,null,function*(){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield wt(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers}))||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}getVectors(t){return h(this,null,function*(){var e=this;try{return{data:yield wt(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}listVectors(t){return h(this,null,function*(){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield wt(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}queryVectors(t){return h(this,null,function*(){var e=this;try{return{data:yield wt(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}deleteVectors(t){return h(this,null,function*(){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield wt(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers}))||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}},Ux=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=O(O({},Hg),e),this.fetch=zg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return h(this,null,function*(){var e=this;try{return{data:(yield wt(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers}))||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}getBucket(t){return h(this,null,function*(){var e=this;try{return{data:yield wt(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}listBuckets(){return h(this,arguments,function*(t={}){var e=this;try{return{data:yield wt(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}deleteBucket(t){return h(this,null,function*(){var e=this;try{return{data:(yield wt(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers}))||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}},Bx=class t extends Ux{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new $x(this.url,this.headers,e,this.fetch)}createBucket(e){return h(this,null,function*(){var n=()=>Xe(t.prototype,this,"createBucket"),r=this;return n().call(r,e)})}getBucket(e){return h(this,null,function*(){var n=()=>Xe(t.prototype,this,"getBucket"),r=this;return n().call(r,e)})}listBuckets(){return h(this,arguments,function*(e={}){var n=()=>Xe(t.prototype,this,"listBuckets"),r=this;return n().call(r,e)})}deleteBucket(e){return h(this,null,function*(){var n=()=>Xe(t.prototype,this,"deleteBucket"),r=this;return n().call(r,e)})}},$x=class t extends jx{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){return h(this,null,function*(){var n=()=>Xe(t.prototype,this,"createIndex"),r=this;return n().call(r,O(O({},e),{},{vectorBucketName:r.vectorBucketName}))})}listIndexes(){return h(this,arguments,function*(e={}){var n=()=>Xe(t.prototype,this,"listIndexes"),r=this;return n().call(r,O(O({},e),{},{vectorBucketName:r.vectorBucketName}))})}getIndex(e){return h(this,null,function*(){var n=()=>Xe(t.prototype,this,"getIndex"),r=this;return n().call(r,r.vectorBucketName,e)})}deleteIndex(e){return h(this,null,function*(){var n=()=>Xe(t.prototype,this,"deleteIndex"),r=this;return n().call(r,r.vectorBucketName,e)})}index(e){return new Hx(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Hx=class t extends Vx{constructor(e,n,r,i,o){super(e,n,o),this.vectorBucketName=r,this.indexName=i}putVectors(e){return h(this,null,function*(){var n=()=>Xe(t.prototype,this,"putVectors"),r=this;return n().call(r,O(O({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))})}getVectors(e){return h(this,null,function*(){var n=()=>Xe(t.prototype,this,"getVectors"),r=this;return n().call(r,O(O({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))})}listVectors(){return h(this,arguments,function*(e={}){var n=()=>Xe(t.prototype,this,"listVectors"),r=this;return n().call(r,O(O({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))})}queryVectors(e){return h(this,null,function*(){var n=()=>Xe(t.prototype,this,"queryVectors"),r=this;return n().call(r,O(O({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))})}deleteVectors(e){return h(this,null,function*(){var n=()=>Xe(t.prototype,this,"deleteVectors"),r=this;return n().call(r,O(O({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))})}},Hb=class extends Nx{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new Rx(this.url,this.headers,t,this.fetch)}get vectors(){return new Bx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new xx(this.url+"/iceberg",this.headers,this.fetch)}};var Tu="2.90.1";var fi=30*1e3,Au=3,Mu=Au*fi,zb="http://localhost:9999",Gb="supabase.auth.token";var qb={"X-Client-Info":`gotrue-js/${Tu}`};var ma="X-Supabase-Api-Version",Gg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Wb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Kb=600*1e3;var Er=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function T(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}var Ru=class extends Er{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function Qb(t){return T(t)&&t.name==="AuthApiError"}var xt=class extends Er{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}},Zt=class extends Er{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}},He=class extends Zt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Yb(t){return T(t)&&t.name==="AuthSessionMissingError"}var Hn=class extends Zt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},hi=class extends Zt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},pi=class extends Zt{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Zb(t){return T(t)&&t.name==="AuthImplicitGrantRedirectError"}var ya=class extends Zt{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Nu=class extends Zt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}};var xo=class extends Zt{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}};function xu(t){return T(t)&&t.name==="AuthRetryableFetchError"}var va=class extends Zt{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};var gi=class extends Zt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};var Ou="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Jb=` 	
\r=`.split(""),zx=(()=>{let t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Jb.length;e+=1)t[Jb[e].charCodeAt(0)]=-2;for(let e=0;e<Ou.length;e+=1)t[Ou[e].charCodeAt(0)]=e;return t})();function Xb(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;n(Ou[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){let r=e.queue>>e.queuedBits-6&63;n(Ou[r]),e.queuedBits-=6}}function eD(t,e,n){let r=zx[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function qg(t){let e=[],n=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{Wx(s,r,n)};for(let s=0;s<t.length;s+=1)eD(t.charCodeAt(s),i,o);return e.join("")}function Gx(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function qx(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}Gx(r,e)}}function Wx(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function br(t){let e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)eD(t.charCodeAt(i),n,r);return new Uint8Array(e)}function tD(t){let e=[];return qx(t,n=>e.push(n)),new Uint8Array(e)}function zn(t){let e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Xb(i,n,r)),Xb(null,n,r),e.join("")}function nD(t){return Math.round(Date.now()/1e3)+t}function rD(){return Symbol("auth-callback")}var ke=()=>typeof window<"u"&&typeof document<"u",mi={tested:!1,writable:!1},ku=()=>{if(!ke())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mi.tested)return mi.writable;let t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),mi.tested=!0,mi.writable=!0}catch{mi.tested=!0,mi.writable=!1}return mi.writable};function iD(t){let e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}var Pu=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),oD=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",yi=(t,e,n)=>h(null,null,function*(){yield t.setItem(e,JSON.stringify(n))}),Dr=(t,e)=>h(null,null,function*(){let n=yield t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}}),Fe=(t,e)=>h(null,null,function*(){yield t.removeItem(e)}),_a=class t{constructor(){this.promise=new t.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}};_a.promiseConstructor=Promise;function Fu(t){let e=t.split(".");if(e.length!==3)throw new gi("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Wb.test(e[r]))throw new gi("JWT not in base64url format");return{header:JSON.parse(qg(e[0])),payload:JSON.parse(qg(e[1])),signature:br(e[2]),raw:{header:e[0],payload:e[1]}}}function sD(t){return h(this,null,function*(){return yield new Promise(e=>{setTimeout(()=>e(null),t)})})}function aD(t,e){return new Promise((r,i)=>{h(null,null,function*(){for(let o=0;o<1/0;o++)try{let s=yield t(o);if(!e(o,null,s)){r(s);return}}catch(s){if(!e(o,s)){i(s);return}}})})}function Kx(t){return("0"+t.toString(16)).substr(-2)}function Qx(){let e=new Uint32Array(56);if(typeof crypto>"u"){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length,i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Kx).join("")}function Yx(t){return h(this,null,function*(){let n=new TextEncoder().encode(t),r=yield crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")})}function Zx(t){return h(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;let n=yield Yx(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function vi(t,e,n=!1){return h(this,null,function*(){let r=Qx(),i=r;n&&(i+="/PASSWORD_RECOVERY"),yield yi(t,`${e}-code-verifier`,i);let o=yield Zx(r);return[o,r===o?"plain":"s256"]})}var Jx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cD(t){let e=t.headers.get(ma);if(!e||!e.match(Jx))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function lD(t){if(!t)throw new Error("Missing exp claim");let e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function uD(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Xx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _i(t){if(!Xx.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lu(){let t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){let r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dD(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function Wg(t){return JSON.parse(JSON.stringify(t))}var wi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),eO=[502,503,504];function fD(t){return h(this,null,function*(){var e;if(!oD(t))throw new xo(wi(t),0);if(eO.includes(t.status))throw new xo(wi(t),t.status);let n;try{n=yield t.json()}catch(o){throw new xt(wi(o),o)}let r,i=cD(t);if(i&&i.getTime()>=Gg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new va(wi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new He}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new va(wi(n),t.status,n.weak_password.reasons);throw new Ru(wi(n),t.status||500,r)})}var tO=(t,e,n,r)=>{let i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};function R(t,e,n,r){return h(this,null,function*(){var i;let o=Object.assign({},r?.headers);o[ma]||(o[ma]=Gg["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=yield nO(t,e,n+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}})}function nO(t,e,n,r,i,o){return h(this,null,function*(){let s=tO(e,r,i,o),a;try{a=yield t(n,Object.assign({},s))}catch(c){throw console.error(c),new xo(wi(c),0)}if(a.ok||(yield fD(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(c){yield fD(c)}})}function Ot(t){var e;let n=null;rO(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=nD(t.expires_in)));let r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Kg(t){let e=Ot(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function vn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function hD(t){return{data:t,error:null}}function pD(t){let{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,s=Nr(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},s);return{data:{properties:a,user:c},error:null}}function Qg(t){return t}function rO(t){return t.access_token&&t.refresh_token&&t.expires_in}var ju=["global","local","others"];var Oo=class{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Pu(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(r){return h(this,arguments,function*(e,n=ju[0]){if(ju.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ju.join(", ")}`);try{return yield R(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(T(i))return{data:null,error:i};throw i}})}inviteUserByEmail(r){return h(this,arguments,function*(e,n={}){try{return yield R(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:vn})}catch(i){if(T(i))return{data:{user:null},error:i};throw i}})}generateLink(e){return h(this,null,function*(){try{let{options:n}=e,r=Nr(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),yield R(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:pD,redirectTo:n?.redirectTo})}catch(n){if(T(n))return{data:{properties:null,user:null},error:n};throw n}})}createUser(e){return h(this,null,function*(){try{return yield R(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:vn})}catch(n){if(T(n))return{data:{user:null},error:n};throw n}})}listUsers(e){return h(this,null,function*(){var n,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=yield R(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Qg});if(u.error)throw u.error;let d=yield u.json(),p=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(g=>{let m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);l[`${y}Page`]=m}),l.total=parseInt(p)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(T(l))return{data:{users:[]},error:l};throw l}})}getUserById(e){return h(this,null,function*(){_i(e);try{return yield R(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:vn})}catch(n){if(T(n))return{data:{user:null},error:n};throw n}})}updateUserById(e,n){return h(this,null,function*(){_i(e);try{return yield R(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:vn})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}})}deleteUser(e,n=!1){return h(this,null,function*(){_i(e);try{return yield R(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:vn})}catch(r){if(T(r))return{data:{user:null},error:r};throw r}})}_listFactors(e){return h(this,null,function*(){_i(e.userId);try{let{data:n,error:r}=yield R(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(T(n))return{data:null,error:n};throw n}})}_deleteFactor(e){return h(this,null,function*(){_i(e.userId),_i(e.id);try{return{data:yield R(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(T(n))return{data:null,error:n};throw n}})}_listOAuthClients(e){return h(this,null,function*(){var n,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=yield R(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Qg});if(u.error)throw u.error;let d=yield u.json(),p=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(g=>{let m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);l[`${y}Page`]=m}),l.total=parseInt(p)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(T(l))return{data:{clients:[]},error:l};throw l}})}_createOAuthClient(e){return h(this,null,function*(){try{return yield R(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(T(n))return{data:null,error:n};throw n}})}_getOAuthClient(e){return h(this,null,function*(){try{return yield R(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(T(n))return{data:null,error:n};throw n}})}_updateOAuthClient(e,n){return h(this,null,function*(){try{return yield R(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(T(r))return{data:null,error:r};throw r}})}_deleteOAuthClient(e){return h(this,null,function*(){try{return yield R(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(T(n))return{data:null,error:n};throw n}})}_regenerateOAuthClientSecret(e){return h(this,null,function*(){try{return yield R(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(T(n))return{data:null,error:n};throw n}})}};function Yg(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}var Ei={debug:!!(globalThis&&ku()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},wa=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},Vu=class extends wa{};function Zg(t,e,n){return h(this,null,function*(){Ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);let r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ei.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},i=>h(null,null,function*(){if(i){Ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return yield n()}finally{Ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Vu(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ei.debug)try{let o=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield n()}})))})}function gD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Jg(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function mD(t){return parseInt(t,16)}function yD(t){let e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function vD(t){var e;let{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:c,resources:l,scheme:u,uri:d,version:p}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}let f=Jg(t.address),g=u?`${u}://${r}`:r,m=t.statement?`${t.statement}
`:"",y=`${g} wants you to sign in with your Ethereum account:
${f}

${m}`,v=`URI: ${d}
Version: ${p}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(i&&(v+=`
Expiration Time: ${i.toISOString()}`),a&&(v+=`
Not Before: ${a.toISOString()}`),c&&(v+=`
Request ID: ${c}`),l){let A=`
Resources:`;for(let b of l){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);A+=`
- ${b}`}v+=A}return`${y}
${v}`}var ye=class extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}},bi=class extends ye{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}};function _D({error:t,options:e}){var n,r,i;let{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ye({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ye({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ye({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ye({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ye({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ye({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ye({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ye({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){let s=window.location.hostname;if(Xg(s)){if(o.rp.id!==s)return new ye({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ye({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ye({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function wD({error:t,options:e}){let{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ye({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ye({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){let r=window.location.hostname;if(Xg(r)){if(n.rpId!==r)return new ye({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ye({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var em=class{createNewAbortSignal(){if(this.controller){let n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}},iO=new em;function bD(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);let{challenge:e,user:n,excludeCredentials:r}=t,i=Nr(t,["challenge","user","excludeCredentials"]),o=br(e).buffer,s=Object.assign(Object.assign({},n),{id:br(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){let l=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},l),{id:br(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function DD(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);let{challenge:e,allowCredentials:n}=t,r=Nr(t,["challenge","allowCredentials"]),i=br(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){let a=n[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:br(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function CD(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();let n=t;return{id:t.id,rawId:t.id,response:{attestationObject:zn(new Uint8Array(t.response.attestationObject)),clientDataJSON:zn(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function SD(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();let n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:zn(new Uint8Array(i.authenticatorData)),clientDataJSON:zn(new Uint8Array(i.clientDataJSON)),signature:zn(new Uint8Array(i.signature)),userHandle:i.userHandle?zn(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Xg(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function ED(){var t,e;return!!(ke()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}function oO(t){return h(this,null,function*(){try{let e=yield navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new bi("Browser returned unexpected credential type",e)}:{data:null,error:new bi("Empty credential response",e)}}catch(e){return{data:null,error:_D({error:e,options:t})}}})}function sO(t){return h(this,null,function*(){try{let e=yield navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new bi("Browser returned unexpected credential type",e)}:{data:null,error:new bi("Empty credential response",e)}}catch(e){return{data:null,error:wD({error:e,options:t})}}})}var aO={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},cO={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Uu(...t){let e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of t)if(i)for(let o in i){let s=i[o];if(s!==void 0)if(Array.isArray(s))r[o]=s;else if(n(s))r[o]=s;else if(e(s)){let a=r[o];e(a)?r[o]=Uu(a,s):r[o]=Uu(s)}else r[o]=s}return r}function lO(t,e){return Uu(aO,t,e||{})}function uO(t,e){return Uu(cO,t,e||{})}var Bu=class{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(e){return h(this,null,function*(){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))})}_challenge(s,a){return h(this,arguments,function*({factorId:e,webauthn:n,friendlyName:r,signal:i},o){try{let{data:c,error:l}=yield this.client.mfa.challenge({factorId:e,webauthn:n});if(!c)return{data:null,error:l};let u=i??iO.createNewAbortSignal();if(c.webauthn.type==="create"){let{user:d}=c.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(c.webauthn.type){case"create":{let d=lO(c.webauthn.credential_options.publicKey,o?.create),{data:p,error:f}=yield oO({publicKey:d,signal:u});return p?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:p}},error:null}:{data:null,error:f}}case"request":{let d=uO(c.webauthn.credential_options.publicKey,o?.request),{data:p,error:f}=yield sO(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:d,signal:u}));return p?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:p}},error:null}:{data:null,error:f}}}}catch(c){return T(c)?{data:null,error:c}:{data:null,error:new xt("Unexpected error in challenge",c)}}})}_verify(i){return h(this,arguments,function*({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})})}_authenticate(s,a){return h(this,arguments,function*({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Er("rpId is required for WebAuthn authentication")};try{if(!ED())return{data:null,error:new xt("Browser does not support WebAuthn",null)};let{data:c,error:l}=yield this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!c)return{data:null,error:l};let{webauthn:u}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(c){return T(c)?{data:null,error:c}:{data:null,error:new xt("Unexpected error in authenticate",c)}}})}_register(s,a){return h(this,arguments,function*({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Er("rpId is required for WebAuthn registration")};try{if(!ED())return{data:null,error:new xt("Browser does not support WebAuthn",null)};let{data:c,error:l}=yield this._enroll({friendlyName:e});if(!c)return yield this.client.mfa.listFactors().then(p=>{var f;return(f=p.data)===null||f===void 0?void 0:f.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===e&&g.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p?.id}):void 0),{data:null,error:l};let{data:u,error:d}=yield this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return u?this._verify({factorId:c.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(c){return T(c)?{data:null,error:c}:{data:null,error:new xt("Unexpected error in register",c)}}})}};gD();var dO={url:zb,storageKey:Gb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};function ID(t,e,n){return h(this,null,function*(){return yield n()})}var ko={},fO=(()=>{class t{get jwks(){var n,r;return(r=(n=ko[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){ko[this.storageKey]=Object.assign(Object.assign({},ko[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=ko[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){ko[this.storageKey]=Object.assign(Object.assign({},ko[this.storageKey]),{cachedAt:n})}constructor(n){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let s=Object.assign(Object.assign({},dO),n);if(this.storageKey=s.storageKey,this.instanceID=(r=t.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,t.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&ke()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Oo({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Pu(s.fetch),this.lock=s.lock||ID,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&ke()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=Zg:this.lock=ID,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Bu(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:ku()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Yg(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Yg(this.memoryStorage)),ke()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",a=>h(this,null,function*(){this._debug("received broadcast notification from other tab or client",a),yield this._notifyAllSubscribers(a.data.event,a.data.session,!1)}))}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Tu}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}initialize(){return h(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=h(this,null,function*(){return yield this._acquireLock(this.lockAcquireTimeout,()=>h(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return h(this,null,function*(){var n;try{let r={},i="none";if(ke()&&(r=iD(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":(yield this._isPKCECallback(r))&&(i="pkce")),ke()&&this.detectSessionInUrl&&i!=="none"){let{data:o,error:s}=yield this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Zb(s)){let l=(n=s.details)===null||n===void 0?void 0:n.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return{error:s}}let{session:a,redirectType:c}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),yield this._saveSession(a),setTimeout(()=>h(this,null,function*(){c==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return T(r)?this._returnResult({error:r}):this._returnResult({error:new xt("Unexpected error during initialization",r)})}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(n){return h(this,null,function*(){var r,i,o;try{let s=yield R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Ot}),{data:a,error:c}=s;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(T(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}signUp(n){return h(this,null,function*(){var r,i,o;try{let s;if("email"in n){let{email:d,password:p,options:f}=n,g=null,m=null;this.flowType==="pkce"&&([g,m]=yield vi(this.storage,this.storageKey)),s=yield R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:p,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:g,code_challenge_method:m},xform:Ot})}else if("phone"in n){let{phone:d,password:p,options:f}=n;s=yield R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(o=f?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Ot})}else throw new hi("You must provide either an email or phone number and a password");let{data:a,error:c}=s;if(c||!a)return yield Fe(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(yield Fe(this.storage,`${this.storageKey}-code-verifier`),T(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}signInWithPassword(n){return h(this,null,function*(){try{let r;if("email"in n){let{email:s,password:a,options:c}=n;r=yield R(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Kg})}else if("phone"in n){let{phone:s,password:a,options:c}=n;r=yield R(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Kg})}else throw new hi("You must provide either an email or phone number and a password");let{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){let s=new Hn;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}signInWithOAuth(n){return h(this,null,function*(){var r,i,o,s;return yield this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=n.options)===null||s===void 0?void 0:s.skipBrowserRedirect})})}exchangeCodeForSession(n){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(this.lockAcquireTimeout,()=>h(this,null,function*(){return this._exchangeCodeForSession(n)}))})}signInWithWeb3(n){return h(this,null,function*(){let{chain:r}=n;switch(r){case"ethereum":return yield this.signInWithEthereum(n);case"solana":return yield this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}})}signInWithEthereum(n){return h(this,null,function*(){var r,i,o,s,a,c,l,u,d,p,f;let g,m;if("message"in n)g=n.message,m=n.signature;else{let{chain:y,wallet:v,statement:A,options:b}=n,D;if(ke())if(typeof v=="object")D=v;else{let Ge=window;if("ethereum"in Ge&&typeof Ge.ethereum=="object"&&"request"in Ge.ethereum&&typeof Ge.ethereum.request=="function")D=Ge.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=v}let G=new URL((r=b?.url)!==null&&r!==void 0?r:window.location.href),oe=yield D.request({method:"eth_requestAccounts"}).then(Ge=>Ge).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!oe||oe.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let F=Jg(oe[0]),q=(i=b?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!q){let Ge=yield D.request({method:"eth_chainId"});q=mD(Ge)}let ze={domain:G.host,address:F,statement:A,uri:G.href,version:"1",chainId:q,nonce:(o=b?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(a=(s=b?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=b?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(l=b?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=b?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=b?.signInWithEthereum)===null||d===void 0?void 0:d.resources};g=vD(ze),m=yield D.request({method:"personal_sign",params:[yD(g),F]})}try{let{data:y,error:v}=yield R(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:m},!((p=n.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(f=n.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ot});if(v)throw v;if(!y||!y.session||!y.user){let A=new Hn;return this._returnResult({data:{user:null,session:null},error:A})}return y.session&&(yield this._saveSession(y.session),yield this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:v})}catch(y){if(T(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}})}signInWithSolana(n){return h(this,null,function*(){var r,i,o,s,a,c,l,u,d,p,f,g;let m,y;if("message"in n)m=n.message,y=n.signature;else{let{chain:v,wallet:A,statement:b,options:D}=n,G;if(ke())if(typeof A=="object")G=A;else{let F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))G=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=A}let oe=new URL((r=D?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in G&&G.signIn){let F=yield G.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},D?.signInWithSolana),{version:"1",domain:oe.host,uri:oe.href}),b?{statement:b}:null)),q;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")q=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)q=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in q&&"signature"in q&&(typeof q.signedMessage=="string"||q.signedMessage instanceof Uint8Array)&&q.signature instanceof Uint8Array)m=typeof q.signedMessage=="string"?q.signedMessage:new TextDecoder().decode(q.signedMessage),y=q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in G)||typeof G.signMessage!="function"||!("publicKey"in G)||typeof G!="object"||!G.publicKey||!("toBase58"in G.publicKey)||typeof G.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${oe.host} wants you to sign in with your Solana account:`,G.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${oe.href}`,`Issued At: ${(o=(i=D?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=D?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${D.signInWithSolana.notBefore}`]:[],...!((a=D?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${D.signInWithSolana.expirationTime}`]:[],...!((c=D?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${D.signInWithSolana.chainId}`]:[],...!((l=D?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${D.signInWithSolana.nonce}`]:[],...!((u=D?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${D.signInWithSolana.requestId}`]:[],...!((p=(d=D?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...D.signInWithSolana.resources.map(q=>`- ${q}`)]:[]].join(`
`);let F=yield G.signMessage(new TextEncoder().encode(m),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=F}}try{let{data:v,error:A}=yield R(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:zn(y)},!((f=n.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=n.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ot});if(A)throw A;if(!v||!v.session||!v.user){let b=new Hn;return this._returnResult({data:{user:null,session:null},error:b})}return v.session&&(yield this._saveSession(v.session),yield this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:A})}catch(v){if(T(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}})}_exchangeCodeForSession(n){return h(this,null,function*(){let r=yield Dr(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new Nu;let{data:s,error:a}=yield R(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:Ot});if(yield Fe(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){let c=new Hn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}catch(s){if(yield Fe(this.storage,`${this.storageKey}-code-verifier`),T(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}})}signInWithIdToken(n){return h(this,null,function*(){try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=n,c=yield R(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Ot}),{data:l,error:u}=c;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){let d=new Hn;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}signInWithOtp(n){return h(this,null,function*(){var r,i,o,s,a;try{if("email"in n){let{email:c,options:l}=n,u=null,d=null;this.flowType==="pkce"&&([u,d]=yield vi(this.storage,this.storageKey));let{error:p}=yield R(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in n){let{phone:c,options:l}=n,{data:u,error:d}=yield R(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(o=l?.data)!==null&&o!==void 0?o:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new hi("You must provide either an email or phone number.")}catch(c){if(yield Fe(this.storage,`${this.storageKey}-code-verifier`),T(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}verifyOtp(n){return h(this,null,function*(){var r,i;try{let o,s;"options"in n&&(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo,s=(i=n.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:c}=yield R(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:Ot});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let l=a.session,u=a.user;return l?.access_token&&(yield this._saveSession(l),yield this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(T(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}signInWithSSO(n){return h(this,null,function*(){var r,i,o,s,a;try{let c=null,l=null;this.flowType==="pkce"&&([c,l]=yield vi(this.storage,this.storageKey));let u=yield R(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:l}),headers:this.headers,xform:hD});return!((s=u.data)===null||s===void 0)&&s.url&&ke()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(c){if(yield Fe(this.storage,`${this.storageKey}-code-verifier`),T(c))return this._returnResult({data:null,error:c});throw c}})}reauthenticate(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>h(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return h(this,null,function*(){try{return yield this._useSession(n=>h(this,null,function*(){let{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new He;let{error:o}=yield R(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})}))}catch(n){if(T(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}resend(n){return h(this,null,function*(){try{let r=`${this.url}/resend`;if("email"in n){let{email:i,type:o,options:s}=n,{error:a}=yield R(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in n){let{phone:i,type:o,options:s}=n,{data:a,error:c}=yield R(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new hi("You must provide either an email or phone number and a type")}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}getSession(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>h(this,null,function*(){return this._useSession(r=>h(this,null,function*(){return r}))}))})}_acquireLock(n,r){return h(this,null,function*(){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=h(this,null,function*(){return yield i,yield r()});return this.pendingInLock.push(h(this,null,function*(){try{yield o}catch{}})),o}return yield this.lock(`lock:${this.storageKey}`,n,()=>h(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push(h(this,null,function*(){try{yield i}catch{}})),yield i;this.pendingInLock.length;){let o=[...this.pendingInLock];yield Promise.all(o),this.pendingInLock.splice(0,o.length)}return yield i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(n){return h(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield n(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return h(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null,r=yield Dr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!n)return{data:{session:null},error:null};let i=n.expires_at?n.expires_at*1e3-Date.now()<Mu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){let a=yield Dr(this.userStorage,this.storageKey+"-user");a?.user?n.user=a.user:n.user=Lu()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};n.user=dD(n.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}let{data:o,error:s}=yield this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}})}getUser(n){return h(this,null,function*(){if(n)return yield this._getUser(n);yield this.initializePromise;let r=yield this._acquireLock(this.lockAcquireTimeout,()=>h(this,null,function*(){return yield this._getUser()}));return r.data.user&&(this.suppressGetSessionWarning=!0),r})}_getUser(n){return h(this,null,function*(){try{return n?yield R(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:vn}):yield this._useSession(r=>h(this,null,function*(){var i,o,s;let{data:a,error:c}=r;if(c)throw c;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new He}:yield R(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:vn})}))}catch(r){if(T(r))return Yb(r)&&(yield this._removeSession(),yield Fe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}})}updateUser(i){return h(this,arguments,function*(n,r={}){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>h(this,null,function*(){return yield this._updateUser(n,r)}))})}_updateUser(i){return h(this,arguments,function*(n,r={}){try{return yield this._useSession(o=>h(this,null,function*(){let{data:s,error:a}=o;if(a)throw a;if(!s.session)throw new He;let c=s.session,l=null,u=null;this.flowType==="pkce"&&n.email!=null&&([l,u]=yield vi(this.storage,this.storageKey));let{data:d,error:p}=yield R(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:l,code_challenge_method:u}),jwt:c.access_token,xform:vn});if(p)throw p;return c.user=d.user,yield this._saveSession(c),yield this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})}))}catch(o){if(yield Fe(this.storage,`${this.storageKey}-code-verifier`),T(o))return this._returnResult({data:{user:null},error:o});throw o}})}setSession(n){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>h(this,null,function*(){return yield this._setSession(n)}))})}_setSession(n){return h(this,null,function*(){try{if(!n.access_token||!n.refresh_token)throw new He;let r=Date.now()/1e3,i=r,o=!0,s=null,{payload:a}=Fu(n.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{data:c,error:l}=yield this._callRefreshToken(n.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c)return{data:{user:null,session:null},error:null};s=c}else{let{data:c,error:l}=yield this._getUser(n.access_token);if(l)throw l;s={access_token:n.access_token,refresh_token:n.refresh_token,user:c.user,token_type:"bearer",expires_in:i-r,expires_at:i},yield this._saveSession(s),yield this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(T(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}})}refreshSession(n){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>h(this,null,function*(){return yield this._refreshSession(n)}))})}_refreshSession(n){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i;if(!n){let{data:a,error:c}=r;if(c)throw c;n=(i=a.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new He;let{data:o,error:s}=yield this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})}))}catch(r){if(T(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}_getSessionFromURL(n,r){return h(this,null,function*(){try{if(!ke())throw new pi("No browser detected.");if(n.error||n.error_description||n.error_code)throw new pi(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ya("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pi("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new ya("No code detected.");let{data:b,error:D}=yield this._exchangeCodeForSession(n.code);if(D)throw D;let G=new URL(window.location.href);return G.searchParams.delete("code"),window.history.replaceState(window.history.state,"",G.toString()),{data:{session:b.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:c,expires_at:l,token_type:u}=n;if(!s||!c||!a||!u)throw new pi("No session defined in URL");let d=Math.round(Date.now()/1e3),p=parseInt(c),f=d+p;l&&(f=parseInt(l));let g=f-d;g*1e3<=fi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);let m=f-p;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);let{data:y,error:v}=yield this._getUser(s);if(v)throw v;let A={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:p,expires_at:f,refresh_token:a,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:A,redirectType:n.type},error:null})}catch(i){if(T(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}})}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}_isPKCECallback(n){return h(this,null,function*(){let r=yield Dr(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)})}signOut(){return h(this,arguments,function*(n={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>h(this,null,function*(){return yield this._signOut(n)}))})}_signOut(){return h(this,arguments,function*({scope:n}={scope:"global"}){return yield this._useSession(r=>h(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return this._returnResult({error:s});let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:c}=yield this.admin.signOut(a,n);if(c&&!(Qb(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return n!=="others"&&(yield this._removeSession(),yield Fe(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})}))})}onAuthStateChange(n){let r=rD(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),h(this,null,function*(){yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>h(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:i}}}_emitInitialSession(n){return h(this,null,function*(){return yield this._useSession(r=>h(this,null,function*(){var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;yield(i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s),this._debug("INITIAL_SESSION","callback id",n,"session",s)}catch(s){yield(o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",n,"error",s),console.error(s)}}))})}resetPasswordForEmail(i){return h(this,arguments,function*(n,r={}){let o=null,s=null;this.flowType==="pkce"&&([o,s]=yield vi(this.storage,this.storageKey,!0));try{return yield R(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(yield Fe(this.storage,`${this.storageKey}-code-verifier`),T(a))return this._returnResult({data:null,error:a});throw a}})}getUserIdentities(){return h(this,null,function*(){var n;try{let{data:r,error:i}=yield this.getUser();if(i)throw i;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}})}linkIdentity(n){return h(this,null,function*(){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)})}linkIdentityOAuth(n){return h(this,null,function*(){var r;try{let{data:i,error:o}=yield this._useSession(s=>h(this,null,function*(){var a,c,l,u,d;let{data:p,error:f}=s;if(f)throw f;let g=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=n.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return yield R(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})}));if(o)throw o;return ke()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:n.provider,url:i?.url},error:null})}catch(i){if(T(i))return this._returnResult({data:{provider:n.provider,url:null},error:i});throw i}})}linkIdentityIdToken(n){return h(this,null,function*(){return yield this._useSession(r=>h(this,null,function*(){var i;try{let{error:o,data:{session:s}}=r;if(o)throw o;let{options:a,provider:c,token:l,access_token:u,nonce:d}=n,p=yield R(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Ot}),{data:f,error:g}=p;return g?this._returnResult({data:{user:null,session:null},error:g}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Hn}):(f.session&&(yield this._saveSession(f.session),yield this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:g}))}catch(o){if(yield Fe(this.storage,`${this.storageKey}-code-verifier`),T(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}))})}unlinkIdentity(n){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i,o;let{data:s,error:a}=r;if(a)throw a;return yield R(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})}))}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}})}_refreshAccessToken(n){return h(this,null,function*(){let r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return yield aD(o=>h(this,null,function*(){return o>0&&(yield sD(200*Math.pow(2,o-1))),this._debug(r,"refreshing attempt",o),yield R(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Ot})}),(o,s)=>{let a=200*Math.pow(2,o);return s&&xu(s)&&Date.now()+a-i<fi})}catch(i){if(this._debug(r,"error",i),T(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}})}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}_handleProviderSignIn(n,r){return h(this,null,function*(){let i=yield this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),ke()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}})}_recoverAndRefresh(){return h(this,null,function*(){var n,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let o=yield Dr(this.storage,this.storageKey);if(o&&this.userStorage){let a=yield Dr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:o.user},yield yi(this.userStorage,this.storageKey+"-user",a)),o.user=(n=a?.user)!==null&&n!==void 0?n:Lu()}else if(o&&!o.user&&!o.user){let a=yield Dr(this.storage,this.storageKey+"-user");a&&a?.user?(o.user=a.user,yield Fe(this.storage,this.storageKey+"-user"),yield yi(this.storage,this.storageKey,o)):o.user=Lu()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&(yield this._removeSession());return}let s=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Mu;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${Mu}s`),s){if(this.autoRefreshToken&&o.refresh_token){let{error:a}=yield this._callRefreshToken(o.refresh_token);a&&(console.error(a),xu(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),yield this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:c}=yield this._getUser(o.access_token);!c&&a?.user?(o.user=a.user,yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else yield this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}})}_callRefreshToken(n){return h(this,null,function*(){var r,i;if(!n)throw new He;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new _a;let{data:s,error:a}=yield this._refreshAccessToken(n);if(a)throw a;if(!s.session)throw new He;yield this._saveSession(s.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(o,"error",s),T(s)){let a={data:null,error:s};return xu(s)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}})}_notifyAllSubscribers(n,r,i=!0){return h(this,null,function*(){let o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(c=>h(this,null,function*(){try{yield c.callback(n,r)}catch(l){s.push(l)}}));if(yield Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(o,"end")}})}_saveSession(n){return h(this,null,function*(){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,yield Fe(this.storage,`${this.storageKey}-code-verifier`);let r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&(yield yi(this.userStorage,this.storageKey+"-user",{user:r.user}));let o=Object.assign({},r);delete o.user;let s=Wg(o);yield yi(this.storage,this.storageKey,s)}else{let o=Wg(r);yield yi(this.storage,this.storageKey,o)}})}_removeSession(){return h(this,null,function*(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,yield Fe(this.storage,this.storageKey),yield Fe(this.storage,this.storageKey+"-code-verifier"),yield Fe(this.storage,this.storageKey+"-user"),this.userStorage&&(yield Fe(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&ke()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return h(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let n=setInterval(()=>this._autoRefreshTokenTick(),fi);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);let r=setTimeout(()=>h(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)})}_stopAutoRefresh(){return h(this,null,function*(){this._debug("#_stopAutoRefresh()");let n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);let r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)})}startAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return h(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>h(this,null,function*(){try{let n=Date.now();try{return yield this._useSession(r=>h(this,null,function*(){let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-n)/fi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${fi}ms, refresh threshold is ${Au} ticks`),o<=Au&&(yield this._callRefreshToken(i.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(n){if(n.isAcquireTimeout||n instanceof wa)this._debug("auto refresh token tick lock not available");else throw n}})}_handleVisibilityChange(){return h(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!ke()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>h(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}})}_onVisibilityChanged(n){return h(this,null,function*(){let r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>h(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(n,r,i){return h(this,null,function*(){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[s,a]=yield vi(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(c.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${o.join("&")}`})}_unenroll(n){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i;let{data:o,error:s}=r;return s?this._returnResult({data:null,error:s}):yield R(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}})}_enroll(n){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i,o;let{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});let c=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:l,error:u}=yield R(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return u?this._returnResult({data:null,error:u}):(n.factorType==="totp"&&l.type==="totp"&&(!((o=l?.totp)===null||o===void 0)&&o.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))}))}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}})}_verify(n){return h(this,null,function*(){return this._acquireLock(this.lockAcquireTimeout,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?CD(n.webauthn.credential_response):SD(n.webauthn.credential_response)})}:{code:n.code}),{data:c,error:l}=yield R(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:l}))}))}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}))})}_challenge(n){return h(this,null,function*(){return this._acquireLock(this.lockAcquireTimeout,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=yield R(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:bD(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:DD(c.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}}))})}_challengeAndVerify(n){return h(this,null,function*(){let{data:r,error:i}=yield this._challenge({factorId:n.factorId});return i?this._returnResult({data:null,error:i}):yield this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})})}_listFactors(){return h(this,null,function*(){var n;let{data:{user:r},error:i}=yield this.getUser();if(i)return{data:null,error:i};let o={all:[],phone:[],totp:[],webauthn:[]};for(let s of(n=r?.factors)!==null&&n!==void 0?n:[])o.all.push(s),s.status==="verified"&&o[s.factor_type].push(s);return{data:o,error:null}})}_getAuthenticatorAssuranceLevel(){return h(this,null,function*(){var n,r;let{data:{session:i},error:o}=yield this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:s}=Fu(i.access_token),a=null;s.aal&&(a=s.aal);let c=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");let u=s.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}})}_getAuthorizationDetails(n){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?yield R(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new He})}))}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}})}_approveAuthorization(n,r){return h(this,null,function*(){try{return yield this._useSession(i=>h(this,null,function*(){let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new He});let a=yield R(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&ke()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a}))}catch(i){if(T(i))return this._returnResult({data:null,error:i});throw i}})}_denyAuthorization(n,r){return h(this,null,function*(){try{return yield this._useSession(i=>h(this,null,function*(){let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new He});let a=yield R(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&ke()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a}))}catch(i){if(T(i))return this._returnResult({data:null,error:i});throw i}})}_listOAuthGrants(){return h(this,null,function*(){try{return yield this._useSession(n=>h(this,null,function*(){let{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?yield R(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new He})}))}catch(n){if(T(n))return this._returnResult({data:null,error:n});throw n}})}_revokeOAuthGrant(n){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?(yield R(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new He})}))}catch(r){if(T(r))return this._returnResult({data:null,error:r});throw r}})}fetchJwk(i){return h(this,arguments,function*(n,r={keys:[]}){let o=r.keys.find(l=>l.kid===n);if(o)return o;let s=Date.now();if(o=this.jwks.keys.find(l=>l.kid===n),o&&this.jwks_cached_at+Kb>s)return o;let{data:a,error:c}=yield R(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,o=a.keys.find(l=>l.kid===n),!o)?null:o})}getClaims(i){return h(this,arguments,function*(n,r={}){try{let o=n;if(!o){let{data:m,error:y}=yield this.getSession();if(y||!m.session)return this._returnResult({data:null,error:y});o=m.session.access_token}let{header:s,payload:a,signature:c,raw:{header:l,payload:u}}=Fu(o);r?.allowExpired||lD(a.exp);let d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!d){let{error:m}=yield this.getUser(o);if(m)throw m;return{data:{claims:a,header:s,signature:c},error:null}}let p=uD(s.alg),f=yield crypto.subtle.importKey("jwk",d,p,!0,["verify"]);if(!(yield crypto.subtle.verify(p,f,c,tD(`${l}.${u}`))))throw new gi("Invalid JWT signature");return{data:{claims:a,header:s,signature:c},error:null}}catch(o){if(T(o))return this._returnResult({data:null,error:o});throw o}})}}return t.nextInstanceID={},t})(),tm=fO;var hO=tm,nm=hO;var pO="2.90.1",Ea="";typeof Deno<"u"?Ea="deno":typeof document<"u"?Ea="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ea="react-native":Ea="node";var gO={"X-Client-Info":`supabase-js-${Ea}/${pO}`},mO={headers:gO},yO={schema:"public"},vO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_O={};function ba(t){"@babel/helpers - typeof";return ba=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ba(t)}function wO(t,e){if(ba(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ba(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EO(t){var e=wO(t,"string");return ba(e)=="symbol"?e:e+""}function bO(t,e,n){return(e=EO(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function De(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TD(Object(n),!0).forEach(function(r){bO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var DO=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),CO=()=>Headers,SO=(t,e,n)=>{let r=DO(n),i=CO();return(o,s)=>h(null,null,function*(){var a;let c=(a=yield e())!==null&&a!==void 0?a:t,l=new i(s?.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(o,De(De({},s),{},{headers:l}))})};function IO(t){return t.endsWith("/")?t:t+"/"}function TO(t,e){var n,r;let{db:i,auth:o,realtime:s,global:a}=t,{db:c,auth:l,realtime:u,global:d}=e,p={db:De(De({},c),i),auth:De(De({},l),o),realtime:De(De({},u),s),storage:{},global:De(De(De({},d),a),{},{headers:De(De({},(n=d?.headers)!==null&&n!==void 0?n:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>h(null,null,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function AO(t){let e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(IO(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var MO=class extends nm{constructor(t){super(t)}},RO=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;let o=AO(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);let s=`sb-${o.hostname.split(".")[0]}-auth-token`,a={db:yO,realtime:_O,auth:De(De({},vO),{},{storageKey:s}),global:mO},c=TO(n??{},a);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(u,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var l;this.auth=this._initSupabaseAuthClient((l=c.auth)!==null&&l!==void 0?l:{},this.headers,c.global.fetch)}this.fetch=SO(e,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(De({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new Tb(new URL("rest/v1",o).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Hb(this.storageUrl.href,this.headers,this.fetch,n?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new sa(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return h(this,null,function*(){var t=this,e,n;if(t.accessToken)return yield t.accessToken();let{data:r}=yield t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:s,lock:a,debug:c,throwOnError:l},u,d){let p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new MO({url:this.authUrl.href,headers:De(De({},p),u),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:s,lock:a,debug:c,throwOnError:l,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new da(this.realtimeUrl.href,De(De({},t),{},{params:De(De({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}},AD=(t,e,n)=>new RO(t,e,n);function NO(){if(typeof window<"u")return!1;let t=globalThis.process;if(!t)return!1;let e=t.version;if(e==null)return!1;let n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}NO()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var $u=class{name;score;pool_id;constructor(e,n){this.name=e.name,this.score=e.total,this.pool_id=n}};var Hu=class t{gamePoolsSubject=new Ae([]);constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})};var Po=class t{supabase;stateService=_(Hu);constructor(){this.supabase=AD(Co.supabaseUrl,Co.supabaseKey)}insertScore(e,n){let r=e.map(i=>new $u(i,n));return se(this.supabase.from("scores").insert(r)).pipe(ie(i=>{if(i.error)throw i.error;return i}))}getGamePool(){this.supabase.from("game_pool").select().then(e=>{e.error&&console.error("Error while fetching gamePool",e.error),e.data&&this.stateService.gamePoolsSubject.next(e.data)})}getStatsV1(){return se(this.supabase.from("scores").select(`
        name,
        nb_game:name.count(),
        best_score:score.min(),
        max_score:score.max(),
        total:score.sum()
      `).eq("pool_id",Co.poolId)).pipe(ie(e=>{if(e.error)throw e.error;return e.data}))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})};var V=(function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t})(V||{}),kt="*";function rm(t,e){return{type:V.Trigger,name:t,definitions:e,options:{}}}function zu(t,e=null){return{type:V.Animate,styles:e,timings:t}}function MD(t,e=null){return{type:V.Sequence,steps:t,options:e}}function Cr(t){return{type:V.Style,styles:t,offset:null}}function im(t,e,n){return{type:V.State,name:t,styles:e,options:n}}function Gu(t,e,n=null){return{type:V.Transition,expr:t,animation:e,options:n}}var _n=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,n=0){this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},Di=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let n=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++n==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((n,r)=>n===null||r.totalTime>n.totalTime?r:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},Fo="!";var qu=class t{close=new ae;confirm=new ae;closeModal(){this.close.emit()}onConfirm(){this.confirm.emit()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Je({type:t,selectors:[["app-modal"]],outputs:{close:"close",confirm:"confirm"},decls:10,vars:1,consts:[[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"btn","btn-pad",3,"click"]],template:function(n,r){n&1&&(ge(0,"div",0),Xr("click",function(){return r.closeModal()}),ge(1,"div",1),Xr("click",function(o){return o.stopPropagation()}),ge(2,"h2"),re(3,"Confirm save score"),Ee(),ge(4,"p"),re(5,"Lorem ipsum for score saving"),Ee(),ge(6,"button",2),Xr("click",function(){return r.closeModal()}),re(7,"Close"),Ee(),ge(8,"button",2),Xr("click",function(){return r.onConfirm()}),re(9,"Save"),Ee()()()),n&2&&(Z(),it("@slideUpDown",void 0))},styles:[".btn[_ngcontent-%COMP%]{border:none;border-radius:3px;background-color:#dfd39d;color:#3d5442}.btn-pad[_ngcontent-%COMP%]{padding:5px}.btn[_ngcontent-%COMP%]:disabled{background-color:#ece4c3;color:#000;cursor:not-allowed;opacity:.6}.btn[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#d2c277;transition:.2s}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3;display:flex;justify-content:center;align-items:center}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border-radius:10px;text-align:center;max-width:500px;width:100%;box-shadow:0 5px 15px #0000004d}.modal-content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-of-type{margin-right:10px}@media only screen and (max-width:600px){.modal-content[_ngcontent-%COMP%]{position:absolute;bottom:0;background-color:#fff;padding:0 0 5px;text-align:center;width:100%;height:90dvh;max-width:100%;box-shadow:0 5px 15px #0000004d;border-radius:10px 10px 0 0}}"],data:{animation:[rm("slideUpDown",[im("void",Cr({transform:"translateY(100%)"})),Gu(":enter",[zu("300ms ease-out",Cr({transform:"translateY(0)"}))]),Gu(":leave",[zu("200ms ease-in",Cr({transform:"translateY(100%)"}))])])]}})};var RD=(t,e)=>e.name;function xO(t,e){if(t&1&&(Wi(),fr(0,"circle",9)),t&2){let n=e.$implicit,r=pt().$implicit,i=pt(2);kn("cx",i.getScaledX(n.x))("cy",i.getScaledY(n.y))("fill",r.color)}}function OO(t,e){if(t&1&&(Wi(),fr(0,"path",8),Ln(1,xO,1,3,":svg:circle",9,Is)),t&2){let n=e.$implicit,r=pt(2);kn("d",r.getPathData(n.points))("stroke",n.color),Z(),jn(n.points)}}function kO(t,e){if(t&1&&(ge(0,"div",7),fr(1,"div",10),ge(2,"span"),re(3),Ee()()),t&2){let n=e.$implicit;Z(),Sl("background-color",n.color),Z(2),Vn(n.name)}}function PO(t,e){if(t&1&&(Wi(),ge(0,"svg",2)(1,"defs")(2,"pattern",3),fr(3,"path",4),Ee()(),fr(4,"rect",5),Ln(5,OO,3,2,null,null,RD),Ee(),Rc(),ge(7,"div",6),Ln(8,kO,4,3,"div",7,RD),Ee()),t&2){let n=pt();Z(5),jn(n.playerLines),Z(3),jn(n.playerLines)}}function FO(t,e){t&1&&(ge(0,"div",1),re(1,"No score data yet"),Ee())}var Wu=class t{constructor(e){this.cdr=e}players=[];roundHistory=[];playerLines=[];maxScore=0;minScore=0;colors=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff"];ngOnChanges(e){(e.roundHistory||e.players)&&(this.updateGraph(),this.cdr.markForCheck())}updateGraph(){!this.players.length||!this.roundHistory.length||(this.playerLines=this.players.map((e,n)=>({name:e.name,color:this.colors[n%this.colors.length],points:this.roundHistory.map((r,i)=>({x:i,y:this.calculateCumulativeScore(n,i)}))})),this.calculateMinMaxScores())}calculateCumulativeScore(e,n){let r=0;for(let i=0;i<=n;i++)r+=this.roundHistory[i][e]||0;return r}calculateMinMaxScores(){let e=this.playerLines.flatMap(n=>n.points.map(r=>r.y));this.maxScore=Math.max(...e,0),this.minScore=Math.min(...e,0)}getScaledX(e){let n=Math.max(this.roundHistory.length-1,1);return e/n*280+10}getScaledY(e){let n=this.maxScore-this.minScore||1;return 180-(e-this.minScore)/n*160+10}getPathData(e){return e.length===0?"":e.map((r,i)=>{let o=this.getScaledX(r.x),s=this.getScaledY(r.y);return i===0?`M ${o} ${s}`:`L ${o} ${s}`}).join(" ")}static \u0275fac=function(n){return new(n||t)(W(At))};static \u0275cmp=Je({type:t,selectors:[["app-score-graph"]],inputs:{players:"players",roundHistory:"roundHistory"},features:[Tt],decls:5,vars:1,consts:[[1,"graph-container"],[1,"no-data"],["viewBox","0 0 300 200",1,"graph"],["id","grid","width","20","height","20","patternUnits","userSpaceOnUse"],["d","M 20 0 L 0 0 0 20","fill","none","stroke","#e0e0e0","stroke-width","0.5"],["width","100%","height","100%","fill","url(#grid)"],[1,"legend"],[1,"legend-item"],["stroke-width","2","fill","none"],["r","3"],[1,"legend-color"]],template:function(n,r){n&1&&(ge(0,"div",0)(1,"h3"),re(2,"Score Progress"),Ee(),Pn(3,PO,10,0)(4,FO,2,0,"div",1),Ee()),n&2&&(Z(3),Fn(r.playerLines.length>0?3:4))},dependencies:[gr],styles:[".graph-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;box-shadow:0 2px 4px #0000001a}.graph-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;color:#333}.graph-container[_ngcontent-%COMP%]   .graph[_ngcontent-%COMP%]{width:100%;height:200px;border:1px solid #ddd;border-radius:4px}.graph-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;margin-top:12px}.graph-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:14px}.graph-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-color[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.graph-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;color:#666;padding:40px 0;font-style:italic}@media(max-width:768px){.graph-container[_ngcontent-%COMP%]{padding:12px}.graph-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.graph-container[_ngcontent-%COMP%]   .graph[_ngcontent-%COMP%]{height:150px}.graph-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{justify-content:center}.graph-container[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{font-size:12px}}"],changeDetection:0})};function LO(t,e){t&1&&ot(0,"img",15)}function jO(t,e){t&1&&ot(0,"img",16)}function VO(t,e){if(t&1){let n=ro();he(0,"div",6)(1,"button",12),be("click",function(){let i=or(n).$index,o=pt();return sr(o.removePlayer(i))}),re(2," X "),pe(),he(3,"span",13),re(4),As(5,"titlecase"),pe(),ot(6,"input",14),Pn(7,LO,1,0,"img",15),Pn(8,jO,1,0,"img",16),he(9,"span",17),re(10),pe()()}if(t&2){let n=e.$implicit,r=e.$index,i=pt();Z(4),Vn(Ms(5,5,n.name)),Z(2),it("formControl",i.players[r].scoreCtrl),Z(),Fn(i.min===n.total?7:-1),Z(),Fn(i.max===n.total?8:-1),Z(2),Vn(n.total)}}function UO(t,e){if(t&1){let n=ro();he(0,"app-modal",18),be("close",function(){or(n);let i=pt();return sr(i.closeModal())})("confirm",function(){or(n);let i=pt();return sr(i.onConfirmSave())}),pe()}}var Da=class t{destroy$=new le;supabaseService=_(Po);cdr=_(At);playerName=new Cg("",[ra.required,ra.maxLength(24)]);players=[];roundHistory=rt([]);min=-1;max=99;gamePools$;isModalOpen;isDisabled=rt(!0);isSidebarOpen=!1;ngOnInit(){this.supabaseService.getGamePool()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}addPlayer(){if(this.playerName.valid){let e={id:crypto.randomUUID(),name:this.playerName.value,scoreCtrl:new Cg(0),total:0};this.players.push(e),this.playerName.setValue(""),this.cdr.detectChanges()}this.isScoreExisting()&&this.computeTotal()}computeTotal(){let e=[];this.players.forEach((i,o)=>{let s=i.scoreCtrl.value||0;e[o]=s,i.total+=s,i.scoreCtrl.setValue(0)});let n=this.roundHistory();this.roundHistory.set([...n,e]);let r=this.players.map(i=>i.total);this.min=Math.min(...r),this.max=Math.max(...r),this.isDisabled()&&this.isDisabled.set(!1)}removePlayer(e){this.players.splice(e,1);let r=this.roundHistory().map(i=>{let o=[...i];return o.splice(e,1),o});this.roundHistory.set(r),this.computeTotal()}openSaveScoreModal(){this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}onConfirmSave(){this.supabaseService.insertScore(this.players,Co.poolId).pipe(Qn(this.destroy$),En(e=>Ko(()=>e.message))).subscribe({next:()=>{alert("Score saved"),this.isModalOpen=!1},error:e=>{alert(`Score not saved: 
 `+e),console.error("Insertion failed",e)}})}isScoreExisting(){return this.players.some(e=>e.total>0)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Je({type:t,selectors:[["app-scores"]],decls:17,vars:5,consts:[[1,"scores-layout"],[1,"scores-section"],[1,"input-name-container"],["id","player-name","placeholder","Pseudo",1,"playerInput",3,"keyup.enter","formControl"],[1,"btn","add-player",3,"click","touchstart"],[1,"list-container"],[1,"player-item"],[1,"flex"],[1,"btn","btn-pad","validate","ripple",3,"click"],[1,"btn","btn-pad","validate","ripple",3,"click","disabled"],[1,"graph-section"],[3,"players","roundHistory"],["tabindex","-1",1,"btn",3,"click"],[1,"player-name"],["type","number","min","0",1,"input-score",3,"formControl"],["src","crown.svg",1,"top-player"],["src","turtle.svg",1,"top-player"],[1,"total"],[3,"close","confirm"]],template:function(n,r){n&1&&(he(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),be("keyup.enter",function(){return r.addPlayer()}),pe(),he(4,"button",4),be("click",function(){return r.addPlayer()})("touchstart",function(){return r.addPlayer()}),re(5,"+"),pe()(),he(6,"div",5),Ln(7,VO,11,7,"div",6,Is),pe(),he(9,"div",7)(10,"button",8),be("click",function(){return r.computeTotal()}),re(11," Validate round "),pe(),he(12,"button",9),be("click",function(){return r.openSaveScoreModal()}),re(13," Save data "),pe()()(),he(14,"div",10),ot(15,"app-score-graph",11),pe()(),Pn(16,UO,1,0,"app-modal")),n&2&&(Z(3),it("formControl",r.playerName),Z(4),jn(r.players),Z(5),it("disabled",r.isDisabled()),Z(3),it("players",r.players)("roundHistory",r.roundHistory()),Z(),Fn(r.isModalOpen?16:-1))},dependencies:[qu,Wu,Db,_u,Sg,_b,Tg,Ig,gr,Ep],styles:[".btn[_ngcontent-%COMP%]{border:none;border-radius:3px;background-color:#dfd39d;color:#3d5442}.btn-pad[_ngcontent-%COMP%]{padding:5px}.btn[_ngcontent-%COMP%]:disabled{background-color:#ece4c3;color:#000;cursor:not-allowed;opacity:.6}.btn[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#d2c277;transition:.2s}.scores-layout[_ngcontent-%COMP%]{display:flex;gap:20px;max-width:1200px;margin:0 auto;padding:20px}.scores-section[_ngcontent-%COMP%]{flex:1;max-width:400px}.graph-section[_ngcontent-%COMP%]{flex:1;min-width:300px}.container[_ngcontent-%COMP%]{max-width:300px;margin:0 auto}.container[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]{max-height:90vh;overflow-y:scroll}.container[_ngcontent-%COMP%]   .input-name-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin-bottom:10px;height:20px}.container[_ngcontent-%COMP%]   .input-name-container[_ngcontent-%COMP%]   .playerInput[_ngcontent-%COMP%]{width:85%;border-color:gray;border-width:0 0 1px 0;border-style:solid;transition:border-color .3s}.container[_ngcontent-%COMP%]   .input-name-container[_ngcontent-%COMP%]   .playerInput[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none;border-color:#dfd39d;border-width:0 0 1.7px 0;transition:all .2s}.container[_ngcontent-%COMP%]   .input-name-container[_ngcontent-%COMP%]   .add-player[_ngcontent-%COMP%]{width:25px;touch-action:manipulation;-webkit-tap-highlight-color:transparent;cursor:pointer}.container[_ngcontent-%COMP%]   .input-score[_ngcontent-%COMP%]{-webkit-appearance:none;border:1px solid #ccc;width:30px;border-radius:4px}.container[_ngcontent-%COMP%]   .input-score[_ngcontent-%COMP%]:focus{outline:none;border-color:#dfd39d}.container[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{appearance:none;-moz-appearance:textfield}.container[_ngcontent-%COMP%]   .validate[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;margin:auto}.list-container[_ngcontent-%COMP%]{max-height:60vh;overflow-y:auto}.input-name-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin-bottom:10px;height:20px}.input-name-container[_ngcontent-%COMP%]   .playerInput[_ngcontent-%COMP%]{width:85%;border-color:gray;border-width:0 0 1px 0;border-style:solid;transition:border-color .3s}.input-name-container[_ngcontent-%COMP%]   .playerInput[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none;border-color:#dfd39d;border-width:0 0 1.7px 0;transition:all .2s}.input-name-container[_ngcontent-%COMP%]   .add-player[_ngcontent-%COMP%]{width:25px}.input-score[_ngcontent-%COMP%]{-webkit-appearance:none;border:1px solid #ccc;border-radius:4px;width:30px}.input-score[_ngcontent-%COMP%]:focus{outline:none;border-color:#dfd39d}input[type=number][_ngcontent-%COMP%]{appearance:none;-moz-appearance:textfield}.validate[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;margin:auto}.flex[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.player-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px;justify-content:flex-start;align-items:center;border-bottom:1px solid #ccc;padding:10px}.player-item[_ngcontent-%COMP%]   .player-name[_ngcontent-%COMP%]{width:80px}.player-item[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{margin-left:auto;font-size:4vh}.player-item[_ngcontent-%COMP%]   .top-player[_ngcontent-%COMP%]{height:1em}.player-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.remove-btn[_ngcontent-%COMP%]{display:none;background:none;border:none;color:red;font-size:14px;cursor:pointer}.player-name-container[_ngcontent-%COMP%]:hover   .remove-btn[_ngcontent-%COMP%]{display:inline}@media only screen and (max-width:768px){.scores-layout[_ngcontent-%COMP%]{flex-direction:column;padding:10px}.scores-section[_ngcontent-%COMP%]{max-width:100%}.graph-section[_ngcontent-%COMP%]{order:2}.container[_ngcontent-%COMP%]{max-width:80vw}.player-item[_ngcontent-%COMP%]{margin-bottom:20px}.player-item[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{font-size:3vh}.validate[_ngcontent-%COMP%]{width:100%}}"]})};function BO(t,e){if(t&1&&(ge(0,"div")(1,"h4"),re(2),Ee(),ge(3,"p"),re(4),Ee(),ge(5,"p"),re(6),Ee(),ge(7,"p"),re(8),Ee(),ge(9,"p"),re(10),Ee()()),t&2){let n=e.$implicit;Z(2),Vn(n.name),Z(2),hr("Played game: ",n.nb_game),Z(2),hr("Best score: ",n.best_score),Z(2),hr("Highest score: ",n.max_score),Z(2),hr("Total score: ",n.total)}}var Ku=class t{supabaseService=_(Po);destroy$=new le;playerData$;ngOnInit(){this.playerData$=this.supabaseService.getStatsV1()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Je({type:t,selectors:[["app-stats"]],decls:3,vars:2,template:function(n,r){n&1&&(Ln(0,BO,11,5,"div",null,up),As(2,"async")),n&2&&jn(Ms(2,0,r.playerData$))},dependencies:[gr,wp],encapsulation:2})};var ND=[{path:"",component:Da,pathMatch:"full"},{path:"stats",component:Ku},{path:"**",component:Da}];function xD(t){return new E(3e3,!1)}function $O(){return new E(3100,!1)}function HO(){return new E(3101,!1)}function zO(t){return new E(3001,!1)}function GO(t){return new E(3003,!1)}function qO(t){return new E(3004,!1)}function kD(t,e){return new E(3005,!1)}function PD(){return new E(3006,!1)}function FD(){return new E(3007,!1)}function LD(t,e){return new E(3008,!1)}function jD(t){return new E(3002,!1)}function VD(t,e,n,r,i){return new E(3010,!1)}function UD(){return new E(3011,!1)}function BD(){return new E(3012,!1)}function $D(){return new E(3200,!1)}function HD(){return new E(3202,!1)}function zD(){return new E(3013,!1)}function GD(t){return new E(3014,!1)}function qD(t){return new E(3015,!1)}function WD(t){return new E(3016,!1)}function KD(t,e){return new E(3404,!1)}function WO(t){return new E(3502,!1)}function QD(t){return new E(3503,!1)}function YD(){return new E(3300,!1)}function ZD(t){return new E(3504,!1)}function JD(t){return new E(3301,!1)}function XD(t,e){return new E(3302,!1)}function eC(t){return new E(3303,!1)}function tC(t,e){return new E(3400,!1)}function nC(t){return new E(3401,!1)}function rC(t){return new E(3402,!1)}function iC(t,e){return new E(3505,!1)}function Gn(t){switch(t.length){case 0:return new _n;case 1:return t[0];default:return new Di(t)}}function cm(t,e,n=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==s,d=u&&a||new Map;c.forEach((p,f)=>{let g=f,m=p;if(f!=="offset")switch(g=t.normalizePropertyName(g,i),m){case Fo:m=n.get(f);break;case kt:m=r.get(f);break;default:m=t.normalizeStyleValue(f,g,m,i);break}d.set(g,m)}),u||o.push(d),a=d,s=l}),i.length)throw WO(i);return o}function Qu(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&om(n,"start",t)));break;case"done":t.onDone(()=>r(n&&om(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&om(n,"destroy",t)));break}}function om(t,e,n){let r=n.totalTime,i=!!n.disabled,o=Yu(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,r??t.totalTime,i),s=t._data;return s!=null&&(o._data=s),o}function Yu(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function st(t,e,n){let r=t.get(e);return r||t.set(e,r=n),r}function lm(t){let e=t.indexOf(":"),n=t.substring(1,e),r=t.slice(e+1);return[n,r]}var KO=typeof document>"u"?null:document.documentElement;function Zu(t){let e=t.parentNode||t.host||null;return e===KO?null:e}function QO(t){return t.substring(1,6)=="ebkit"}var Ci=null,OD=!1;function oC(t){Ci||(Ci=YO()||{},OD=Ci.style?"WebkitAppearance"in Ci.style:!1);let e=!0;return Ci.style&&!QO(t)&&(e=t in Ci.style,!e&&OD&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Ci.style)),e}function YO(){return typeof document<"u"?document.body:null}function um(t,e){for(;e;){if(e===t)return!0;e=Zu(e)}return!1}function dm(t,e,n){if(n)return Array.from(t.querySelectorAll(e));let r=t.querySelector(e);return r?[r]:[]}var ZO=1e3,fm="{{",JO="}}",hm="ng-enter",Ju="ng-leave",Ca="ng-trigger",Sa=".ng-trigger",pm="ng-animating",Xu=".ng-animating";function wn(t){if(typeof t=="number")return t;let e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:sm(parseFloat(e[1]),e[2])}function sm(t,e){return e==="s"?t*ZO:t}function Ia(t,e,n){return t.hasOwnProperty("duration")?t:ek(t,e,n)}var XO=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function ek(t,e,n){let r,i=0,o="";if(typeof t=="string"){let s=t.match(XO);if(s===null)return e.push(xD(t)),{duration:0,delay:0,easing:""};r=sm(parseFloat(s[1]),s[2]);let a=s[3];a!=null&&(i=sm(parseFloat(a),s[4]));let c=s[5];c&&(o=c)}else r=t;if(!n){let s=!1,a=e.length;r<0&&(e.push($O()),s=!0),i<0&&(e.push(HO()),s=!0),s&&e.splice(a,0,xD(t))}return{duration:r,delay:i,easing:o}}function sC(t){return t.length?t[0]instanceof Map?t:t.map(e=>new Map(Object.entries(e))):[]}function Jt(t,e,n){e.forEach((r,i)=>{let o=ed(i);n&&!n.has(i)&&n.set(i,t.style[o]),t.style[o]=r})}function Sr(t,e){e.forEach((n,r)=>{let i=ed(r);t.style[i]=""})}function Lo(t){return Array.isArray(t)?t.length==1?t[0]:MD(t):t}function aC(t,e,n){let r=e.params||{},i=gm(t);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||n.push(zO(o))})}var am=new RegExp(`${fm}\\s*(.+?)\\s*${JO}`,"g");function gm(t){let e=[];if(typeof t=="string"){let n;for(;n=am.exec(t);)e.push(n[1]);am.lastIndex=0}return e}function jo(t,e,n){let r=`${t}`,i=r.replace(am,(o,s)=>{let a=e[s];return a==null&&(n.push(GO(s)),a=""),a.toString()});return i==r?t:i}var tk=/-+([a-z0-9])/g;function ed(t){return t.replace(tk,(...e)=>e[1].toUpperCase())}function cC(t,e){return t===0||e===0}function lC(t,e,n){if(n.size&&e.length){let r=e[0],i=[];if(n.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,td(t,a)))}}return e}function at(t,e,n){switch(e.type){case V.Trigger:return t.visitTrigger(e,n);case V.State:return t.visitState(e,n);case V.Transition:return t.visitTransition(e,n);case V.Sequence:return t.visitSequence(e,n);case V.Group:return t.visitGroup(e,n);case V.Animate:return t.visitAnimate(e,n);case V.Keyframes:return t.visitKeyframes(e,n);case V.Style:return t.visitStyle(e,n);case V.Reference:return t.visitReference(e,n);case V.AnimateChild:return t.visitAnimateChild(e,n);case V.AnimateRef:return t.visitAnimateRef(e,n);case V.Query:return t.visitQuery(e,n);case V.Stagger:return t.visitStagger(e,n);default:throw qO(e.type)}}function td(t,e){return window.getComputedStyle(t)[e]}var xm=(()=>{class t{validateStyleProperty(n){return oC(n)}containsElement(n,r){return um(n,r)}getParentElement(n){return Zu(n)}query(n,r,i){return dm(n,r,i)}computeStyle(n,r,i){return i||""}animate(n,r,i,o,s,a=[],c){return new _n(i,o)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac})}return t})(),Ii=class{static NOOP=new xm},Ti=class{};var nk=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),sd=class extends Ti{normalizePropertyName(e,n){return ed(e)}normalizeStyleValue(e,n,r,i){let o="",s=r.toString().trim();if(nk.has(n)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(kD(e,r))}return s+o}};var ad="*";function rk(t,e){let n=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(r=>ik(r,n,e)):n.push(t),n}function ik(t,e,n){if(t[0]==":"){let c=ok(t,n);if(typeof c=="function"){e.push(c);return}t=c}let r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return n.push(qD(t)),e;let i=r[1],o=r[2],s=r[3];e.push(uC(i,s));let a=i==ad&&s==ad;o[0]=="<"&&!a&&e.push(uC(s,i))}function ok(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,r)=>parseFloat(r)>parseFloat(n);case":decrement":return(n,r)=>parseFloat(r)<parseFloat(n);default:return e.push(WD(t)),"* => *"}}var nd=new Set(["true","1"]),rd=new Set(["false","0"]);function uC(t,e){let n=nd.has(t)||rd.has(t),r=nd.has(e)||rd.has(e);return(i,o)=>{let s=t==ad||t==i,a=e==ad||e==o;return!s&&n&&typeof i=="boolean"&&(s=i?nd.has(t):rd.has(t)),!a&&r&&typeof o=="boolean"&&(a=o?nd.has(e):rd.has(e)),s&&a}}var wC=":self",sk=new RegExp(`s*${wC}s*,?`,"g");function EC(t,e,n,r){return new Em(t).build(e,n,r)}var dC="",Em=class{_driver;constructor(e){this._driver=e}build(e,n,r){let i=new bm(n);return this._resetContextStyleTimingState(i),at(this,Lo(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=dC,e.collectedStyles=new Map,e.collectedStyles.set(dC,new Map),e.currentTime=0}visitTrigger(e,n){let r=n.queryCount=0,i=n.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&n.errors.push(PD()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),a.type==V.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,o.push(this.visitState(c,n))}),c.name=l}else if(a.type==V.Transition){let c=this.visitTransition(a,n);r+=c.queryCount,i+=c.depCount,s.push(c)}else n.errors.push(FD())}),{type:V.Trigger,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,n){let r=this.visitStyle(e.styles,n),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{gm(c).forEach(l=>{s.hasOwnProperty(l)||o.add(l)})})}),o.size&&n.errors.push(LD(e.name,[...o.values()]))}return{type:V.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;let r=at(this,Lo(e.animation),n),i=rk(e.expr,n.errors);return{type:V.Transition,matchers:i,animation:r,queryCount:n.queryCount,depCount:n.depCount,options:Si(e.options)}}visitSequence(e,n){return{type:V.Sequence,steps:e.steps.map(r=>at(this,r,n)),options:Si(e.options)}}visitGroup(e,n){let r=n.currentTime,i=0,o=e.steps.map(s=>{n.currentTime=r;let a=at(this,s,n);return i=Math.max(i,n.currentTime),a});return n.currentTime=i,{type:V.Group,steps:o,options:Si(e.options)}}visitAnimate(e,n){let r=uk(e.timings,n.errors);n.currentAnimateTimings=r;let i,o=e.styles?e.styles:Cr({});if(o.type==V.Keyframes)i=this.visitKeyframes(o,n);else{let s=e.styles,a=!1;if(!s){a=!0;let l={};r.easing&&(l.easing=r.easing),s=Cr(l)}n.currentTime+=r.duration+r.delay;let c=this.visitStyle(s,n);c.isEmptyStep=a,i=c}return n.currentAnimateTimings=null,{type:V.Animate,timings:r,style:i,options:null}}visitStyle(e,n){let r=this._makeStyleAst(e,n);return this._validateStyleAst(r,n),r}_makeStyleAst(e,n){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===kt?r.push(a):n.errors.push(jD(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(fm)>=0){o=!0;break}}}),{type:V.Style,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,n){let r=n.currentAnimateTimings,i=n.currentTime,o=n.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let l=n.collectedStyles.get(n.currentQuerySelector),u=l.get(c),d=!0;u&&(o!=i&&o>=u.startTime&&i<=u.endTime&&(n.errors.push(VD(c,u.startTime,u.endTime,o,i)),d=!1),o=u.startTime),d&&l.set(c,{startTime:o,endTime:i}),n.options&&aC(a,n.options,n.errors)})})}visitKeyframes(e,n){let r={type:V.Keyframes,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(UD()),r;let i=1,o=0,s=[],a=!1,c=!1,l=0,u=e.steps.map(v=>{let A=this._makeStyleAst(v,n),b=A.offset!=null?A.offset:lk(A.styles),D=0;return b!=null&&(o++,D=A.offset=b),c=c||D<0||D>1,a=a||D<l,l=D,s.push(D),A});c&&n.errors.push(BD()),a&&n.errors.push($D());let d=e.steps.length,p=0;o>0&&o<d?n.errors.push(HD()):o==0&&(p=i/(d-1));let f=d-1,g=n.currentTime,m=n.currentAnimateTimings,y=m.duration;return u.forEach((v,A)=>{let b=p>0?A==f?1:p*A:s[A],D=b*y;n.currentTime=g+m.delay+D,m.duration=D,this._validateStyleAst(v,n),v.offset=b,r.styles.push(v)}),r}visitReference(e,n){return{type:V.Reference,animation:at(this,Lo(e.animation),n),options:Si(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:V.AnimateChild,options:Si(e.options)}}visitAnimateRef(e,n){return{type:V.AnimateRef,animation:this.visitReference(e.animation,n),options:Si(e.options)}}visitQuery(e,n){let r=n.currentQuerySelector,i=e.options||{};n.queryCount++,n.currentQuery=e;let[o,s]=ak(e.selector);n.currentQuerySelector=r.length?r+" "+o:o,st(n.collectedStyles,n.currentQuerySelector,new Map);let a=at(this,Lo(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:V.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Si(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(zD());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Ia(e.timings,n.errors,!0);return{type:V.Stagger,animation:at(this,Lo(e.animation),n),timings:r,options:null}}};function ak(t){let e=!!t.split(/\s*,\s*/).find(n=>n==wC);return e&&(t=t.replace(sk,"")),t=t.replace(/@\*/g,Sa).replace(/@\w+/g,n=>Sa+"-"+n.slice(1)).replace(/:animating/g,Xu),[t,e]}function ck(t){return t?w({},t):null}var bm=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function lk(t){if(typeof t=="string")return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){let r=n;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}function uk(t,e){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let o=Ia(t,e).duration;return mm(o,0,"")}let n=t;if(n.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=mm(0,0,"");return o.dynamic=!0,o.strValue=n,o}let i=Ia(n,e);return mm(i.duration,i.delay,i.easing)}function Si(t){return t?(t=w({},t),t.params&&(t.params=ck(t.params))):t={},t}function mm(t,e,n){return{duration:t,delay:e,easing:n}}function Om(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var Aa=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,n){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}},dk=1,fk=":enter",hk=new RegExp(fk,"g"),pk=":leave",gk=new RegExp(pk,"g");function bC(t,e,n,r,i,o=new Map,s=new Map,a,c,l=[]){return new Dm().buildKeyframes(t,e,n,r,i,o,s,a,c,l)}var Dm=class{buildKeyframes(e,n,r,i,o,s,a,c,l,u=[]){l=l||new Aa;let d=new Cm(e,n,l,i,o,u,[]);d.options=c;let p=c.delay?wn(c.delay):0;d.currentTimeline.delayNextStep(p),d.currentTimeline.setStyles([s],null,d.errors,c),at(this,r,d);let f=d.timelines.filter(g=>g.containsAnimation());if(f.length&&a.size){let g;for(let m=f.length-1;m>=0;m--){let y=f[m];if(y.element===n){g=y;break}}g&&!g.allowOnlyTimelineStyles()&&g.setStyles([a],null,d.errors,c)}return f.length?f.map(g=>g.buildKeyframes()):[Om(n,[],[],[],0,p,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){let r=n.subInstructions.get(n.element);if(r){let i=n.createSubContext(e.options),o=n.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&n.transformIntoNewTimeline(s)}n.previousNode=e}visitAnimateRef(e,n){let r=n.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,r),this.visitReference(e.animation,r),n.transformIntoNewTimeline(r.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,r){for(let i of e){let o=i?.delay;if(o){let s=typeof o=="number"?o:wn(jo(o,i?.params??{},n.errors));r.delayNextStep(s)}}}_visitSubInstructions(e,n,r){let o=n.currentTimeline.currentTime,s=r.duration!=null?wn(r.duration):null,a=r.delay!=null?wn(r.delay):null;return s!==0&&e.forEach(c=>{let l=n.appendInstructionToTimeline(c,s,a);o=Math.max(o,l.duration+l.delay)}),o}visitReference(e,n){n.updateOptions(e.options,!0),at(this,e.animation,n),n.previousNode=e}visitSequence(e,n){let r=n.subContextCount,i=n,o=e.options;if(o&&(o.params||o.delay)&&(i=n.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==V.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=cd);let s=wn(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>at(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){let r=[],i=n.currentTimeline.currentTime,o=e.options&&e.options.delay?wn(e.options.delay):0;e.steps.forEach(s=>{let a=n.createSubContext(e.options);o&&a.delayNextStep(o),at(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>n.currentTimeline.mergeTimelineCollectedStyles(s)),n.transformIntoNewTimeline(i),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){let r=e.strValue,i=n.params?jo(r,n.params,n.errors):r;return Ia(i,n.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){let r=n.currentAnimateTimings=this._visitTiming(e.timings,n),i=n.currentTimeline;r.delay&&(n.incrementTime(r.delay),i.snapshotCurrentStyles());let o=e.style;o.type==V.Keyframes?this.visitKeyframes(o,n):(n.incrementTime(r.duration),this.visitStyle(o,n),i.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){let r=n.currentTimeline,i=n.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){let r=n.currentAnimateTimings,i=n.currentTimeline.duration,o=r.duration,a=n.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*o),a.setStyles(c.styles,c.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(i+o),n.previousNode=e}visitQuery(e,n){let r=n.currentTimeline.currentTime,i=e.options||{},o=i.delay?wn(i.delay):0;o&&(n.previousNode.type===V.Style||r==0&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=cd);let s=r,a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,n.errors);n.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{n.currentQueryIndex=u;let d=n.createSubContext(e.options,l);o&&d.delayNextStep(o),l===n.element&&(c=d.currentTimeline),at(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let p=d.currentTimeline.currentTime;s=Math.max(s,p)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(s),c&&(n.currentTimeline.mergeTimelineCollectedStyles(c),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){let r=n.parentContext,i=n.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(n.currentQueryTotal-1),c=s*n.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let u=n.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;at(this,e.animation,n),n.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}},cd={},Cm=class t{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=cd;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,n,r,i,o,s,a,c){this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=c||new ld(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=wn(r.duration)),r.delay!=null&&(i.delay=wn(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!n||!s.hasOwnProperty(a))&&(s[a]=jo(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let n=this.options.params;if(n){let r=e.params={};Object.keys(n).forEach(i=>{r[i]=n[i]})}}return e}createSubContext(e=null,n,r){let i=n||this.element,o=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=cd,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,r){let i={duration:n??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new Sm(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(hk,"."+this._enterClassName),e=e.replace(gk,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!o&&a.length==0&&s.push(GD(n)),a}},ld=class t{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,n,r,i){this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let n=this._keyframes.size===1&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=dk,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,r]of this._globalTimelineStyles)this._backFill.set(n,r||kt),this._currentKeyframe.set(n,kt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,r,i){n&&this._previousKeyframe.set("easing",n);let o=i&&i.params||{},s=mk(e,this._globalTimelineStyles);for(let[a,c]of s){let l=jo(c,o,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??kt),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,r)=>{let i=this._styleSummary.get(r);(!i||n.time>i.time)&&this._updateStyle(r,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,n=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,d)=>{u===Fo?e.add(d):u===kt&&n.add(d)}),r||l.set("offset",c/this.duration),i.push(l)});let o=[...e.values()],s=[...n.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return Om(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},Sm=class extends ld{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,n,r,i,o,s,a=!1){super(e,n,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&n){let o=[],s=r+n,a=n/s,c=new Map(e[0]);c.set("offset",0),o.push(c);let l=new Map(e[0]);l.set("offset",fC(a)),o.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let p=new Map(e[d]),f=p.get("offset"),g=n+f*r;p.set("offset",fC(g/s)),o.push(p)}r=s,n=0,i="",e=o}return Om(this.element,e,this.preStyleProps,this.postStyleProps,r,n,i,!0)}};function fC(t,e=3){let n=Math.pow(10,e-1);return Math.round(t*n)/n}function mk(t,e){let n=new Map,r;return t.forEach(i=>{if(i==="*"){r??=e.keys();for(let o of r)n.set(o,kt)}else for(let[o,s]of i)n.set(o,s)}),n}function hC(t,e,n,r,i,o,s,a,c,l,u,d,p){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:p}}var ym={},ud=class{_triggerName;ast;_stateStyles;constructor(e,n,r){this._triggerName=e,this.ast=n,this._stateStyles=r}match(e,n,r,i){return yk(this.ast.matchers,e,n,r,i)}buildStyles(e,n,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(n,r):new Map}build(e,n,r,i,o,s,a,c,l,u){let d=[],p=this.ast.options&&this.ast.options.params||ym,f=a&&a.params||ym,g=this.buildStyles(r,f,d),m=c&&c.params||ym,y=this.buildStyles(i,m,d),v=new Set,A=new Map,b=new Map,D=i==="void",G={params:DC(m,p),delay:this.ast.options?.delay},oe=u?[]:bC(e,n,this.ast.animation,o,s,g,y,G,l,d),F=0;return oe.forEach(q=>{F=Math.max(q.duration+q.delay,F)}),d.length?hC(n,this._triggerName,r,i,D,g,y,[],[],A,b,F,d):(oe.forEach(q=>{let ze=q.element,Ge=st(A,ze,new Set);q.preStyleProps.forEach(Ir=>Ge.add(Ir));let km=st(b,ze,new Set);q.postStyleProps.forEach(Ir=>km.add(Ir)),ze!==n&&v.add(ze)}),hC(n,this._triggerName,r,i,D,g,y,oe,[...v.values()],A,b,F))}};function yk(t,e,n,r,i){return t.some(o=>o(e,n,r,i))}function DC(t,e){let n=w({},e);return Object.entries(t).forEach(([r,i])=>{i!=null&&(n[r]=i)}),n}var Im=class{styles;defaultParams;normalizer;constructor(e,n,r){this.styles=e,this.defaultParams=n,this.normalizer=r}buildStyles(e,n){let r=new Map,i=DC(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=jo(s,i,n));let c=this.normalizer.normalizePropertyName(a,n);s=this.normalizer.normalizeStyleValue(a,c,s,n),r.set(a,s)})}),r}};function vk(t,e,n){return new Tm(t,e,n)}var Tm=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,n,r){this.name=e,this.ast=n,this._normalizer=r,n.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new Im(i.style,o,r))}),pC(this.states,"true","1"),pC(this.states,"false","0"),n.transitions.forEach(i=>{this.transitionFactories.push(new ud(e,i,this.states))}),this.fallbackTransition=_k(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,r,i){return this.transitionFactories.find(s=>s.match(e,n,r,i))||null}matchStyles(e,n,r){return this.fallbackTransition.buildStyles(e,n,r)}};function _k(t,e,n){let r=[(s,a)=>!0],i={type:V.Sequence,steps:[],options:null},o={type:V.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new ud(t,o,e)}function pC(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}var wk=new Aa,Am=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,n,r){this.bodyNode=e,this._driver=n,this._normalizer=r}register(e,n){let r=[],i=[],o=EC(this._driver,n,r,i);if(r.length)throw QD(r);this._animations.set(e,o)}_buildPlayer(e,n,r){let i=e.element,o=cm(this._normalizer,e.keyframes,n,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,n,r={}){let i=[],o=this._animations.get(e),s,a=new Map;if(o?(s=bC(this._driver,n,o,hm,Ju,new Map,new Map,r,wk,i),s.forEach(u=>{let d=st(a,u.element,new Map);u.postStyleProps.forEach(p=>d.set(p,null))})):(i.push(YD()),s=[]),i.length)throw ZD(i);a.forEach((u,d)=>{u.forEach((p,f)=>{u.set(f,this._driver.computeStyle(d,f,kt))})});let c=s.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=Gn(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);let r=this.players.indexOf(n);r>=0&&this.players.splice(r,1)}_getPlayer(e){let n=this._playersById.get(e);if(!n)throw JD(e);return n}listen(e,n,r,i){let o=Yu(n,"","","");return Qu(this._getPlayer(e),r,o,i),()=>{}}command(e,n,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(e,n,s);return}let o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},gC="ng-animate-queued",Ek=".ng-animate-queued",vm="ng-animate-disabled",bk=".ng-animate-disabled",Dk="ng-star-inserted",Ck=".ng-star-inserted",Sk=[],CC={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ik={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Xt="__ng_removed",Ma=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=Ak(i),r){let o=e,{value:s}=o,a=Bm(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let n=e.params;if(n){let r=this.options.params;Object.keys(n).forEach(i=>{r[i]==null&&(r[i]=n[i])})}}},Ta="void",_m=new Ma(Ta),Mm=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,n,r){this.id=e,this.hostElement=n,this._engine=r,this._hostClassName="ng-tns-"+e,Pt(n,this._hostClassName)}listen(e,n,r,i){if(!this._triggers.has(n))throw XD(r,n);if(r==null||r.length==0)throw eC(n);if(!Mk(r))throw tC(r,n);let o=st(this._elementListeners,e,[]),s={name:n,phase:r,callback:i};o.push(s);let a=st(this._engine.statesByElement,e,new Map);return a.has(n)||(Pt(e,Ca),Pt(e,Ca+"-"+n),a.set(n,_m)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return this._triggers.has(e)?!1:(this._triggers.set(e,n),!0)}_getTrigger(e){let n=this._triggers.get(e);if(!n)throw nC(e);return n}trigger(e,n,r,i=!0){let o=this._getTrigger(n),s=new Ra(this.id,n,e),a=this._engine.statesByElement.get(e);a||(Pt(e,Ca),Pt(e,Ca+"-"+n),this._engine.statesByElement.set(e,a=new Map));let c=a.get(n),l=new Ma(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(n,l),c||(c=_m),!(l.value===Ta)&&c.value===l.value){if(!xk(c.params,l.params)){let m=[],y=o.matchStyles(c.value,c.params,m),v=o.matchStyles(l.value,l.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{Sr(e,y),Jt(e,v)})}return}let p=st(this._engine.playersByElement,e,[]);p.forEach(m=>{m.namespaceId==this.id&&m.triggerName==n&&m.queued&&m.destroy()});let f=o.matchTransition(c.value,l.value,e,l.params),g=!1;if(!f){if(!i)return;f=o.fallbackTransition,g=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:f,fromState:c,toState:l,player:s,isFallbackTransition:g}),g||(Pt(e,gC),s.onStart(()=>{Vo(e,gC)})),s.onDone(()=>{let m=this.players.indexOf(s);m>=0&&this.players.splice(m,1);let y=this._engine.playersByElement.get(e);if(y){let v=y.indexOf(s);v>=0&&y.splice(v,1)}}),this.players.push(s),p.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,r)=>{this._elementListeners.set(r,n.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let n=this._engine.playersByElement.get(e);n&&(n.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){let r=this._engine.driver.query(e,Sa,!0);r.forEach(i=>{if(i[Xt])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,n,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,n,r,i){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,l)=>{if(s.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,Ta,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,s),r&&Gn(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let n=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(n&&r){let i=new Set;n.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let c=this._triggers.get(s).fallbackTransition,l=r.get(s)||_m,u=new Ma(Ta),d=new Ra(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,n){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,n);else{let o=e[Xt];(!o||o===CC)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,n))}}insertNode(e,n){Pt(e,this._hostClassName)}drainQueuedTransitions(e){let n=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let c=Yu(o,r.triggerName,r.fromState.value,r.toState.value);c._data=e,Qu(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):n.push(r)}),this._queue=[],n.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Rm=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,n)=>{};_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,r){this.bodyNode=e,this.driver=n,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(n=>{n.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,n){let r=new Mm(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(r,n):(this.newHostElements.set(n,r),this.collectEnterElement(n)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,n){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(n);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(n,e),e}register(e,n){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,n)),r}registerTrigger(e,n,r){let i=this._namespaceLookup[e];i&&i.register(n,r)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let n=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&n.add(o)}}return n}trigger(e,n,r,i){if(id(n)){let o=this._fetchNamespace(e);if(o)return o.trigger(n,r,i),!0}return!1}insertNode(e,n,r,i){if(!id(n))return;let o=n[Xt];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(n);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(n,r)}i&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Pt(e,vm)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Vo(e,vm))}removeNode(e,n,r){if(id(n)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(n,r):this.markElementAsRemoved(e,n,!1,r);let o=this.namespacesByHostElement.get(n);o&&o.id!==e&&o.removeNode(n,r)}else this._onRemovalComplete(n,r)}markElementAsRemoved(e,n,r,i,o){this.collectedLeaveElements.push(n),n[Xt]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,n,r,i,o){return id(n)?this._fetchNamespace(e).listen(n,r,i,o):()=>{}}_buildInstruction(e,n,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,n,o)}destroyInnerAnimations(e){let n=this.driver.query(e,Sa,!0);n.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(n=this.driver.query(e,Xu,!0),n.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let n=this.playersByElement.get(e);n&&n.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let n=this.playersByQueriedElement.get(e);n&&n.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Gn(this.players).onDone(()=>e());e()})}processLeaveNode(e){let n=e[Xt];if(n&&n.setForRemoval){if(e[Xt]=CC,n.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(vm)&&this.markElementAsDisabled(e,!1),this.driver.query(e,bk,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Pt(i,Dk)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{n=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],n.length?Gn(n).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw rC(e)}_flushAnimations(e,n){let r=new Aa,i=[],o=new Map,s=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(S=>{u.add(S);let M=this.driver.query(S,Ek,!0);for(let k=0;k<M.length;k++)u.add(M[k])});let d=this.bodyNode,p=Array.from(this.statesByElement.keys()),f=vC(p,this.collectedEnterElements),g=new Map,m=0;f.forEach((S,M)=>{let k=hm+m++;g.set(M,k),S.forEach(K=>Pt(K,k))});let y=[],v=new Set,A=new Set;for(let S=0;S<this.collectedLeaveElements.length;S++){let M=this.collectedLeaveElements[S],k=M[Xt];k&&k.setForRemoval&&(y.push(M),v.add(M),k.hasAnimation?this.driver.query(M,Ck,!0).forEach(K=>v.add(K)):A.add(M))}let b=new Map,D=vC(p,Array.from(v));D.forEach((S,M)=>{let k=Ju+m++;b.set(M,k),S.forEach(K=>Pt(K,k))}),e.push(()=>{f.forEach((S,M)=>{let k=g.get(M);S.forEach(K=>Vo(K,k))}),D.forEach((S,M)=>{let k=b.get(M);S.forEach(K=>Vo(K,k))}),y.forEach(S=>{this.processLeaveNode(S)})});let G=[],oe=[];for(let S=this._namespaceList.length-1;S>=0;S--)this._namespaceList[S].drainQueuedTransitions(n).forEach(k=>{let K=k.player,Pe=k.element;if(G.push(K),this.collectedEnterElements.length){let qe=Pe[Xt];if(qe&&qe.setForMove){if(qe.previousTriggersValues&&qe.previousTriggersValues.has(k.triggerName)){let Tr=qe.previousTriggersValues.get(k.triggerName),Et=this.statesByElement.get(k.element);if(Et&&Et.has(k.triggerName)){let Na=Et.get(k.triggerName);Na.value=Tr,Et.set(k.triggerName,Na)}}K.destroy();return}}let en=!d||!this.driver.containsElement(d,Pe),ct=b.get(Pe),qn=g.get(Pe),de=this._buildInstruction(k,r,qn,ct,en);if(de.errors&&de.errors.length){oe.push(de);return}if(en){K.onStart(()=>Sr(Pe,de.fromStyles)),K.onDestroy(()=>Jt(Pe,de.toStyles)),i.push(K);return}if(k.isFallbackTransition){K.onStart(()=>Sr(Pe,de.fromStyles)),K.onDestroy(()=>Jt(Pe,de.toStyles)),i.push(K);return}let Lm=[];de.timelines.forEach(qe=>{qe.stretchStartingKeyframe=!0,this.disabledNodes.has(qe.element)||Lm.push(qe)}),de.timelines=Lm,r.append(Pe,de.timelines);let NC={instruction:de,player:K,element:Pe};s.push(NC),de.queriedElements.forEach(qe=>st(a,qe,[]).push(K)),de.preStyleProps.forEach((qe,Tr)=>{if(qe.size){let Et=c.get(Tr);Et||c.set(Tr,Et=new Set),qe.forEach((Na,vd)=>Et.add(vd))}}),de.postStyleProps.forEach((qe,Tr)=>{let Et=l.get(Tr);Et||l.set(Tr,Et=new Set),qe.forEach((Na,vd)=>Et.add(vd))})});if(oe.length){let S=[];oe.forEach(M=>{S.push(iC(M.triggerName,M.errors))}),G.forEach(M=>M.destroy()),this.reportError(S)}let F=new Map,q=new Map;s.forEach(S=>{let M=S.element;r.has(M)&&(q.set(M,M),this._beforeAnimationBuild(S.player.namespaceId,S.instruction,F))}),i.forEach(S=>{let M=S.element;this._getPreviousPlayers(M,!1,S.namespaceId,S.triggerName,null).forEach(K=>{st(F,M,[]).push(K),K.destroy()})});let ze=y.filter(S=>_C(S,c,l)),Ge=new Map;yC(Ge,this.driver,A,l,kt).forEach(S=>{_C(S,c,l)&&ze.push(S)});let Ir=new Map;f.forEach((S,M)=>{yC(Ir,this.driver,new Set(S),c,Fo)}),ze.forEach(S=>{let M=Ge.get(S),k=Ir.get(S);Ge.set(S,new Map([...M?.entries()??[],...k?.entries()??[]]))});let yd=[],Pm=[],Fm={};s.forEach(S=>{let{element:M,player:k,instruction:K}=S;if(r.has(M)){if(u.has(M)){k.onDestroy(()=>Jt(M,K.toStyles)),k.disabled=!0,k.overrideTotalTime(K.totalTime),i.push(k);return}let Pe=Fm;if(q.size>1){let ct=M,qn=[];for(;ct=ct.parentNode;){let de=q.get(ct);if(de){Pe=de;break}qn.push(ct)}qn.forEach(de=>q.set(de,Pe))}let en=this._buildAnimation(k.namespaceId,K,F,o,Ir,Ge);if(k.setRealPlayer(en),Pe===Fm)yd.push(k);else{let ct=this.playersByElement.get(Pe);ct&&ct.length&&(k.parentPlayer=Gn(ct)),i.push(k)}}else Sr(M,K.fromStyles),k.onDestroy(()=>Jt(M,K.toStyles)),Pm.push(k),u.has(M)&&i.push(k)}),Pm.forEach(S=>{let M=o.get(S.element);if(M&&M.length){let k=Gn(M);S.setRealPlayer(k)}}),i.forEach(S=>{S.parentPlayer?S.syncPlayerEvents(S.parentPlayer):S.destroy()});for(let S=0;S<y.length;S++){let M=y[S],k=M[Xt];if(Vo(M,Ju),k&&k.hasAnimation)continue;let K=[];if(a.size){let en=a.get(M);en&&en.length&&K.push(...en);let ct=this.driver.query(M,Xu,!0);for(let qn=0;qn<ct.length;qn++){let de=a.get(ct[qn]);de&&de.length&&K.push(...de)}}let Pe=K.filter(en=>!en.destroyed);Pe.length?Rk(this,M,Pe):this.processLeaveNode(M)}return y.length=0,yd.forEach(S=>{this.players.push(S),S.onDone(()=>{S.destroy();let M=this.players.indexOf(S);this.players.splice(M,1)}),S.play()}),yd}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,r,i,o){let s=[];if(n){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==Ta;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||s.push(l)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,n,r){let i=n.triggerName,o=n.element,s=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:i;for(let c of n.timelines){let l=c.element,u=l!==o,d=st(r,l,[]);this._getPreviousPlayers(l,u,s,a,n.toState).forEach(f=>{let g=f.getRealPlayer();g.beforeDestroy&&g.beforeDestroy(),f.destroy(),d.push(f)})}Sr(o,n.fromStyles)}_buildAnimation(e,n,r,i,o,s){let a=n.triggerName,c=n.element,l=[],u=new Set,d=new Set,p=n.timelines.map(g=>{let m=g.element;u.add(m);let y=m[Xt];if(y&&y.removedBeforeQueried)return new _n(g.duration,g.delay);let v=m!==c,A=Nk((r.get(m)||Sk).map(F=>F.getRealPlayer())).filter(F=>{let q=F;return q.element?q.element===m:!1}),b=o.get(m),D=s.get(m),G=cm(this._normalizer,g.keyframes,b,D),oe=this._buildPlayer(g,G,A);if(g.subTimeline&&i&&d.add(m),v){let F=new Ra(e,a,m);F.setRealPlayer(oe),l.push(F)}return oe});l.forEach(g=>{st(this.playersByQueriedElement,g.element,[]).push(g),g.onDone(()=>Tk(this.playersByQueriedElement,g.element,g))}),u.forEach(g=>Pt(g,pm));let f=Gn(p);return f.onDestroy(()=>{u.forEach(g=>Vo(g,pm)),Jt(c,n.toStyles)}),d.forEach(g=>{st(i,g,[]).push(f)}),f}_buildPlayer(e,n,r){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,r):new _n(e.duration,e.delay)}},Ra=class{namespaceId;triggerName;element;_player=new _n;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,n,r){this.namespaceId=e,this.triggerName=n,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,r)=>{n.forEach(i=>Qu(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){st(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let n=this._player;n.triggerCallback&&n.triggerCallback(e)}};function Tk(t,e,n){let r=t.get(e);if(r){if(r.length){let i=r.indexOf(n);r.splice(i,1)}r.length==0&&t.delete(e)}return r}function Ak(t){return t??null}function id(t){return t&&t.nodeType===1}function Mk(t){return t=="start"||t=="done"}function mC(t,e){let n=t.style.display;return t.style.display=e??"none",n}function yC(t,e,n,r,i){let o=[];n.forEach(c=>o.push(mC(c)));let s=[];r.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let p=e.computeStyle(l,d,i);u.set(d,p),(!p||p.length==0)&&(l[Xt]=Ik,s.push(l))}),t.set(l,u)});let a=0;return n.forEach(c=>mC(c,o[a++])),s}function vC(t,e){let n=new Map;if(t.forEach(a=>n.set(a,[])),e.length==0)return n;let r=1,i=new Set(e),o=new Map;function s(a){if(!a)return r;let c=o.get(a);if(c)return c;let l=a.parentNode;return n.has(l)?c=l:i.has(l)?c=r:c=s(l),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==r&&n.get(c).push(a)}),n}function Pt(t,e){t.classList?.add(e)}function Vo(t,e){t.classList?.remove(e)}function Rk(t,e,n){Gn(n).onDone(()=>t.processLeaveNode(e))}function Nk(t){let e=[];return SC(t,e),e}function SC(t,e){for(let n=0;n<t.length;n++){let r=t[n];r instanceof Di?SC(r.players,e):e.push(r)}}function xk(t,e){let n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){let o=n[i];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}function _C(t,e,n){let r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(o=>i.add(o)):e.set(t,r),n.delete(t),!0}var Uo=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,n)=>{};constructor(e,n,r){this._driver=n,this._normalizer=r,this._transitionEngine=new Rm(e.body,n,r),this._timelineEngine=new Am(e.body,n,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,n,r,i,o){let s=e+"-"+i,a=this._triggerCache[s];if(!a){let c=[],l=[],u=EC(this._driver,o,c,l);if(c.length)throw KD(i,c);a=vk(i,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(n,i,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,r,i){this._transitionEngine.insertNode(e,n,r,i)}onRemove(e,n,r){this._transitionEngine.removeNode(e,n,r)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,r,i){if(r.charAt(0)=="@"){let[o,s]=lm(r),a=i;this._timelineEngine.command(o,n,s,a)}else this._transitionEngine.trigger(e,n,r,i)}listen(e,n,r,i,o){if(r.charAt(0)=="@"){let[s,a]=lm(r);return this._timelineEngine.listen(s,n,a,o)}return this._transitionEngine.listen(e,n,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Ok(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=wm(e[0]),e.length>1&&(r=wm(e[e.length-1]))):e instanceof Map&&(n=wm(e)),n||r?new kk(t,n,r):null}var kk=(()=>{class t{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(n,r,i){this._element=n,this._startStyles=r,this._endStyles=i;let o=t.initialStylesByElement.get(n);o||t.initialStylesByElement.set(n,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Jt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Jt(this._element,this._initialStyles),this._endStyles&&(Jt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Sr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Sr(this._element,this._endStyles),this._endStyles=null),Jt(this._element,this._initialStyles),this._state=3)}}return t})();function wm(t){let e=null;return t.forEach((n,r)=>{Pk(r)&&(e=e||new Map,e.set(r,n))}),e}function Pk(t){return t==="display"||t==="position"}var dd=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,n,r,i){this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,n=this._triggerWebAnimation(this.element,e,this.options);if(!n)return this._onFinish(),null;this.domPlayer=n,this._finalKeyframe=e.length?e[e.length-1]:new Map;let r=()=>this._onFinish();return n.addEventListener("finish",r),this.onDestroy(()=>{n.removeEventListener("finish",r)}),n}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let n=[];return e.forEach(r=>{n.push(Object.fromEntries(r))}),n}_triggerWebAnimation(e,n,r){let i=this._convertKeyframesToObject(n);try{return e.animate(i,r)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:td(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let n=e==="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},fd=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,n){return um(e,n)}getParentElement(e){return Zu(e)}query(e,n,r){return dm(e,n,r)}computeStyle(e,n,r){return td(e,n)}animate(e,n,r,i,o,s=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};o&&(c.easing=o);let l=new Map,u=s.filter(f=>f instanceof dd);cC(r,i)&&u.forEach(f=>{f.currentSnapshot.forEach((g,m)=>l.set(m,g))});let d=sC(n).map(f=>new Map(f));d=lC(e,d,l);let p=Ok(e,d);return new dd(e,d,c,p)}};var od="@",IC="@.disabled",hd=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,n,r,i){this.namespaceId=e,this.delegate=n,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,r,i=!0){this.delegate.insertBefore(e,n,r),this.engine.onInsert(this.namespaceId,n,e,i)}removeChild(e,n,r,i){if(i){this.delegate.removeChild(e,n,r,i);return}this.parentNode(n)&&this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,r,i){this.delegate.setAttribute(e,n,r,i)}removeAttribute(e,n,r){this.delegate.removeAttribute(e,n,r)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,r,i){this.delegate.setStyle(e,n,r,i)}removeStyle(e,n,r){this.delegate.removeStyle(e,n,r)}setProperty(e,n,r){n.charAt(0)==od&&n==IC?this.disableAnimations(e,!!r):this.delegate.setProperty(e,n,r)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,r,i){return this.delegate.listen(e,n,r,i)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}},Nm=class extends hd{factory;constructor(e,n,r,i,o){super(n,r,i,o),this.factory=e,this.namespaceId=n}setProperty(e,n,r){n.charAt(0)==od?n.charAt(1)=="."&&n==IC?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,n.slice(1),r):this.delegate.setProperty(e,n,r)}listen(e,n,r,i){if(n.charAt(0)==od){let o=Fk(e),s=n.slice(1),a="";return s.charAt(0)!=od&&([s,a]=Lk(s)),this.engine.listen(this.namespaceId,o,s,a,c=>{let l=c._data||-1;this.factory.scheduleListenerCallback(l,r,c)})}return this.delegate.listen(e,n,r,i)}};function Fk(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function Lk(t){let e=t.indexOf("."),n=t.substring(0,e),r=t.slice(e+1);return[n,r]}var pd=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,n.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(e,n){let i=this.delegate.createRenderer(e,n);if(!e||!n?.data?.animation){let l=this._rendererCache,u=l.get(i);if(!u){let d=()=>l.delete(i);u=new hd("",i,this.engine,d),l.set(i,u)}return u}let o=n.id,s=n.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(o,s,e,l.name,l)};return n.data.animation.forEach(a),new Nm(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>n(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([n,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var Vk=(()=>{class t extends Uo{constructor(n,r,i){super(n,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||t)(N(fe),N(Ii),N(Ti))};static \u0275prov=C({token:t,factory:t.\u0275fac})}return t})();function Uk(){return new sd}function Bk(){return new pd(_(Fs),_(Uo),_(ue))}var TC=[{provide:Ti,useFactory:Uk},{provide:Uo,useClass:Vk},{provide:Nn,useFactory:Bk}],t9=[{provide:Ii,useClass:xm},{provide:ll,useValue:"NoopAnimations"},...TC],$k=[{provide:Ii,useFactory:()=>new fd},{provide:ll,useFactory:()=>"BrowserAnimations"},...TC];function AC(){return ht("NgEagerAnimations"),[...$k]}var MC={providers:[Nw({eventCoalescing:!0}),fg(ND,hu()),AC()]};var RC=()=>({exact:!0});function Hk(t,e){if(t&1){let n=ro();he(0,"div",7),be("click",function(){or(n);let i=pt();return sr(i.onCloseSidebar())}),pe()}}var gd=class t{constructor(e,n){this.el=e;this.renderer=n}isSidebarOpen=!1;closeSidebar=new ae;startX=0;currentX=0;isDragging=!1;onCloseSidebar(){this.isSidebarOpen=!1,this.closeSidebar.emit()}onTouchStart(e){this.startX=e.touches[0].clientX,this.currentX=this.startX,this.isDragging=!0}onTouchMove(e){if(!this.isDragging)return;this.currentX=e.touches[0].clientX;let n=this.currentX-this.startX;n<0&&this.renderer.setStyle(this.el.nativeElement,"transform",`translateX(${n}px)`)}onTouchEnd(e){this.isDragging=!1,this.currentX-this.startX<-50&&this.onCloseSidebar(),this.renderer.setStyle(this.el.nativeElement,"transform","translateX(0)")}static \u0275fac=function(n){return new(n||t)(W(Ze),W(Gt))};static \u0275cmp=Je({type:t,selectors:[["app-sidebar"]],hostBindings:function(n,r){n&1&&be("touchstart",function(o){return r.onTouchStart(o)})("touchmove",function(o){return r.onTouchMove(o)})("touchend",function(o){return r.onTouchEnd(o)})},inputs:{isSidebarOpen:"isSidebarOpen"},outputs:{closeSidebar:"closeSidebar"},decls:11,vars:7,consts:[[1,"sidebar"],[1,"title"],["routerLink","/","routerLinkActive","active-link",3,"click","routerLinkActiveOptions"],["src","note.svg",1,"note"],["routerLink","/stats","routerLinkActive","active-link",3,"click","routerLinkActiveOptions"],["src","stat.svg",1,"stat"],[1,"overlay"],[1,"overlay",3,"click"]],template:function(n,r){n&1&&(he(0,"div",0)(1,"p",1),re(2,"Menu"),pe(),he(3,"nav")(4,"span",2),be("click",function(){return r.onCloseSidebar()}),ot(5,"img",3),re(6,"Score"),pe(),he(7,"span",4),be("click",function(){return r.onCloseSidebar()}),ot(8,"img",5),re(9,"Stats"),pe()()(),Pn(10,Hk,1,0,"div",6)),n&2&&(io("open",r.isSidebarOpen),Z(4),it("routerLinkActiveOptions",Il(5,RC)),Z(3),it("routerLinkActiveOptions",Il(6,RC)),Z(3),Fn(r.isSidebarOpen?10:-1))},dependencies:[pg,Eo,dg],styles:[".close-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:none;border:none;color:#fff;font-size:24px;cursor:pointer}.close-btn[_ngcontent-%COMP%]:hover{color:#3d5442}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;height:100vh;background:#fff;color:#333;width:25%;max-width:300px;transition:left .3s ease-in-out;z-index:1100;border-radius:0 20px 20px 0}.sidebar.open[_ngcontent-%COMP%]{left:0}.sidebar[_ngcontent-%COMP%]{padding-right:10px;padding-left:20px}.sidebar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14px;padding-left:10px}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{display:flex;flex-direction:column}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:none;padding:10px;display:flex;align-items:center;font-size:18px;transition:background .3s;border-radius:20px;margin-bottom:10px}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{cursor:pointer;background:#ece4c3}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   span.active-link[_ngcontent-%COMP%]{background:#ece4c3;font-weight:600}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:25px;margin-right:10px}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100vh;background:#00000080;z-index:1000}@media screen and (max-width:768px){.sidebar[_ngcontent-%COMP%]{width:85vw;max-width:none}}"],changeDetection:0})};var md=class t{isSidebarOpen;toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}onCloseSidebar(){this.toggleSidebar()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Je({type:t,selectors:[["app-root"]],decls:6,vars:1,consts:[[1,"menu-btn",3,"click"],[3,"closeSidebar","isSidebarOpen"],[1,"main-content"]],template:function(n,r){n&1&&(he(0,"header")(1,"button",0),be("click",function(){return r.toggleSidebar()}),re(2,"\u2630"),pe()(),he(3,"app-sidebar",1),be("closeSidebar",function(){return r.onCloseSidebar()}),pe(),he(4,"div",2),ot(5,"router-outlet"),pe()),n&2&&(Z(3),it("isSidebarOpen",r.isSidebarOpen))},dependencies:[Ks,gd],styles:[".btn[_ngcontent-%COMP%]{border:none;border-radius:3px;background-color:#dfd39d;color:#3d5442}.btn-pad[_ngcontent-%COMP%]{padding:5px}.btn[_ngcontent-%COMP%]:disabled{background-color:#ece4c3;color:#000;cursor:not-allowed;opacity:.6}.btn[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#d2c277;transition:.2s}header[_ngcontent-%COMP%]{height:60px;background:#333;color:#fff;display:flex;align-items:center;padding:0 20px;position:fixed;width:100%;top:0;left:0;z-index:1000}.menu-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;font-size:24px;cursor:pointer;margin-right:15px}.main-content[_ngcontent-%COMP%]{padding:80px 20px;transition:margin-left .3s ease-in-out}@media screen and (max-width:768px){.sidebar[_ngcontent-%COMP%]{width:100%;max-width:none}}"]})};xp(md,MC).catch(t=>console.error("Application bootstrap failed:",t?.message||"Unknown error"));
